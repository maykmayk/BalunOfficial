{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { extent, max, median, min, range as d3Range } from 'd3-array';\nimport { stack, stackOffsetNone } from 'd3-shape';\nimport { scaleLinear, scaleLog, scaleTime, scaleUtc, scaleBand } from 'd3-scale';\nimport { timeSecond, timeMinute, timeHour, timeDay, timeMonth, timeYear, utcYear, utcMonth, utcDay, utcHour, utcMinute, utcSecond } from 'd3-time';\nimport { timeFormat, utcFormat } from 'd3-time-format';\nfunction defaultAxisOptions(options) {\n  var _options$elementType, _options$minTickPaddi, _options$tickLabelRot, _options$innerBandPad, _options$outerBandPad, _options$innerSeriesB, _options$outerSeriesB, _options$show, _options$stacked, _options$shouldNice;\n  return _extends({}, options, {\n    elementType: (_options$elementType = options.elementType) != null ? _options$elementType : 'line',\n    minTickPaddingForRotation: (_options$minTickPaddi = options.minTickPaddingForRotation) != null ? _options$minTickPaddi : 10,\n    tickLabelRotationDeg: (_options$tickLabelRot = options.tickLabelRotationDeg) != null ? _options$tickLabelRot : 60,\n    innerBandPadding: (_options$innerBandPad = options.innerBandPadding) != null ? _options$innerBandPad : 0.5,\n    outerBandPadding: (_options$outerBandPad = options.outerBandPadding) != null ? _options$outerBandPad : 0.2,\n    innerSeriesBandPadding: (_options$innerSeriesB = options.innerSeriesBandPadding) != null ? _options$innerSeriesB : 0.2,\n    outerSeriesBandPadding: (_options$outerSeriesB = options.outerSeriesBandPadding) != null ? _options$outerSeriesB : 0,\n    show: (_options$show = options.show) != null ? _options$show : true,\n    stacked: (_options$stacked = options.stacked) != null ? _options$stacked : false,\n    shouldNice: (_options$shouldNice = options.shouldNice) != null ? _options$shouldNice : true\n  });\n}\nexport default function buildAxisLinear(isPrimary, userOptions, series, allDatums, gridDimensions, width, height) {\n  var options = defaultAxisOptions(userOptions);\n  if (!options.position) {\n    throw new Error(\"Chart axes must have a valid 'position' property\");\n  }\n  var isVertical = ['left', 'right'].indexOf(options.position) > -1; // Now we need to figure out the range\n\n  var range = isVertical ? [gridDimensions.height, 0] : [0, gridDimensions.width];\n  var outerRange = isVertical ? [height, 0] : [0, width]; // Give the scale a home\n\n  return options.scaleType === 'time' || options.scaleType === 'localTime' ? buildTimeAxis(isPrimary, options, series, allDatums, isVertical, range, outerRange) : options.scaleType === 'linear' || options.scaleType === 'log' ? buildLinearAxis(isPrimary, options, series, allDatums, isVertical, range, outerRange) : options.scaleType === 'band' ? buildBandAxis(isPrimary, options, series, isVertical, range, outerRange) : function () {\n    throw new Error('Invalid scale type');\n  }();\n}\nfunction buildTimeAxis(isPrimary, options, series, allDatums, isVertical, range, outerRange) {\n  var isLocal = options.scaleType === 'localTime';\n  var scaleFn = isLocal ? scaleTime : scaleUtc;\n  var isInvalid = false;\n  series = isPrimary ? series : series.filter(function (s) {\n    return s.secondaryAxisId === options.id;\n  });\n  allDatums = isPrimary ? allDatums : allDatums.filter(function (d) {\n    return d.secondaryAxisId === options.id;\n  }); // Now set the range\n\n  var scale = scaleFn(range);\n  var _extent = extent(allDatums, function (datum) {\n      var value = options.getValue(datum.originalDatum);\n      datum[isPrimary ? 'primaryValue' : 'secondaryValue'] = value;\n      return value;\n    }),\n    minValue = _extent[0],\n    maxValue = _extent[1]; // Here, we find the maximum context (in descending order from year\n  // down to millisecond) needed to understand the\n  // dates in this dataset. If the min/max dates span multiples of\n  // any of the time units OR if the max date resides in a different\n  // unit boundary than today's, we use that unit as context.\n\n  var autoFormatStr;\n  var units = isLocal ? {\n    year: timeYear,\n    month: timeMonth,\n    day: timeDay,\n    hour: timeHour,\n    minute: timeMinute,\n    second: timeSecond\n  } : {\n    year: utcYear,\n    month: utcMonth,\n    day: utcDay,\n    hour: utcHour,\n    minute: utcMinute,\n    second: utcSecond\n  };\n  if (minValue && maxValue) {\n    if (units.year.count(minValue, maxValue) > 0 || units.year.floor(maxValue) < units.year()) {\n      autoFormatStr = '%b %-d, %Y %-I:%M:%S.%L %p';\n    } else if (units.month.count(minValue, maxValue) > 0 || units.month.floor(maxValue) < units.month()) {\n      autoFormatStr = '%b %-d, %-I:%M:%S.%L %p';\n    } else if (units.day.count(minValue, maxValue) > 0 || units.day.floor(maxValue) < units.day()) {\n      autoFormatStr = '%b %-d, %-I:%M:%S.%L %p';\n    } else if (units.hour.count(minValue, maxValue) > 0 || units.hour.floor(maxValue) < units.hour()) {\n      autoFormatStr = '%-I:%M:%S.%L %p';\n    } else if (units.minute.count(minValue, maxValue) > 0 || units.minute.floor(maxValue) < units.minute()) {\n      autoFormatStr = '%-I:%M:%S.%L';\n    } else if (units.second.count(minValue, maxValue) > 0 || units.second.floor(maxValue) < units.second()) {\n      autoFormatStr = '%L';\n    }\n  }\n  var resolvedTimeFormat = isLocal ? timeFormat : utcFormat;\n  var trimFormat = function trimFormat(str) {\n    return str.trim().replace(/(,$|^,)/, '');\n  };\n  var contextFormat = function contextFormat(format, date) {\n    if (units.second(date) < date) {\n      // milliseconds - Do not remove any context\n      return resolvedTimeFormat(format)(date);\n    }\n    if (units.minute(date) < date) {\n      // seconds - remove potential milliseconds\n      return resolvedTimeFormat(trimFormat(format.replace(/\\.%L.*?(\\s|$)/, '')))(date);\n    }\n    if (units.hour(date) < date) {\n      // minutes - remove potential seconds and milliseconds\n      return resolvedTimeFormat(trimFormat(format.replace(/:%S.*?(\\s|$)/, '')))(date);\n    }\n    if (units.day(date) < date) {\n      // hours - remove potential minutes and seconds and milliseconds\n      return resolvedTimeFormat(trimFormat(format.replace(/:%M.*?(\\s|$)/, '')))(date);\n    }\n    if (units.month(date) < date) {\n      // days  - remove potential hours, minutes, seconds and milliseconds\n      return resolvedTimeFormat(trimFormat(format.replace(/%-I.*/, '')))(date);\n    }\n    if (units.year(date) < date) {\n      // months - remove potential days, hours, minutes, seconds and milliseconds\n      return resolvedTimeFormat(trimFormat(format.replace(/%-d.*/, '')))(date);\n    } // years\n\n    return resolvedTimeFormat('%Y')(date);\n  };\n  var shouldNice = options.shouldNice; // see https://stackoverflow.com/a/2831422\n\n  if (Object.prototype.toString.call(options.min) === '[object Date]') {\n    minValue = min([options.min, minValue]);\n    shouldNice = false;\n  }\n  if (Object.prototype.toString.call(options.max) === '[object Date]') {\n    maxValue = max([options.max, maxValue]);\n    shouldNice = false;\n  }\n  if (Object.prototype.toString.call(options.hardMin) === '[object Date]') {\n    minValue = options.hardMin;\n    shouldNice = false;\n  }\n  if (Object.prototype.toString.call(options.hardMax) === '[object Date]') {\n    maxValue = options.hardMax;\n    shouldNice = false;\n  }\n  if (minValue === undefined || maxValue === undefined) {\n    console.info('Invalid scale min/max', {\n      options: options,\n      series: series,\n      range: range,\n      values: allDatums.map(function (d) {\n        return isPrimary ? d.primaryValue : d.secondaryValue;\n      })\n    });\n    isInvalid = true;\n  } // Set the domain\n\n  scale.domain([minValue, maxValue]);\n  if (options.invert) {\n    scale.domain(Array.from(scale.domain()).reverse());\n  }\n  if (shouldNice) {\n    scale.nice();\n  }\n  var outerScale = scale.copy().range(outerRange); // Supplementary band scale\n\n  var primaryBandScale = isPrimary ? buildPrimaryBandScale(options, scale, series, range) : undefined;\n  var seriesBandScale = primaryBandScale ? buildSeriesBandScale(options, primaryBandScale, series) : undefined;\n  var primaryBandWidth = primaryBandScale == null ? void 0 : primaryBandScale.bandwidth();\n  if (options.padBandRange && primaryBandWidth) {\n    var bandStart = scale.invert(0);\n    var bandEnd = scale.invert(primaryBandWidth);\n    var diff = bandEnd.valueOf() - bandStart.valueOf();\n    scale.domain([new Date(scale.domain()[0].valueOf() - diff / 2), new Date(scale.domain()[1].valueOf() + diff / 2)]);\n  }\n  var formatters = {};\n  var defaultFormat = scale.tickFormat();\n  var scaleFormat = function scaleFormat(value) {\n    var _options$formatters$s, _options$formatters;\n    return (_options$formatters$s = (_options$formatters = options.formatters) == null ? void 0 : _options$formatters.scale == null ? void 0 : _options$formatters.scale(value, _extends({}, formatters, {\n      scale: undefined\n    }))) != null ? _options$formatters$s : contextFormat(autoFormatStr, value);\n  };\n  var tooltipFormat = function tooltipFormat(value) {\n    var _options$formatters$t, _options$formatters2;\n    return (_options$formatters$t = (_options$formatters2 = options.formatters) == null ? void 0 : _options$formatters2.tooltip == null ? void 0 : _options$formatters2.tooltip(value, _extends({}, formatters, {\n      tooltip: undefined\n    }))) != null ? _options$formatters$t : scaleFormat(value);\n  };\n  var cursorFormat = function cursorFormat(value) {\n    var _options$formatters$c, _options$formatters3;\n    return (_options$formatters$c = (_options$formatters3 = options.formatters) == null ? void 0 : _options$formatters3.cursor == null ? void 0 : _options$formatters3.cursor(value, _extends({}, formatters, {\n      cursor: undefined\n    }))) != null ? _options$formatters$c : scaleFormat(value);\n  };\n  Object.assign(formatters, {\n    \"default\": defaultFormat,\n    scale: scaleFormat,\n    tooltip: tooltipFormat,\n    cursor: cursorFormat\n  });\n  return _extends({}, options, {\n    isInvalid: isInvalid,\n    axisFamily: 'time',\n    isVertical: isVertical,\n    scale: scale,\n    range: range,\n    outerScale: outerScale,\n    primaryBandScale: primaryBandScale,\n    seriesBandScale: seriesBandScale,\n    formatters: formatters\n  });\n}\nfunction buildLinearAxis(isPrimary, options, series, allDatums, isVertical, range, outerRange) {\n  var scale = options.scaleType === 'log' ? scaleLog() : scaleLinear();\n  var isInvalid = false;\n  series = isPrimary ? series : series.filter(function (s) {\n    return s.secondaryAxisId === options.id;\n  });\n  allDatums = isPrimary ? allDatums : allDatums.filter(function (d) {\n    return d.secondaryAxisId === options.id;\n  });\n  if (options.stacked) {\n    stackSeries(series, options);\n  }\n  var _ref = options.stacked ? extent(series.map(function (s) {\n      return s.datums.map(function (datum) {\n        var _datum$stackData;\n        var value = options.getValue(datum.originalDatum);\n        datum[isPrimary ? 'primaryValue' : 'secondaryValue'] = value;\n        return (_datum$stackData = datum.stackData) != null ? _datum$stackData : [];\n      });\n    }).flat(2)) : extent(allDatums, function (datum) {\n      var value = options.getValue(datum.originalDatum);\n      datum[isPrimary ? 'primaryValue' : 'secondaryValue'] = value;\n      return value;\n    }),\n    minValue = _ref[0],\n    maxValue = _ref[1];\n  var shouldNice = options.shouldNice;\n  if (typeof options.min === 'number') {\n    minValue = min([options.min, minValue]);\n    shouldNice = false;\n  }\n  if (typeof options.max === 'number') {\n    maxValue = max([options.max, maxValue]);\n    shouldNice = false;\n  }\n  if (typeof options.minDomainLength === 'number' && !(minValue === undefined || maxValue === undefined)) {\n    var mid = median([minValue, maxValue]);\n    var top = mid + options.minDomainLength / 2;\n    var bottom = mid - options.minDomainLength / 2;\n    maxValue = Math.max(top, maxValue);\n    minValue = Math.min(bottom, minValue);\n  }\n  if (typeof options.hardMin === 'number') {\n    minValue = options.hardMin;\n    shouldNice = false;\n  }\n  if (typeof options.hardMax === 'number') {\n    maxValue = options.hardMax;\n    shouldNice = false;\n  }\n  if (minValue === undefined || maxValue === undefined) {\n    var _minValue, _maxValue;\n    isInvalid = true;\n    console.info('Invalid scale min/max', {\n      options: options,\n      series: series,\n      range: range,\n      values: allDatums.map(function (d) {\n        return isPrimary ? d.primaryValue : d.secondaryValue;\n      })\n    });\n    minValue = (_minValue = minValue) != null ? _minValue : 0;\n    maxValue = (_maxValue = maxValue) != null ? _maxValue : 0; // throw new Error('Invalid scale min/max'\n  } // Set the domain\n\n  scale.domain([minValue, maxValue]);\n  if (options.invert) {\n    scale.domain(Array.from(scale.domain()).reverse());\n  }\n  scale.range(range);\n  if (shouldNice) {\n    scale.nice();\n  }\n  var outerScale = scale.copy().range(outerRange);\n  var primaryBandScale = isPrimary ? buildPrimaryBandScale(options, scale, series, range) : undefined;\n  var seriesBandScale = primaryBandScale ? buildSeriesBandScale(options, primaryBandScale, series) : undefined;\n  var defaultFormat = scale.tickFormat();\n  var formatters = {};\n  var scaleFormat = function scaleFormat(value) {\n    var _options$formatters$s2, _options$formatters4;\n    return (_options$formatters$s2 = (_options$formatters4 = options.formatters) == null ? void 0 : _options$formatters4.scale == null ? void 0 : _options$formatters4.scale(value, _extends({}, formatters, {\n      scale: undefined\n    }))) != null ? _options$formatters$s2 : defaultFormat(value);\n  };\n  var tooltipFormat = function tooltipFormat(value) {\n    var _options$formatters$t2, _options$formatters5;\n    return (_options$formatters$t2 = (_options$formatters5 = options.formatters) == null ? void 0 : _options$formatters5.tooltip == null ? void 0 : _options$formatters5.tooltip(value, _extends({}, formatters, {\n      tooltip: undefined\n    }))) != null ? _options$formatters$t2 : scaleFormat(value);\n  };\n  var cursorFormat = function cursorFormat(value) {\n    var _options$formatters$c2, _options$formatters6;\n    return (_options$formatters$c2 = (_options$formatters6 = options.formatters) == null ? void 0 : _options$formatters6.cursor == null ? void 0 : _options$formatters6.cursor(value, _extends({}, formatters, {\n      cursor: undefined\n    }))) != null ? _options$formatters$c2 : tooltipFormat(value);\n  };\n  Object.assign(formatters, {\n    \"default\": defaultFormat,\n    scale: scaleFormat,\n    tooltip: tooltipFormat,\n    cursor: cursorFormat\n  });\n  return _extends({}, options, {\n    isInvalid: isInvalid,\n    axisFamily: 'linear',\n    isVertical: isVertical,\n    scale: scale,\n    range: range,\n    outerScale: outerScale,\n    primaryBandScale: primaryBandScale,\n    seriesBandScale: seriesBandScale,\n    formatters: formatters\n  });\n}\nfunction buildBandAxis(isPrimary, options, series, isVertical, range, outerRange) {\n  var _options$outerBandPad2, _options$innerBandPad2;\n  series = series.filter(function (d) {\n    return d.secondaryAxisId === options.id;\n  });\n  var isInvalid = false;\n  var domain = Array.from(new Set(series.map(function (d) {\n    return d.datums;\n  }).flat().map(function (datum) {\n    var value = options.getValue(datum.originalDatum);\n    datum[isPrimary ? 'primaryValue' : 'secondaryValue'] = value;\n    return value;\n  })));\n  var scale = scaleBand(domain, range).round(false).paddingOuter((_options$outerBandPad2 = options.outerBandPadding) != null ? _options$outerBandPad2 : 0).paddingInner((_options$innerBandPad2 = options.innerBandPadding) != null ? _options$innerBandPad2 : 0); // Invert if necessary\n\n  if (options.invert) {\n    scale.domain(Array.from(scale.domain()).reverse());\n  }\n  var outerScale = scale.copy().range(outerRange);\n  var primaryBandScale = scale;\n  var seriesBandScale = buildSeriesBandScale(options, primaryBandScale, series);\n  var defaultFormat = function defaultFormat(d) {\n    return d;\n  };\n  var formatters = {};\n  var scaleFormat = function scaleFormat(value) {\n    var _options$formatters$s3, _options$formatters7;\n    return (_options$formatters$s3 = (_options$formatters7 = options.formatters) == null ? void 0 : _options$formatters7.scale == null ? void 0 : _options$formatters7.scale(value, _extends({}, formatters, {\n      scale: undefined\n    }))) != null ? _options$formatters$s3 : defaultFormat(value);\n  };\n  var tooltipFormat = function tooltipFormat(value) {\n    var _options$formatters$t3, _options$formatters8;\n    return (_options$formatters$t3 = (_options$formatters8 = options.formatters) == null ? void 0 : _options$formatters8.tooltip == null ? void 0 : _options$formatters8.tooltip(value, _extends({}, formatters, {\n      tooltip: undefined\n    }))) != null ? _options$formatters$t3 : scaleFormat(value);\n  };\n  var cursorFormat = function cursorFormat(value) {\n    var _options$formatters$c3, _options$formatters9;\n    return (_options$formatters$c3 = (_options$formatters9 = options.formatters) == null ? void 0 : _options$formatters9.cursor == null ? void 0 : _options$formatters9.cursor(value, _extends({}, formatters, {\n      cursor: undefined\n    }))) != null ? _options$formatters$c3 : tooltipFormat(value);\n  };\n  Object.assign(formatters, {\n    \"default\": defaultFormat,\n    scale: scaleFormat,\n    tooltip: tooltipFormat,\n    cursor: cursorFormat\n  });\n  return _extends({}, options, {\n    isInvalid: isInvalid,\n    axisFamily: 'band',\n    isVertical: isVertical,\n    scale: scale,\n    range: range,\n    outerScale: outerScale,\n    formatters: formatters,\n    primaryBandScale: primaryBandScale,\n    seriesBandScale: seriesBandScale\n  });\n} //\n\nfunction stackSeries(series, axisOptions) {\n  var _axisOptions$stackOff;\n  var seriesIndices = Object.keys(series);\n  var stacker = stack().keys(seriesIndices).value(function (_, seriesIndex, index) {\n    var _series$Number, _series$Number$datums;\n    var originalDatum = (_series$Number = series[Number(seriesIndex)]) == null ? void 0 : (_series$Number$datums = _series$Number.datums[index]) == null ? void 0 : _series$Number$datums.originalDatum;\n    var val = typeof originalDatum !== 'undefined' ? axisOptions.getValue(originalDatum) : 0;\n    if (typeof val === 'undefined' || val === null) {\n      return 0;\n    }\n    return val;\n  }).offset((_axisOptions$stackOff = axisOptions.stackOffset) != null ? _axisOptions$stackOff : stackOffsetNone);\n  var stacked = stacker(Array.from({\n    length: series.sort(function (a, b) {\n      return b.datums.length - a.datums.length;\n    })[0].datums.length\n  }));\n  for (var sIndex = 0; sIndex < stacked.length; sIndex++) {\n    var s = stacked[sIndex];\n    for (var i = 0; i < s.length; i++) {\n      var datum = s[i];\n      if (series[sIndex].datums[i]) {\n        // @ts-ignore\n        datum.data = series[sIndex].datums[i];\n        series[sIndex].datums[i].stackData = datum;\n      }\n    }\n  }\n}\nfunction buildPrimaryBandScale(options, scale, series, range) {\n  var _options$outerBandPad3, _options$innerBandPad3;\n\n  // Find the two closest points along axis\n  // Do not allow the band to be smaller than single pixel of the output range\n  var impliedBandWidth = Math.max.apply(Math, range);\n  var bandRange = Math.max.apply(Math, range);\n  (function () {\n    for (var i = 0; i < series.length; i++) {\n      var serie = series[i];\n      for (var j = 0; j < serie.datums.length; j++) {\n        var _d1$primaryValue;\n        var d1 = serie.datums[j];\n        var one = scale((_d1$primaryValue = d1.primaryValue) != null ? _d1$primaryValue : NaN);\n        for (var k = 0; k < serie.datums.length; k++) {\n          var _d2$primaryValue;\n          var d2 = serie.datums[k];\n          var two = scale((_d2$primaryValue = d2.primaryValue) != null ? _d2$primaryValue : NaN);\n          if (one === two) {\n            continue;\n          }\n          var diff = Math.abs(Math.max(one, two) - Math.min(one, two));\n          if (diff < impliedBandWidth) {\n            impliedBandWidth = Math.max(diff, bandRange);\n            if (impliedBandWidth === bandRange) {\n              return;\n            }\n          }\n        }\n      }\n    }\n  })();\n  var bandDomain = d3Range(bandRange / impliedBandWidth);\n  var primaryBandScale = scaleBand(bandDomain, range).round(false).paddingOuter((_options$outerBandPad3 = options.outerBandPadding) != null ? _options$outerBandPad3 : 0).paddingInner((_options$innerBandPad3 = options.innerBandPadding) != null ? _options$innerBandPad3 : 0);\n  return primaryBandScale;\n}\nfunction buildSeriesBandScale(options, primaryBandScale, series) {\n  var _options$outerSeriesB2, _options$innerSeriesB2;\n  var bandDomain = d3Range(series.length);\n  var seriesBandScale = scaleBand(bandDomain, [0, primaryBandScale.bandwidth()]).round(false).paddingOuter((_options$outerSeriesB2 = options.outerSeriesBandPadding) != null ? _options$outerSeriesB2 : options.outerBandPadding ? options.outerBandPadding / 2 : 0).paddingInner((_options$innerSeriesB2 = options.innerSeriesBandPadding) != null ? _options$innerSeriesB2 : options.innerBandPadding ? options.innerBandPadding / 2 : 0);\n  var scale = function scale(seriesIndex) {\n    var _series$find;\n    return seriesBandScale((_series$find = series.find(function (d) {\n      return d.index === seriesIndex;\n    })) == null ? void 0 : _series$find.indexPerAxis);\n  };\n  return Object.assign(scale, seriesBandScale);\n}","map":{"version":3,"names":["_extends","extent","max","median","min","range","d3Range","stack","stackOffsetNone","scaleLinear","scaleLog","scaleTime","scaleUtc","scaleBand","timeSecond","timeMinute","timeHour","timeDay","timeMonth","timeYear","utcYear","utcMonth","utcDay","utcHour","utcMinute","utcSecond","timeFormat","utcFormat","defaultAxisOptions","options","_options$elementType","_options$minTickPaddi","_options$tickLabelRot","_options$innerBandPad","_options$outerBandPad","_options$innerSeriesB","_options$outerSeriesB","_options$show","_options$stacked","_options$shouldNice","elementType","minTickPaddingForRotation","tickLabelRotationDeg","innerBandPadding","outerBandPadding","innerSeriesBandPadding","outerSeriesBandPadding","show","stacked","shouldNice","buildAxisLinear","isPrimary","userOptions","series","allDatums","gridDimensions","width","height","position","Error","isVertical","indexOf","outerRange","scaleType","buildTimeAxis","buildLinearAxis","buildBandAxis","isLocal","scaleFn","isInvalid","filter","s","secondaryAxisId","id","d","scale","_extent","datum","value","getValue","originalDatum","minValue","maxValue","autoFormatStr","units","year","month","day","hour","minute","second","count","floor","resolvedTimeFormat","trimFormat","str","trim","replace","contextFormat","format","date","Object","prototype","toString","call","hardMin","hardMax","undefined","console","info","values","map","primaryValue","secondaryValue","domain","invert","Array","from","reverse","nice","outerScale","copy","primaryBandScale","buildPrimaryBandScale","seriesBandScale","buildSeriesBandScale","primaryBandWidth","bandwidth","padBandRange","bandStart","bandEnd","diff","valueOf","Date","formatters","defaultFormat","tickFormat","scaleFormat","_options$formatters$s","_options$formatters","tooltipFormat","_options$formatters$t","_options$formatters2","tooltip","cursorFormat","_options$formatters$c","_options$formatters3","cursor","assign","axisFamily","stackSeries","_ref","datums","_datum$stackData","stackData","flat","minDomainLength","mid","top","bottom","Math","_minValue","_maxValue","_options$formatters$s2","_options$formatters4","_options$formatters$t2","_options$formatters5","_options$formatters$c2","_options$formatters6","_options$outerBandPad2","_options$innerBandPad2","Set","round","paddingOuter","paddingInner","_options$formatters$s3","_options$formatters7","_options$formatters$t3","_options$formatters8","_options$formatters$c3","_options$formatters9","axisOptions","_axisOptions$stackOff","seriesIndices","keys","stacker","_","seriesIndex","index","_series$Number","_series$Number$datums","Number","val","offset","stackOffset","length","sort","a","b","sIndex","i","data","_options$outerBandPad3","_options$innerBandPad3","impliedBandWidth","apply","bandRange","serie","j","_d1$primaryValue","d1","one","NaN","k","_d2$primaryValue","d2","two","abs","bandDomain","_options$outerSeriesB2","_options$innerSeriesB2","_series$find","find","indexPerAxis"],"sources":["/Users/lebon/Desktop/el_balon/node_modules/react-charts/es/utils/buildAxis.linear.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { extent, max, median, min, range as d3Range } from 'd3-array';\nimport { stack, stackOffsetNone } from 'd3-shape';\nimport { scaleLinear, scaleLog, scaleTime, scaleUtc, scaleBand } from 'd3-scale';\nimport { timeSecond, timeMinute, timeHour, timeDay, timeMonth, timeYear, utcYear, utcMonth, utcDay, utcHour, utcMinute, utcSecond } from 'd3-time';\nimport { timeFormat, utcFormat } from 'd3-time-format';\n\nfunction defaultAxisOptions(options) {\n  var _options$elementType, _options$minTickPaddi, _options$tickLabelRot, _options$innerBandPad, _options$outerBandPad, _options$innerSeriesB, _options$outerSeriesB, _options$show, _options$stacked, _options$shouldNice;\n\n  return _extends({}, options, {\n    elementType: (_options$elementType = options.elementType) != null ? _options$elementType : 'line',\n    minTickPaddingForRotation: (_options$minTickPaddi = options.minTickPaddingForRotation) != null ? _options$minTickPaddi : 10,\n    tickLabelRotationDeg: (_options$tickLabelRot = options.tickLabelRotationDeg) != null ? _options$tickLabelRot : 60,\n    innerBandPadding: (_options$innerBandPad = options.innerBandPadding) != null ? _options$innerBandPad : 0.5,\n    outerBandPadding: (_options$outerBandPad = options.outerBandPadding) != null ? _options$outerBandPad : 0.2,\n    innerSeriesBandPadding: (_options$innerSeriesB = options.innerSeriesBandPadding) != null ? _options$innerSeriesB : 0.2,\n    outerSeriesBandPadding: (_options$outerSeriesB = options.outerSeriesBandPadding) != null ? _options$outerSeriesB : 0,\n    show: (_options$show = options.show) != null ? _options$show : true,\n    stacked: (_options$stacked = options.stacked) != null ? _options$stacked : false,\n    shouldNice: (_options$shouldNice = options.shouldNice) != null ? _options$shouldNice : true\n  });\n}\n\nexport default function buildAxisLinear(isPrimary, userOptions, series, allDatums, gridDimensions, width, height) {\n  var options = defaultAxisOptions(userOptions);\n\n  if (!options.position) {\n    throw new Error(\"Chart axes must have a valid 'position' property\");\n  }\n\n  var isVertical = ['left', 'right'].indexOf(options.position) > -1; // Now we need to figure out the range\n\n  var range = isVertical ? [gridDimensions.height, 0] : [0, gridDimensions.width];\n  var outerRange = isVertical ? [height, 0] : [0, width]; // Give the scale a home\n\n  return options.scaleType === 'time' || options.scaleType === 'localTime' ? buildTimeAxis(isPrimary, options, series, allDatums, isVertical, range, outerRange) : options.scaleType === 'linear' || options.scaleType === 'log' ? buildLinearAxis(isPrimary, options, series, allDatums, isVertical, range, outerRange) : options.scaleType === 'band' ? buildBandAxis(isPrimary, options, series, isVertical, range, outerRange) : function () {\n    throw new Error('Invalid scale type');\n  }();\n}\n\nfunction buildTimeAxis(isPrimary, options, series, allDatums, isVertical, range, outerRange) {\n  var isLocal = options.scaleType === 'localTime';\n  var scaleFn = isLocal ? scaleTime : scaleUtc;\n  var isInvalid = false;\n  series = isPrimary ? series : series.filter(function (s) {\n    return s.secondaryAxisId === options.id;\n  });\n  allDatums = isPrimary ? allDatums : allDatums.filter(function (d) {\n    return d.secondaryAxisId === options.id;\n  }); // Now set the range\n\n  var scale = scaleFn(range);\n\n  var _extent = extent(allDatums, function (datum) {\n    var value = options.getValue(datum.originalDatum);\n    datum[isPrimary ? 'primaryValue' : 'secondaryValue'] = value;\n    return value;\n  }),\n      minValue = _extent[0],\n      maxValue = _extent[1]; // Here, we find the maximum context (in descending order from year\n  // down to millisecond) needed to understand the\n  // dates in this dataset. If the min/max dates span multiples of\n  // any of the time units OR if the max date resides in a different\n  // unit boundary than today's, we use that unit as context.\n\n\n  var autoFormatStr;\n  var units = isLocal ? {\n    year: timeYear,\n    month: timeMonth,\n    day: timeDay,\n    hour: timeHour,\n    minute: timeMinute,\n    second: timeSecond\n  } : {\n    year: utcYear,\n    month: utcMonth,\n    day: utcDay,\n    hour: utcHour,\n    minute: utcMinute,\n    second: utcSecond\n  };\n\n  if (minValue && maxValue) {\n    if (units.year.count(minValue, maxValue) > 0 || units.year.floor(maxValue) < units.year()) {\n      autoFormatStr = '%b %-d, %Y %-I:%M:%S.%L %p';\n    } else if (units.month.count(minValue, maxValue) > 0 || units.month.floor(maxValue) < units.month()) {\n      autoFormatStr = '%b %-d, %-I:%M:%S.%L %p';\n    } else if (units.day.count(minValue, maxValue) > 0 || units.day.floor(maxValue) < units.day()) {\n      autoFormatStr = '%b %-d, %-I:%M:%S.%L %p';\n    } else if (units.hour.count(minValue, maxValue) > 0 || units.hour.floor(maxValue) < units.hour()) {\n      autoFormatStr = '%-I:%M:%S.%L %p';\n    } else if (units.minute.count(minValue, maxValue) > 0 || units.minute.floor(maxValue) < units.minute()) {\n      autoFormatStr = '%-I:%M:%S.%L';\n    } else if (units.second.count(minValue, maxValue) > 0 || units.second.floor(maxValue) < units.second()) {\n      autoFormatStr = '%L';\n    }\n  }\n\n  var resolvedTimeFormat = isLocal ? timeFormat : utcFormat;\n\n  var trimFormat = function trimFormat(str) {\n    return str.trim().replace(/(,$|^,)/, '');\n  };\n\n  var contextFormat = function contextFormat(format, date) {\n    if (units.second(date) < date) {\n      // milliseconds - Do not remove any context\n      return resolvedTimeFormat(format)(date);\n    }\n\n    if (units.minute(date) < date) {\n      // seconds - remove potential milliseconds\n      return resolvedTimeFormat(trimFormat(format.replace(/\\.%L.*?(\\s|$)/, '')))(date);\n    }\n\n    if (units.hour(date) < date) {\n      // minutes - remove potential seconds and milliseconds\n      return resolvedTimeFormat(trimFormat(format.replace(/:%S.*?(\\s|$)/, '')))(date);\n    }\n\n    if (units.day(date) < date) {\n      // hours - remove potential minutes and seconds and milliseconds\n      return resolvedTimeFormat(trimFormat(format.replace(/:%M.*?(\\s|$)/, '')))(date);\n    }\n\n    if (units.month(date) < date) {\n      // days  - remove potential hours, minutes, seconds and milliseconds\n      return resolvedTimeFormat(trimFormat(format.replace(/%-I.*/, '')))(date);\n    }\n\n    if (units.year(date) < date) {\n      // months - remove potential days, hours, minutes, seconds and milliseconds\n      return resolvedTimeFormat(trimFormat(format.replace(/%-d.*/, '')))(date);\n    } // years\n\n\n    return resolvedTimeFormat('%Y')(date);\n  };\n\n  var shouldNice = options.shouldNice; // see https://stackoverflow.com/a/2831422\n\n  if (Object.prototype.toString.call(options.min) === '[object Date]') {\n    minValue = min([options.min, minValue]);\n    shouldNice = false;\n  }\n\n  if (Object.prototype.toString.call(options.max) === '[object Date]') {\n    maxValue = max([options.max, maxValue]);\n    shouldNice = false;\n  }\n\n  if (Object.prototype.toString.call(options.hardMin) === '[object Date]') {\n    minValue = options.hardMin;\n    shouldNice = false;\n  }\n\n  if (Object.prototype.toString.call(options.hardMax) === '[object Date]') {\n    maxValue = options.hardMax;\n    shouldNice = false;\n  }\n\n  if (minValue === undefined || maxValue === undefined) {\n    console.info('Invalid scale min/max', {\n      options: options,\n      series: series,\n      range: range,\n      values: allDatums.map(function (d) {\n        return isPrimary ? d.primaryValue : d.secondaryValue;\n      })\n    });\n    isInvalid = true;\n  } // Set the domain\n\n\n  scale.domain([minValue, maxValue]);\n\n  if (options.invert) {\n    scale.domain(Array.from(scale.domain()).reverse());\n  }\n\n  if (shouldNice) {\n    scale.nice();\n  }\n\n  var outerScale = scale.copy().range(outerRange); // Supplementary band scale\n\n  var primaryBandScale = isPrimary ? buildPrimaryBandScale(options, scale, series, range) : undefined;\n  var seriesBandScale = primaryBandScale ? buildSeriesBandScale(options, primaryBandScale, series) : undefined;\n  var primaryBandWidth = primaryBandScale == null ? void 0 : primaryBandScale.bandwidth();\n\n  if (options.padBandRange && primaryBandWidth) {\n    var bandStart = scale.invert(0);\n    var bandEnd = scale.invert(primaryBandWidth);\n    var diff = bandEnd.valueOf() - bandStart.valueOf();\n    scale.domain([new Date(scale.domain()[0].valueOf() - diff / 2), new Date(scale.domain()[1].valueOf() + diff / 2)]);\n  }\n\n  var formatters = {};\n  var defaultFormat = scale.tickFormat();\n\n  var scaleFormat = function scaleFormat(value) {\n    var _options$formatters$s, _options$formatters;\n\n    return (_options$formatters$s = (_options$formatters = options.formatters) == null ? void 0 : _options$formatters.scale == null ? void 0 : _options$formatters.scale(value, _extends({}, formatters, {\n      scale: undefined\n    }))) != null ? _options$formatters$s : contextFormat(autoFormatStr, value);\n  };\n\n  var tooltipFormat = function tooltipFormat(value) {\n    var _options$formatters$t, _options$formatters2;\n\n    return (_options$formatters$t = (_options$formatters2 = options.formatters) == null ? void 0 : _options$formatters2.tooltip == null ? void 0 : _options$formatters2.tooltip(value, _extends({}, formatters, {\n      tooltip: undefined\n    }))) != null ? _options$formatters$t : scaleFormat(value);\n  };\n\n  var cursorFormat = function cursorFormat(value) {\n    var _options$formatters$c, _options$formatters3;\n\n    return (_options$formatters$c = (_options$formatters3 = options.formatters) == null ? void 0 : _options$formatters3.cursor == null ? void 0 : _options$formatters3.cursor(value, _extends({}, formatters, {\n      cursor: undefined\n    }))) != null ? _options$formatters$c : scaleFormat(value);\n  };\n\n  Object.assign(formatters, {\n    \"default\": defaultFormat,\n    scale: scaleFormat,\n    tooltip: tooltipFormat,\n    cursor: cursorFormat\n  });\n  return _extends({}, options, {\n    isInvalid: isInvalid,\n    axisFamily: 'time',\n    isVertical: isVertical,\n    scale: scale,\n    range: range,\n    outerScale: outerScale,\n    primaryBandScale: primaryBandScale,\n    seriesBandScale: seriesBandScale,\n    formatters: formatters\n  });\n}\n\nfunction buildLinearAxis(isPrimary, options, series, allDatums, isVertical, range, outerRange) {\n  var scale = options.scaleType === 'log' ? scaleLog() : scaleLinear();\n  var isInvalid = false;\n  series = isPrimary ? series : series.filter(function (s) {\n    return s.secondaryAxisId === options.id;\n  });\n  allDatums = isPrimary ? allDatums : allDatums.filter(function (d) {\n    return d.secondaryAxisId === options.id;\n  });\n\n  if (options.stacked) {\n    stackSeries(series, options);\n  }\n\n  var _ref = options.stacked ? extent(series.map(function (s) {\n    return s.datums.map(function (datum) {\n      var _datum$stackData;\n\n      var value = options.getValue(datum.originalDatum);\n      datum[isPrimary ? 'primaryValue' : 'secondaryValue'] = value;\n      return (_datum$stackData = datum.stackData) != null ? _datum$stackData : [];\n    });\n  }).flat(2)) : extent(allDatums, function (datum) {\n    var value = options.getValue(datum.originalDatum);\n    datum[isPrimary ? 'primaryValue' : 'secondaryValue'] = value;\n    return value;\n  }),\n      minValue = _ref[0],\n      maxValue = _ref[1];\n\n  var shouldNice = options.shouldNice;\n\n  if (typeof options.min === 'number') {\n    minValue = min([options.min, minValue]);\n    shouldNice = false;\n  }\n\n  if (typeof options.max === 'number') {\n    maxValue = max([options.max, maxValue]);\n    shouldNice = false;\n  }\n\n  if (typeof options.minDomainLength === 'number' && !(minValue === undefined || maxValue === undefined)) {\n    var mid = median([minValue, maxValue]);\n    var top = mid + options.minDomainLength / 2;\n    var bottom = mid - options.minDomainLength / 2;\n    maxValue = Math.max(top, maxValue);\n    minValue = Math.min(bottom, minValue);\n  }\n\n  if (typeof options.hardMin === 'number') {\n    minValue = options.hardMin;\n    shouldNice = false;\n  }\n\n  if (typeof options.hardMax === 'number') {\n    maxValue = options.hardMax;\n    shouldNice = false;\n  }\n\n  if (minValue === undefined || maxValue === undefined) {\n    var _minValue, _maxValue;\n\n    isInvalid = true;\n    console.info('Invalid scale min/max', {\n      options: options,\n      series: series,\n      range: range,\n      values: allDatums.map(function (d) {\n        return isPrimary ? d.primaryValue : d.secondaryValue;\n      })\n    });\n    minValue = (_minValue = minValue) != null ? _minValue : 0;\n    maxValue = (_maxValue = maxValue) != null ? _maxValue : 0; // throw new Error('Invalid scale min/max'\n  } // Set the domain\n\n\n  scale.domain([minValue, maxValue]);\n\n  if (options.invert) {\n    scale.domain(Array.from(scale.domain()).reverse());\n  }\n\n  scale.range(range);\n\n  if (shouldNice) {\n    scale.nice();\n  }\n\n  var outerScale = scale.copy().range(outerRange);\n  var primaryBandScale = isPrimary ? buildPrimaryBandScale(options, scale, series, range) : undefined;\n  var seriesBandScale = primaryBandScale ? buildSeriesBandScale(options, primaryBandScale, series) : undefined;\n  var defaultFormat = scale.tickFormat();\n  var formatters = {};\n\n  var scaleFormat = function scaleFormat(value) {\n    var _options$formatters$s2, _options$formatters4;\n\n    return (_options$formatters$s2 = (_options$formatters4 = options.formatters) == null ? void 0 : _options$formatters4.scale == null ? void 0 : _options$formatters4.scale(value, _extends({}, formatters, {\n      scale: undefined\n    }))) != null ? _options$formatters$s2 : defaultFormat(value);\n  };\n\n  var tooltipFormat = function tooltipFormat(value) {\n    var _options$formatters$t2, _options$formatters5;\n\n    return (_options$formatters$t2 = (_options$formatters5 = options.formatters) == null ? void 0 : _options$formatters5.tooltip == null ? void 0 : _options$formatters5.tooltip(value, _extends({}, formatters, {\n      tooltip: undefined\n    }))) != null ? _options$formatters$t2 : scaleFormat(value);\n  };\n\n  var cursorFormat = function cursorFormat(value) {\n    var _options$formatters$c2, _options$formatters6;\n\n    return (_options$formatters$c2 = (_options$formatters6 = options.formatters) == null ? void 0 : _options$formatters6.cursor == null ? void 0 : _options$formatters6.cursor(value, _extends({}, formatters, {\n      cursor: undefined\n    }))) != null ? _options$formatters$c2 : tooltipFormat(value);\n  };\n\n  Object.assign(formatters, {\n    \"default\": defaultFormat,\n    scale: scaleFormat,\n    tooltip: tooltipFormat,\n    cursor: cursorFormat\n  });\n  return _extends({}, options, {\n    isInvalid: isInvalid,\n    axisFamily: 'linear',\n    isVertical: isVertical,\n    scale: scale,\n    range: range,\n    outerScale: outerScale,\n    primaryBandScale: primaryBandScale,\n    seriesBandScale: seriesBandScale,\n    formatters: formatters\n  });\n}\n\nfunction buildBandAxis(isPrimary, options, series, isVertical, range, outerRange) {\n  var _options$outerBandPad2, _options$innerBandPad2;\n\n  series = series.filter(function (d) {\n    return d.secondaryAxisId === options.id;\n  });\n  var isInvalid = false;\n  var domain = Array.from(new Set(series.map(function (d) {\n    return d.datums;\n  }).flat().map(function (datum) {\n    var value = options.getValue(datum.originalDatum);\n    datum[isPrimary ? 'primaryValue' : 'secondaryValue'] = value;\n    return value;\n  })));\n  var scale = scaleBand(domain, range).round(false).paddingOuter((_options$outerBandPad2 = options.outerBandPadding) != null ? _options$outerBandPad2 : 0).paddingInner((_options$innerBandPad2 = options.innerBandPadding) != null ? _options$innerBandPad2 : 0); // Invert if necessary\n\n  if (options.invert) {\n    scale.domain(Array.from(scale.domain()).reverse());\n  }\n\n  var outerScale = scale.copy().range(outerRange);\n  var primaryBandScale = scale;\n  var seriesBandScale = buildSeriesBandScale(options, primaryBandScale, series);\n\n  var defaultFormat = function defaultFormat(d) {\n    return d;\n  };\n\n  var formatters = {};\n\n  var scaleFormat = function scaleFormat(value) {\n    var _options$formatters$s3, _options$formatters7;\n\n    return (_options$formatters$s3 = (_options$formatters7 = options.formatters) == null ? void 0 : _options$formatters7.scale == null ? void 0 : _options$formatters7.scale(value, _extends({}, formatters, {\n      scale: undefined\n    }))) != null ? _options$formatters$s3 : defaultFormat(value);\n  };\n\n  var tooltipFormat = function tooltipFormat(value) {\n    var _options$formatters$t3, _options$formatters8;\n\n    return (_options$formatters$t3 = (_options$formatters8 = options.formatters) == null ? void 0 : _options$formatters8.tooltip == null ? void 0 : _options$formatters8.tooltip(value, _extends({}, formatters, {\n      tooltip: undefined\n    }))) != null ? _options$formatters$t3 : scaleFormat(value);\n  };\n\n  var cursorFormat = function cursorFormat(value) {\n    var _options$formatters$c3, _options$formatters9;\n\n    return (_options$formatters$c3 = (_options$formatters9 = options.formatters) == null ? void 0 : _options$formatters9.cursor == null ? void 0 : _options$formatters9.cursor(value, _extends({}, formatters, {\n      cursor: undefined\n    }))) != null ? _options$formatters$c3 : tooltipFormat(value);\n  };\n\n  Object.assign(formatters, {\n    \"default\": defaultFormat,\n    scale: scaleFormat,\n    tooltip: tooltipFormat,\n    cursor: cursorFormat\n  });\n  return _extends({}, options, {\n    isInvalid: isInvalid,\n    axisFamily: 'band',\n    isVertical: isVertical,\n    scale: scale,\n    range: range,\n    outerScale: outerScale,\n    formatters: formatters,\n    primaryBandScale: primaryBandScale,\n    seriesBandScale: seriesBandScale\n  });\n} //\n\n\nfunction stackSeries(series, axisOptions) {\n  var _axisOptions$stackOff;\n\n  var seriesIndices = Object.keys(series);\n  var stacker = stack().keys(seriesIndices).value(function (_, seriesIndex, index) {\n    var _series$Number, _series$Number$datums;\n\n    var originalDatum = (_series$Number = series[Number(seriesIndex)]) == null ? void 0 : (_series$Number$datums = _series$Number.datums[index]) == null ? void 0 : _series$Number$datums.originalDatum;\n    var val = typeof originalDatum !== 'undefined' ? axisOptions.getValue(originalDatum) : 0;\n\n    if (typeof val === 'undefined' || val === null) {\n      return 0;\n    }\n\n    return val;\n  }).offset((_axisOptions$stackOff = axisOptions.stackOffset) != null ? _axisOptions$stackOff : stackOffsetNone);\n  var stacked = stacker(Array.from({\n    length: series.sort(function (a, b) {\n      return b.datums.length - a.datums.length;\n    })[0].datums.length\n  }));\n\n  for (var sIndex = 0; sIndex < stacked.length; sIndex++) {\n    var s = stacked[sIndex];\n\n    for (var i = 0; i < s.length; i++) {\n      var datum = s[i];\n\n      if (series[sIndex].datums[i]) {\n        // @ts-ignore\n        datum.data = series[sIndex].datums[i];\n        series[sIndex].datums[i].stackData = datum;\n      }\n    }\n  }\n}\n\nfunction buildPrimaryBandScale(options, scale, series, range) {\n  var _options$outerBandPad3, _options$innerBandPad3;\n\n  // Find the two closest points along axis\n  // Do not allow the band to be smaller than single pixel of the output range\n  var impliedBandWidth = Math.max.apply(Math, range);\n  var bandRange = Math.max.apply(Math, range);\n\n  (function () {\n    for (var i = 0; i < series.length; i++) {\n      var serie = series[i];\n\n      for (var j = 0; j < serie.datums.length; j++) {\n        var _d1$primaryValue;\n\n        var d1 = serie.datums[j];\n        var one = scale((_d1$primaryValue = d1.primaryValue) != null ? _d1$primaryValue : NaN);\n\n        for (var k = 0; k < serie.datums.length; k++) {\n          var _d2$primaryValue;\n\n          var d2 = serie.datums[k];\n          var two = scale((_d2$primaryValue = d2.primaryValue) != null ? _d2$primaryValue : NaN);\n\n          if (one === two) {\n            continue;\n          }\n\n          var diff = Math.abs(Math.max(one, two) - Math.min(one, two));\n\n          if (diff < impliedBandWidth) {\n            impliedBandWidth = Math.max(diff, bandRange);\n\n            if (impliedBandWidth === bandRange) {\n              return;\n            }\n          }\n        }\n      }\n    }\n  })();\n\n  var bandDomain = d3Range(bandRange / impliedBandWidth);\n  var primaryBandScale = scaleBand(bandDomain, range).round(false).paddingOuter((_options$outerBandPad3 = options.outerBandPadding) != null ? _options$outerBandPad3 : 0).paddingInner((_options$innerBandPad3 = options.innerBandPadding) != null ? _options$innerBandPad3 : 0);\n  return primaryBandScale;\n}\n\nfunction buildSeriesBandScale(options, primaryBandScale, series) {\n  var _options$outerSeriesB2, _options$innerSeriesB2;\n\n  var bandDomain = d3Range(series.length);\n  var seriesBandScale = scaleBand(bandDomain, [0, primaryBandScale.bandwidth()]).round(false).paddingOuter((_options$outerSeriesB2 = options.outerSeriesBandPadding) != null ? _options$outerSeriesB2 : options.outerBandPadding ? options.outerBandPadding / 2 : 0).paddingInner((_options$innerSeriesB2 = options.innerSeriesBandPadding) != null ? _options$innerSeriesB2 : options.innerBandPadding ? options.innerBandPadding / 2 : 0);\n\n  var scale = function scale(seriesIndex) {\n    var _series$find;\n\n    return seriesBandScale((_series$find = series.find(function (d) {\n      return d.index === seriesIndex;\n    })) == null ? void 0 : _series$find.indexPerAxis);\n  };\n\n  return Object.assign(scale, seriesBandScale);\n}"],"mappings":"AAAA,OAAOA,QAAQ,MAAM,oCAAoC;AACzD,SAASC,MAAM,EAAEC,GAAG,EAAEC,MAAM,EAAEC,GAAG,EAAEC,KAAK,IAAIC,OAAO,QAAQ,UAAU;AACrE,SAASC,KAAK,EAAEC,eAAe,QAAQ,UAAU;AACjD,SAASC,WAAW,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,UAAU;AAChF,SAASC,UAAU,EAAEC,UAAU,EAAEC,QAAQ,EAAEC,OAAO,EAAEC,SAAS,EAAEC,QAAQ,EAAEC,OAAO,EAAEC,QAAQ,EAAEC,MAAM,EAAEC,OAAO,EAAEC,SAAS,EAAEC,SAAS,QAAQ,SAAS;AAClJ,SAASC,UAAU,EAAEC,SAAS,QAAQ,gBAAgB;AAEtD,SAASC,kBAAkBA,CAACC,OAAO,EAAE;EACnC,IAAIC,oBAAoB,EAAEC,qBAAqB,EAAEC,qBAAqB,EAAEC,qBAAqB,EAAEC,qBAAqB,EAAEC,qBAAqB,EAAEC,qBAAqB,EAAEC,aAAa,EAAEC,gBAAgB,EAAEC,mBAAmB;EAExN,OAAOvC,QAAQ,CAAC,CAAC,CAAC,EAAE6B,OAAO,EAAE;IAC3BW,WAAW,EAAE,CAACV,oBAAoB,GAAGD,OAAO,CAACW,WAAW,KAAK,IAAI,GAAGV,oBAAoB,GAAG,MAAM;IACjGW,yBAAyB,EAAE,CAACV,qBAAqB,GAAGF,OAAO,CAACY,yBAAyB,KAAK,IAAI,GAAGV,qBAAqB,GAAG,EAAE;IAC3HW,oBAAoB,EAAE,CAACV,qBAAqB,GAAGH,OAAO,CAACa,oBAAoB,KAAK,IAAI,GAAGV,qBAAqB,GAAG,EAAE;IACjHW,gBAAgB,EAAE,CAACV,qBAAqB,GAAGJ,OAAO,CAACc,gBAAgB,KAAK,IAAI,GAAGV,qBAAqB,GAAG,GAAG;IAC1GW,gBAAgB,EAAE,CAACV,qBAAqB,GAAGL,OAAO,CAACe,gBAAgB,KAAK,IAAI,GAAGV,qBAAqB,GAAG,GAAG;IAC1GW,sBAAsB,EAAE,CAACV,qBAAqB,GAAGN,OAAO,CAACgB,sBAAsB,KAAK,IAAI,GAAGV,qBAAqB,GAAG,GAAG;IACtHW,sBAAsB,EAAE,CAACV,qBAAqB,GAAGP,OAAO,CAACiB,sBAAsB,KAAK,IAAI,GAAGV,qBAAqB,GAAG,CAAC;IACpHW,IAAI,EAAE,CAACV,aAAa,GAAGR,OAAO,CAACkB,IAAI,KAAK,IAAI,GAAGV,aAAa,GAAG,IAAI;IACnEW,OAAO,EAAE,CAACV,gBAAgB,GAAGT,OAAO,CAACmB,OAAO,KAAK,IAAI,GAAGV,gBAAgB,GAAG,KAAK;IAChFW,UAAU,EAAE,CAACV,mBAAmB,GAAGV,OAAO,CAACoB,UAAU,KAAK,IAAI,GAAGV,mBAAmB,GAAG;EACzF,CAAC,CAAC;AACJ;AAEA,eAAe,SAASW,eAAeA,CAACC,SAAS,EAAEC,WAAW,EAAEC,MAAM,EAAEC,SAAS,EAAEC,cAAc,EAAEC,KAAK,EAAEC,MAAM,EAAE;EAChH,IAAI5B,OAAO,GAAGD,kBAAkB,CAACwB,WAAW,CAAC;EAE7C,IAAI,CAACvB,OAAO,CAAC6B,QAAQ,EAAE;IACrB,MAAM,IAAIC,KAAK,CAAC,kDAAkD,CAAC;EACrE;EAEA,IAAIC,UAAU,GAAG,CAAC,MAAM,EAAE,OAAO,CAAC,CAACC,OAAO,CAAChC,OAAO,CAAC6B,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;;EAEnE,IAAIrD,KAAK,GAAGuD,UAAU,GAAG,CAACL,cAAc,CAACE,MAAM,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,EAAEF,cAAc,CAACC,KAAK,CAAC;EAC/E,IAAIM,UAAU,GAAGF,UAAU,GAAG,CAACH,MAAM,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,EAAED,KAAK,CAAC,CAAC,CAAC;;EAExD,OAAO3B,OAAO,CAACkC,SAAS,KAAK,MAAM,IAAIlC,OAAO,CAACkC,SAAS,KAAK,WAAW,GAAGC,aAAa,CAACb,SAAS,EAAEtB,OAAO,EAAEwB,MAAM,EAAEC,SAAS,EAAEM,UAAU,EAAEvD,KAAK,EAAEyD,UAAU,CAAC,GAAGjC,OAAO,CAACkC,SAAS,KAAK,QAAQ,IAAIlC,OAAO,CAACkC,SAAS,KAAK,KAAK,GAAGE,eAAe,CAACd,SAAS,EAAEtB,OAAO,EAAEwB,MAAM,EAAEC,SAAS,EAAEM,UAAU,EAAEvD,KAAK,EAAEyD,UAAU,CAAC,GAAGjC,OAAO,CAACkC,SAAS,KAAK,MAAM,GAAGG,aAAa,CAACf,SAAS,EAAEtB,OAAO,EAAEwB,MAAM,EAAEO,UAAU,EAAEvD,KAAK,EAAEyD,UAAU,CAAC,GAAG,YAAY;IAC7a,MAAM,IAAIH,KAAK,CAAC,oBAAoB,CAAC;EACvC,CAAC,CAAC,CAAC;AACL;AAEA,SAASK,aAAaA,CAACb,SAAS,EAAEtB,OAAO,EAAEwB,MAAM,EAAEC,SAAS,EAAEM,UAAU,EAAEvD,KAAK,EAAEyD,UAAU,EAAE;EAC3F,IAAIK,OAAO,GAAGtC,OAAO,CAACkC,SAAS,KAAK,WAAW;EAC/C,IAAIK,OAAO,GAAGD,OAAO,GAAGxD,SAAS,GAAGC,QAAQ;EAC5C,IAAIyD,SAAS,GAAG,KAAK;EACrBhB,MAAM,GAAGF,SAAS,GAAGE,MAAM,GAAGA,MAAM,CAACiB,MAAM,CAAC,UAAUC,CAAC,EAAE;IACvD,OAAOA,CAAC,CAACC,eAAe,KAAK3C,OAAO,CAAC4C,EAAE;EACzC,CAAC,CAAC;EACFnB,SAAS,GAAGH,SAAS,GAAGG,SAAS,GAAGA,SAAS,CAACgB,MAAM,CAAC,UAAUI,CAAC,EAAE;IAChE,OAAOA,CAAC,CAACF,eAAe,KAAK3C,OAAO,CAAC4C,EAAE;EACzC,CAAC,CAAC,CAAC,CAAC;;EAEJ,IAAIE,KAAK,GAAGP,OAAO,CAAC/D,KAAK,CAAC;EAE1B,IAAIuE,OAAO,GAAG3E,MAAM,CAACqD,SAAS,EAAE,UAAUuB,KAAK,EAAE;MAC/C,IAAIC,KAAK,GAAGjD,OAAO,CAACkD,QAAQ,CAACF,KAAK,CAACG,aAAa,CAAC;MACjDH,KAAK,CAAC1B,SAAS,GAAG,cAAc,GAAG,gBAAgB,CAAC,GAAG2B,KAAK;MAC5D,OAAOA,KAAK;IACd,CAAC,CAAC;IACEG,QAAQ,GAAGL,OAAO,CAAC,CAAC,CAAC;IACrBM,QAAQ,GAAGN,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;EAC3B;EACA;EACA;EACA;;EAGA,IAAIO,aAAa;EACjB,IAAIC,KAAK,GAAGjB,OAAO,GAAG;IACpBkB,IAAI,EAAElE,QAAQ;IACdmE,KAAK,EAAEpE,SAAS;IAChBqE,GAAG,EAAEtE,OAAO;IACZuE,IAAI,EAAExE,QAAQ;IACdyE,MAAM,EAAE1E,UAAU;IAClB2E,MAAM,EAAE5E;EACV,CAAC,GAAG;IACFuE,IAAI,EAAEjE,OAAO;IACbkE,KAAK,EAAEjE,QAAQ;IACfkE,GAAG,EAAEjE,MAAM;IACXkE,IAAI,EAAEjE,OAAO;IACbkE,MAAM,EAAEjE,SAAS;IACjBkE,MAAM,EAAEjE;EACV,CAAC;EAED,IAAIwD,QAAQ,IAAIC,QAAQ,EAAE;IACxB,IAAIE,KAAK,CAACC,IAAI,CAACM,KAAK,CAACV,QAAQ,EAAEC,QAAQ,CAAC,GAAG,CAAC,IAAIE,KAAK,CAACC,IAAI,CAACO,KAAK,CAACV,QAAQ,CAAC,GAAGE,KAAK,CAACC,IAAI,CAAC,CAAC,EAAE;MACzFF,aAAa,GAAG,4BAA4B;IAC9C,CAAC,MAAM,IAAIC,KAAK,CAACE,KAAK,CAACK,KAAK,CAACV,QAAQ,EAAEC,QAAQ,CAAC,GAAG,CAAC,IAAIE,KAAK,CAACE,KAAK,CAACM,KAAK,CAACV,QAAQ,CAAC,GAAGE,KAAK,CAACE,KAAK,CAAC,CAAC,EAAE;MACnGH,aAAa,GAAG,yBAAyB;IAC3C,CAAC,MAAM,IAAIC,KAAK,CAACG,GAAG,CAACI,KAAK,CAACV,QAAQ,EAAEC,QAAQ,CAAC,GAAG,CAAC,IAAIE,KAAK,CAACG,GAAG,CAACK,KAAK,CAACV,QAAQ,CAAC,GAAGE,KAAK,CAACG,GAAG,CAAC,CAAC,EAAE;MAC7FJ,aAAa,GAAG,yBAAyB;IAC3C,CAAC,MAAM,IAAIC,KAAK,CAACI,IAAI,CAACG,KAAK,CAACV,QAAQ,EAAEC,QAAQ,CAAC,GAAG,CAAC,IAAIE,KAAK,CAACI,IAAI,CAACI,KAAK,CAACV,QAAQ,CAAC,GAAGE,KAAK,CAACI,IAAI,CAAC,CAAC,EAAE;MAChGL,aAAa,GAAG,iBAAiB;IACnC,CAAC,MAAM,IAAIC,KAAK,CAACK,MAAM,CAACE,KAAK,CAACV,QAAQ,EAAEC,QAAQ,CAAC,GAAG,CAAC,IAAIE,KAAK,CAACK,MAAM,CAACG,KAAK,CAACV,QAAQ,CAAC,GAAGE,KAAK,CAACK,MAAM,CAAC,CAAC,EAAE;MACtGN,aAAa,GAAG,cAAc;IAChC,CAAC,MAAM,IAAIC,KAAK,CAACM,MAAM,CAACC,KAAK,CAACV,QAAQ,EAAEC,QAAQ,CAAC,GAAG,CAAC,IAAIE,KAAK,CAACM,MAAM,CAACE,KAAK,CAACV,QAAQ,CAAC,GAAGE,KAAK,CAACM,MAAM,CAAC,CAAC,EAAE;MACtGP,aAAa,GAAG,IAAI;IACtB;EACF;EAEA,IAAIU,kBAAkB,GAAG1B,OAAO,GAAGzC,UAAU,GAAGC,SAAS;EAEzD,IAAImE,UAAU,GAAG,SAASA,UAAUA,CAACC,GAAG,EAAE;IACxC,OAAOA,GAAG,CAACC,IAAI,CAAC,CAAC,CAACC,OAAO,CAAC,SAAS,EAAE,EAAE,CAAC;EAC1C,CAAC;EAED,IAAIC,aAAa,GAAG,SAASA,aAAaA,CAACC,MAAM,EAAEC,IAAI,EAAE;IACvD,IAAIhB,KAAK,CAACM,MAAM,CAACU,IAAI,CAAC,GAAGA,IAAI,EAAE;MAC7B;MACA,OAAOP,kBAAkB,CAACM,MAAM,CAAC,CAACC,IAAI,CAAC;IACzC;IAEA,IAAIhB,KAAK,CAACK,MAAM,CAACW,IAAI,CAAC,GAAGA,IAAI,EAAE;MAC7B;MACA,OAAOP,kBAAkB,CAACC,UAAU,CAACK,MAAM,CAACF,OAAO,CAAC,eAAe,EAAE,EAAE,CAAC,CAAC,CAAC,CAACG,IAAI,CAAC;IAClF;IAEA,IAAIhB,KAAK,CAACI,IAAI,CAACY,IAAI,CAAC,GAAGA,IAAI,EAAE;MAC3B;MACA,OAAOP,kBAAkB,CAACC,UAAU,CAACK,MAAM,CAACF,OAAO,CAAC,cAAc,EAAE,EAAE,CAAC,CAAC,CAAC,CAACG,IAAI,CAAC;IACjF;IAEA,IAAIhB,KAAK,CAACG,GAAG,CAACa,IAAI,CAAC,GAAGA,IAAI,EAAE;MAC1B;MACA,OAAOP,kBAAkB,CAACC,UAAU,CAACK,MAAM,CAACF,OAAO,CAAC,cAAc,EAAE,EAAE,CAAC,CAAC,CAAC,CAACG,IAAI,CAAC;IACjF;IAEA,IAAIhB,KAAK,CAACE,KAAK,CAACc,IAAI,CAAC,GAAGA,IAAI,EAAE;MAC5B;MACA,OAAOP,kBAAkB,CAACC,UAAU,CAACK,MAAM,CAACF,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC,CAAC,CAACG,IAAI,CAAC;IAC1E;IAEA,IAAIhB,KAAK,CAACC,IAAI,CAACe,IAAI,CAAC,GAAGA,IAAI,EAAE;MAC3B;MACA,OAAOP,kBAAkB,CAACC,UAAU,CAACK,MAAM,CAACF,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC,CAAC,CAACG,IAAI,CAAC;IAC1E,CAAC,CAAC;;IAGF,OAAOP,kBAAkB,CAAC,IAAI,CAAC,CAACO,IAAI,CAAC;EACvC,CAAC;EAED,IAAInD,UAAU,GAAGpB,OAAO,CAACoB,UAAU,CAAC,CAAC;;EAErC,IAAIoD,MAAM,CAACC,SAAS,CAACC,QAAQ,CAACC,IAAI,CAAC3E,OAAO,CAACzB,GAAG,CAAC,KAAK,eAAe,EAAE;IACnE6E,QAAQ,GAAG7E,GAAG,CAAC,CAACyB,OAAO,CAACzB,GAAG,EAAE6E,QAAQ,CAAC,CAAC;IACvChC,UAAU,GAAG,KAAK;EACpB;EAEA,IAAIoD,MAAM,CAACC,SAAS,CAACC,QAAQ,CAACC,IAAI,CAAC3E,OAAO,CAAC3B,GAAG,CAAC,KAAK,eAAe,EAAE;IACnEgF,QAAQ,GAAGhF,GAAG,CAAC,CAAC2B,OAAO,CAAC3B,GAAG,EAAEgF,QAAQ,CAAC,CAAC;IACvCjC,UAAU,GAAG,KAAK;EACpB;EAEA,IAAIoD,MAAM,CAACC,SAAS,CAACC,QAAQ,CAACC,IAAI,CAAC3E,OAAO,CAAC4E,OAAO,CAAC,KAAK,eAAe,EAAE;IACvExB,QAAQ,GAAGpD,OAAO,CAAC4E,OAAO;IAC1BxD,UAAU,GAAG,KAAK;EACpB;EAEA,IAAIoD,MAAM,CAACC,SAAS,CAACC,QAAQ,CAACC,IAAI,CAAC3E,OAAO,CAAC6E,OAAO,CAAC,KAAK,eAAe,EAAE;IACvExB,QAAQ,GAAGrD,OAAO,CAAC6E,OAAO;IAC1BzD,UAAU,GAAG,KAAK;EACpB;EAEA,IAAIgC,QAAQ,KAAK0B,SAAS,IAAIzB,QAAQ,KAAKyB,SAAS,EAAE;IACpDC,OAAO,CAACC,IAAI,CAAC,uBAAuB,EAAE;MACpChF,OAAO,EAAEA,OAAO;MAChBwB,MAAM,EAAEA,MAAM;MACdhD,KAAK,EAAEA,KAAK;MACZyG,MAAM,EAAExD,SAAS,CAACyD,GAAG,CAAC,UAAUrC,CAAC,EAAE;QACjC,OAAOvB,SAAS,GAAGuB,CAAC,CAACsC,YAAY,GAAGtC,CAAC,CAACuC,cAAc;MACtD,CAAC;IACH,CAAC,CAAC;IACF5C,SAAS,GAAG,IAAI;EAClB,CAAC,CAAC;;EAGFM,KAAK,CAACuC,MAAM,CAAC,CAACjC,QAAQ,EAAEC,QAAQ,CAAC,CAAC;EAElC,IAAIrD,OAAO,CAACsF,MAAM,EAAE;IAClBxC,KAAK,CAACuC,MAAM,CAACE,KAAK,CAACC,IAAI,CAAC1C,KAAK,CAACuC,MAAM,CAAC,CAAC,CAAC,CAACI,OAAO,CAAC,CAAC,CAAC;EACpD;EAEA,IAAIrE,UAAU,EAAE;IACd0B,KAAK,CAAC4C,IAAI,CAAC,CAAC;EACd;EAEA,IAAIC,UAAU,GAAG7C,KAAK,CAAC8C,IAAI,CAAC,CAAC,CAACpH,KAAK,CAACyD,UAAU,CAAC,CAAC,CAAC;;EAEjD,IAAI4D,gBAAgB,GAAGvE,SAAS,GAAGwE,qBAAqB,CAAC9F,OAAO,EAAE8C,KAAK,EAAEtB,MAAM,EAAEhD,KAAK,CAAC,GAAGsG,SAAS;EACnG,IAAIiB,eAAe,GAAGF,gBAAgB,GAAGG,oBAAoB,CAAChG,OAAO,EAAE6F,gBAAgB,EAAErE,MAAM,CAAC,GAAGsD,SAAS;EAC5G,IAAImB,gBAAgB,GAAGJ,gBAAgB,IAAI,IAAI,GAAG,KAAK,CAAC,GAAGA,gBAAgB,CAACK,SAAS,CAAC,CAAC;EAEvF,IAAIlG,OAAO,CAACmG,YAAY,IAAIF,gBAAgB,EAAE;IAC5C,IAAIG,SAAS,GAAGtD,KAAK,CAACwC,MAAM,CAAC,CAAC,CAAC;IAC/B,IAAIe,OAAO,GAAGvD,KAAK,CAACwC,MAAM,CAACW,gBAAgB,CAAC;IAC5C,IAAIK,IAAI,GAAGD,OAAO,CAACE,OAAO,CAAC,CAAC,GAAGH,SAAS,CAACG,OAAO,CAAC,CAAC;IAClDzD,KAAK,CAACuC,MAAM,CAAC,CAAC,IAAImB,IAAI,CAAC1D,KAAK,CAACuC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAACkB,OAAO,CAAC,CAAC,GAAGD,IAAI,GAAG,CAAC,CAAC,EAAE,IAAIE,IAAI,CAAC1D,KAAK,CAACuC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAACkB,OAAO,CAAC,CAAC,GAAGD,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC;EACpH;EAEA,IAAIG,UAAU,GAAG,CAAC,CAAC;EACnB,IAAIC,aAAa,GAAG5D,KAAK,CAAC6D,UAAU,CAAC,CAAC;EAEtC,IAAIC,WAAW,GAAG,SAASA,WAAWA,CAAC3D,KAAK,EAAE;IAC5C,IAAI4D,qBAAqB,EAAEC,mBAAmB;IAE9C,OAAO,CAACD,qBAAqB,GAAG,CAACC,mBAAmB,GAAG9G,OAAO,CAACyG,UAAU,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGK,mBAAmB,CAAChE,KAAK,IAAI,IAAI,GAAG,KAAK,CAAC,GAAGgE,mBAAmB,CAAChE,KAAK,CAACG,KAAK,EAAE9E,QAAQ,CAAC,CAAC,CAAC,EAAEsI,UAAU,EAAE;MACnM3D,KAAK,EAAEgC;IACT,CAAC,CAAC,CAAC,KAAK,IAAI,GAAG+B,qBAAqB,GAAGxC,aAAa,CAACf,aAAa,EAAEL,KAAK,CAAC;EAC5E,CAAC;EAED,IAAI8D,aAAa,GAAG,SAASA,aAAaA,CAAC9D,KAAK,EAAE;IAChD,IAAI+D,qBAAqB,EAAEC,oBAAoB;IAE/C,OAAO,CAACD,qBAAqB,GAAG,CAACC,oBAAoB,GAAGjH,OAAO,CAACyG,UAAU,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGQ,oBAAoB,CAACC,OAAO,IAAI,IAAI,GAAG,KAAK,CAAC,GAAGD,oBAAoB,CAACC,OAAO,CAACjE,KAAK,EAAE9E,QAAQ,CAAC,CAAC,CAAC,EAAEsI,UAAU,EAAE;MAC1MS,OAAO,EAAEpC;IACX,CAAC,CAAC,CAAC,KAAK,IAAI,GAAGkC,qBAAqB,GAAGJ,WAAW,CAAC3D,KAAK,CAAC;EAC3D,CAAC;EAED,IAAIkE,YAAY,GAAG,SAASA,YAAYA,CAAClE,KAAK,EAAE;IAC9C,IAAImE,qBAAqB,EAAEC,oBAAoB;IAE/C,OAAO,CAACD,qBAAqB,GAAG,CAACC,oBAAoB,GAAGrH,OAAO,CAACyG,UAAU,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGY,oBAAoB,CAACC,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,GAAGD,oBAAoB,CAACC,MAAM,CAACrE,KAAK,EAAE9E,QAAQ,CAAC,CAAC,CAAC,EAAEsI,UAAU,EAAE;MACxMa,MAAM,EAAExC;IACV,CAAC,CAAC,CAAC,KAAK,IAAI,GAAGsC,qBAAqB,GAAGR,WAAW,CAAC3D,KAAK,CAAC;EAC3D,CAAC;EAEDuB,MAAM,CAAC+C,MAAM,CAACd,UAAU,EAAE;IACxB,SAAS,EAAEC,aAAa;IACxB5D,KAAK,EAAE8D,WAAW;IAClBM,OAAO,EAAEH,aAAa;IACtBO,MAAM,EAAEH;EACV,CAAC,CAAC;EACF,OAAOhJ,QAAQ,CAAC,CAAC,CAAC,EAAE6B,OAAO,EAAE;IAC3BwC,SAAS,EAAEA,SAAS;IACpBgF,UAAU,EAAE,MAAM;IAClBzF,UAAU,EAAEA,UAAU;IACtBe,KAAK,EAAEA,KAAK;IACZtE,KAAK,EAAEA,KAAK;IACZmH,UAAU,EAAEA,UAAU;IACtBE,gBAAgB,EAAEA,gBAAgB;IAClCE,eAAe,EAAEA,eAAe;IAChCU,UAAU,EAAEA;EACd,CAAC,CAAC;AACJ;AAEA,SAASrE,eAAeA,CAACd,SAAS,EAAEtB,OAAO,EAAEwB,MAAM,EAAEC,SAAS,EAAEM,UAAU,EAAEvD,KAAK,EAAEyD,UAAU,EAAE;EAC7F,IAAIa,KAAK,GAAG9C,OAAO,CAACkC,SAAS,KAAK,KAAK,GAAGrD,QAAQ,CAAC,CAAC,GAAGD,WAAW,CAAC,CAAC;EACpE,IAAI4D,SAAS,GAAG,KAAK;EACrBhB,MAAM,GAAGF,SAAS,GAAGE,MAAM,GAAGA,MAAM,CAACiB,MAAM,CAAC,UAAUC,CAAC,EAAE;IACvD,OAAOA,CAAC,CAACC,eAAe,KAAK3C,OAAO,CAAC4C,EAAE;EACzC,CAAC,CAAC;EACFnB,SAAS,GAAGH,SAAS,GAAGG,SAAS,GAAGA,SAAS,CAACgB,MAAM,CAAC,UAAUI,CAAC,EAAE;IAChE,OAAOA,CAAC,CAACF,eAAe,KAAK3C,OAAO,CAAC4C,EAAE;EACzC,CAAC,CAAC;EAEF,IAAI5C,OAAO,CAACmB,OAAO,EAAE;IACnBsG,WAAW,CAACjG,MAAM,EAAExB,OAAO,CAAC;EAC9B;EAEA,IAAI0H,IAAI,GAAG1H,OAAO,CAACmB,OAAO,GAAG/C,MAAM,CAACoD,MAAM,CAAC0D,GAAG,CAAC,UAAUxC,CAAC,EAAE;MAC1D,OAAOA,CAAC,CAACiF,MAAM,CAACzC,GAAG,CAAC,UAAUlC,KAAK,EAAE;QACnC,IAAI4E,gBAAgB;QAEpB,IAAI3E,KAAK,GAAGjD,OAAO,CAACkD,QAAQ,CAACF,KAAK,CAACG,aAAa,CAAC;QACjDH,KAAK,CAAC1B,SAAS,GAAG,cAAc,GAAG,gBAAgB,CAAC,GAAG2B,KAAK;QAC5D,OAAO,CAAC2E,gBAAgB,GAAG5E,KAAK,CAAC6E,SAAS,KAAK,IAAI,GAAGD,gBAAgB,GAAG,EAAE;MAC7E,CAAC,CAAC;IACJ,CAAC,CAAC,CAACE,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG1J,MAAM,CAACqD,SAAS,EAAE,UAAUuB,KAAK,EAAE;MAC/C,IAAIC,KAAK,GAAGjD,OAAO,CAACkD,QAAQ,CAACF,KAAK,CAACG,aAAa,CAAC;MACjDH,KAAK,CAAC1B,SAAS,GAAG,cAAc,GAAG,gBAAgB,CAAC,GAAG2B,KAAK;MAC5D,OAAOA,KAAK;IACd,CAAC,CAAC;IACEG,QAAQ,GAAGsE,IAAI,CAAC,CAAC,CAAC;IAClBrE,QAAQ,GAAGqE,IAAI,CAAC,CAAC,CAAC;EAEtB,IAAItG,UAAU,GAAGpB,OAAO,CAACoB,UAAU;EAEnC,IAAI,OAAOpB,OAAO,CAACzB,GAAG,KAAK,QAAQ,EAAE;IACnC6E,QAAQ,GAAG7E,GAAG,CAAC,CAACyB,OAAO,CAACzB,GAAG,EAAE6E,QAAQ,CAAC,CAAC;IACvChC,UAAU,GAAG,KAAK;EACpB;EAEA,IAAI,OAAOpB,OAAO,CAAC3B,GAAG,KAAK,QAAQ,EAAE;IACnCgF,QAAQ,GAAGhF,GAAG,CAAC,CAAC2B,OAAO,CAAC3B,GAAG,EAAEgF,QAAQ,CAAC,CAAC;IACvCjC,UAAU,GAAG,KAAK;EACpB;EAEA,IAAI,OAAOpB,OAAO,CAAC+H,eAAe,KAAK,QAAQ,IAAI,EAAE3E,QAAQ,KAAK0B,SAAS,IAAIzB,QAAQ,KAAKyB,SAAS,CAAC,EAAE;IACtG,IAAIkD,GAAG,GAAG1J,MAAM,CAAC,CAAC8E,QAAQ,EAAEC,QAAQ,CAAC,CAAC;IACtC,IAAI4E,GAAG,GAAGD,GAAG,GAAGhI,OAAO,CAAC+H,eAAe,GAAG,CAAC;IAC3C,IAAIG,MAAM,GAAGF,GAAG,GAAGhI,OAAO,CAAC+H,eAAe,GAAG,CAAC;IAC9C1E,QAAQ,GAAG8E,IAAI,CAAC9J,GAAG,CAAC4J,GAAG,EAAE5E,QAAQ,CAAC;IAClCD,QAAQ,GAAG+E,IAAI,CAAC5J,GAAG,CAAC2J,MAAM,EAAE9E,QAAQ,CAAC;EACvC;EAEA,IAAI,OAAOpD,OAAO,CAAC4E,OAAO,KAAK,QAAQ,EAAE;IACvCxB,QAAQ,GAAGpD,OAAO,CAAC4E,OAAO;IAC1BxD,UAAU,GAAG,KAAK;EACpB;EAEA,IAAI,OAAOpB,OAAO,CAAC6E,OAAO,KAAK,QAAQ,EAAE;IACvCxB,QAAQ,GAAGrD,OAAO,CAAC6E,OAAO;IAC1BzD,UAAU,GAAG,KAAK;EACpB;EAEA,IAAIgC,QAAQ,KAAK0B,SAAS,IAAIzB,QAAQ,KAAKyB,SAAS,EAAE;IACpD,IAAIsD,SAAS,EAAEC,SAAS;IAExB7F,SAAS,GAAG,IAAI;IAChBuC,OAAO,CAACC,IAAI,CAAC,uBAAuB,EAAE;MACpChF,OAAO,EAAEA,OAAO;MAChBwB,MAAM,EAAEA,MAAM;MACdhD,KAAK,EAAEA,KAAK;MACZyG,MAAM,EAAExD,SAAS,CAACyD,GAAG,CAAC,UAAUrC,CAAC,EAAE;QACjC,OAAOvB,SAAS,GAAGuB,CAAC,CAACsC,YAAY,GAAGtC,CAAC,CAACuC,cAAc;MACtD,CAAC;IACH,CAAC,CAAC;IACFhC,QAAQ,GAAG,CAACgF,SAAS,GAAGhF,QAAQ,KAAK,IAAI,GAAGgF,SAAS,GAAG,CAAC;IACzD/E,QAAQ,GAAG,CAACgF,SAAS,GAAGhF,QAAQ,KAAK,IAAI,GAAGgF,SAAS,GAAG,CAAC,CAAC,CAAC;EAC7D,CAAC,CAAC;;EAGFvF,KAAK,CAACuC,MAAM,CAAC,CAACjC,QAAQ,EAAEC,QAAQ,CAAC,CAAC;EAElC,IAAIrD,OAAO,CAACsF,MAAM,EAAE;IAClBxC,KAAK,CAACuC,MAAM,CAACE,KAAK,CAACC,IAAI,CAAC1C,KAAK,CAACuC,MAAM,CAAC,CAAC,CAAC,CAACI,OAAO,CAAC,CAAC,CAAC;EACpD;EAEA3C,KAAK,CAACtE,KAAK,CAACA,KAAK,CAAC;EAElB,IAAI4C,UAAU,EAAE;IACd0B,KAAK,CAAC4C,IAAI,CAAC,CAAC;EACd;EAEA,IAAIC,UAAU,GAAG7C,KAAK,CAAC8C,IAAI,CAAC,CAAC,CAACpH,KAAK,CAACyD,UAAU,CAAC;EAC/C,IAAI4D,gBAAgB,GAAGvE,SAAS,GAAGwE,qBAAqB,CAAC9F,OAAO,EAAE8C,KAAK,EAAEtB,MAAM,EAAEhD,KAAK,CAAC,GAAGsG,SAAS;EACnG,IAAIiB,eAAe,GAAGF,gBAAgB,GAAGG,oBAAoB,CAAChG,OAAO,EAAE6F,gBAAgB,EAAErE,MAAM,CAAC,GAAGsD,SAAS;EAC5G,IAAI4B,aAAa,GAAG5D,KAAK,CAAC6D,UAAU,CAAC,CAAC;EACtC,IAAIF,UAAU,GAAG,CAAC,CAAC;EAEnB,IAAIG,WAAW,GAAG,SAASA,WAAWA,CAAC3D,KAAK,EAAE;IAC5C,IAAIqF,sBAAsB,EAAEC,oBAAoB;IAEhD,OAAO,CAACD,sBAAsB,GAAG,CAACC,oBAAoB,GAAGvI,OAAO,CAACyG,UAAU,KAAK,IAAI,GAAG,KAAK,CAAC,GAAG8B,oBAAoB,CAACzF,KAAK,IAAI,IAAI,GAAG,KAAK,CAAC,GAAGyF,oBAAoB,CAACzF,KAAK,CAACG,KAAK,EAAE9E,QAAQ,CAAC,CAAC,CAAC,EAAEsI,UAAU,EAAE;MACvM3D,KAAK,EAAEgC;IACT,CAAC,CAAC,CAAC,KAAK,IAAI,GAAGwD,sBAAsB,GAAG5B,aAAa,CAACzD,KAAK,CAAC;EAC9D,CAAC;EAED,IAAI8D,aAAa,GAAG,SAASA,aAAaA,CAAC9D,KAAK,EAAE;IAChD,IAAIuF,sBAAsB,EAAEC,oBAAoB;IAEhD,OAAO,CAACD,sBAAsB,GAAG,CAACC,oBAAoB,GAAGzI,OAAO,CAACyG,UAAU,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGgC,oBAAoB,CAACvB,OAAO,IAAI,IAAI,GAAG,KAAK,CAAC,GAAGuB,oBAAoB,CAACvB,OAAO,CAACjE,KAAK,EAAE9E,QAAQ,CAAC,CAAC,CAAC,EAAEsI,UAAU,EAAE;MAC3MS,OAAO,EAAEpC;IACX,CAAC,CAAC,CAAC,KAAK,IAAI,GAAG0D,sBAAsB,GAAG5B,WAAW,CAAC3D,KAAK,CAAC;EAC5D,CAAC;EAED,IAAIkE,YAAY,GAAG,SAASA,YAAYA,CAAClE,KAAK,EAAE;IAC9C,IAAIyF,sBAAsB,EAAEC,oBAAoB;IAEhD,OAAO,CAACD,sBAAsB,GAAG,CAACC,oBAAoB,GAAG3I,OAAO,CAACyG,UAAU,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGkC,oBAAoB,CAACrB,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,GAAGqB,oBAAoB,CAACrB,MAAM,CAACrE,KAAK,EAAE9E,QAAQ,CAAC,CAAC,CAAC,EAAEsI,UAAU,EAAE;MACzMa,MAAM,EAAExC;IACV,CAAC,CAAC,CAAC,KAAK,IAAI,GAAG4D,sBAAsB,GAAG3B,aAAa,CAAC9D,KAAK,CAAC;EAC9D,CAAC;EAEDuB,MAAM,CAAC+C,MAAM,CAACd,UAAU,EAAE;IACxB,SAAS,EAAEC,aAAa;IACxB5D,KAAK,EAAE8D,WAAW;IAClBM,OAAO,EAAEH,aAAa;IACtBO,MAAM,EAAEH;EACV,CAAC,CAAC;EACF,OAAOhJ,QAAQ,CAAC,CAAC,CAAC,EAAE6B,OAAO,EAAE;IAC3BwC,SAAS,EAAEA,SAAS;IACpBgF,UAAU,EAAE,QAAQ;IACpBzF,UAAU,EAAEA,UAAU;IACtBe,KAAK,EAAEA,KAAK;IACZtE,KAAK,EAAEA,KAAK;IACZmH,UAAU,EAAEA,UAAU;IACtBE,gBAAgB,EAAEA,gBAAgB;IAClCE,eAAe,EAAEA,eAAe;IAChCU,UAAU,EAAEA;EACd,CAAC,CAAC;AACJ;AAEA,SAASpE,aAAaA,CAACf,SAAS,EAAEtB,OAAO,EAAEwB,MAAM,EAAEO,UAAU,EAAEvD,KAAK,EAAEyD,UAAU,EAAE;EAChF,IAAI2G,sBAAsB,EAAEC,sBAAsB;EAElDrH,MAAM,GAAGA,MAAM,CAACiB,MAAM,CAAC,UAAUI,CAAC,EAAE;IAClC,OAAOA,CAAC,CAACF,eAAe,KAAK3C,OAAO,CAAC4C,EAAE;EACzC,CAAC,CAAC;EACF,IAAIJ,SAAS,GAAG,KAAK;EACrB,IAAI6C,MAAM,GAAGE,KAAK,CAACC,IAAI,CAAC,IAAIsD,GAAG,CAACtH,MAAM,CAAC0D,GAAG,CAAC,UAAUrC,CAAC,EAAE;IACtD,OAAOA,CAAC,CAAC8E,MAAM;EACjB,CAAC,CAAC,CAACG,IAAI,CAAC,CAAC,CAAC5C,GAAG,CAAC,UAAUlC,KAAK,EAAE;IAC7B,IAAIC,KAAK,GAAGjD,OAAO,CAACkD,QAAQ,CAACF,KAAK,CAACG,aAAa,CAAC;IACjDH,KAAK,CAAC1B,SAAS,GAAG,cAAc,GAAG,gBAAgB,CAAC,GAAG2B,KAAK;IAC5D,OAAOA,KAAK;EACd,CAAC,CAAC,CAAC,CAAC;EACJ,IAAIH,KAAK,GAAG9D,SAAS,CAACqG,MAAM,EAAE7G,KAAK,CAAC,CAACuK,KAAK,CAAC,KAAK,CAAC,CAACC,YAAY,CAAC,CAACJ,sBAAsB,GAAG5I,OAAO,CAACe,gBAAgB,KAAK,IAAI,GAAG6H,sBAAsB,GAAG,CAAC,CAAC,CAACK,YAAY,CAAC,CAACJ,sBAAsB,GAAG7I,OAAO,CAACc,gBAAgB,KAAK,IAAI,GAAG+H,sBAAsB,GAAG,CAAC,CAAC,CAAC,CAAC;;EAEjQ,IAAI7I,OAAO,CAACsF,MAAM,EAAE;IAClBxC,KAAK,CAACuC,MAAM,CAACE,KAAK,CAACC,IAAI,CAAC1C,KAAK,CAACuC,MAAM,CAAC,CAAC,CAAC,CAACI,OAAO,CAAC,CAAC,CAAC;EACpD;EAEA,IAAIE,UAAU,GAAG7C,KAAK,CAAC8C,IAAI,CAAC,CAAC,CAACpH,KAAK,CAACyD,UAAU,CAAC;EAC/C,IAAI4D,gBAAgB,GAAG/C,KAAK;EAC5B,IAAIiD,eAAe,GAAGC,oBAAoB,CAAChG,OAAO,EAAE6F,gBAAgB,EAAErE,MAAM,CAAC;EAE7E,IAAIkF,aAAa,GAAG,SAASA,aAAaA,CAAC7D,CAAC,EAAE;IAC5C,OAAOA,CAAC;EACV,CAAC;EAED,IAAI4D,UAAU,GAAG,CAAC,CAAC;EAEnB,IAAIG,WAAW,GAAG,SAASA,WAAWA,CAAC3D,KAAK,EAAE;IAC5C,IAAIiG,sBAAsB,EAAEC,oBAAoB;IAEhD,OAAO,CAACD,sBAAsB,GAAG,CAACC,oBAAoB,GAAGnJ,OAAO,CAACyG,UAAU,KAAK,IAAI,GAAG,KAAK,CAAC,GAAG0C,oBAAoB,CAACrG,KAAK,IAAI,IAAI,GAAG,KAAK,CAAC,GAAGqG,oBAAoB,CAACrG,KAAK,CAACG,KAAK,EAAE9E,QAAQ,CAAC,CAAC,CAAC,EAAEsI,UAAU,EAAE;MACvM3D,KAAK,EAAEgC;IACT,CAAC,CAAC,CAAC,KAAK,IAAI,GAAGoE,sBAAsB,GAAGxC,aAAa,CAACzD,KAAK,CAAC;EAC9D,CAAC;EAED,IAAI8D,aAAa,GAAG,SAASA,aAAaA,CAAC9D,KAAK,EAAE;IAChD,IAAImG,sBAAsB,EAAEC,oBAAoB;IAEhD,OAAO,CAACD,sBAAsB,GAAG,CAACC,oBAAoB,GAAGrJ,OAAO,CAACyG,UAAU,KAAK,IAAI,GAAG,KAAK,CAAC,GAAG4C,oBAAoB,CAACnC,OAAO,IAAI,IAAI,GAAG,KAAK,CAAC,GAAGmC,oBAAoB,CAACnC,OAAO,CAACjE,KAAK,EAAE9E,QAAQ,CAAC,CAAC,CAAC,EAAEsI,UAAU,EAAE;MAC3MS,OAAO,EAAEpC;IACX,CAAC,CAAC,CAAC,KAAK,IAAI,GAAGsE,sBAAsB,GAAGxC,WAAW,CAAC3D,KAAK,CAAC;EAC5D,CAAC;EAED,IAAIkE,YAAY,GAAG,SAASA,YAAYA,CAAClE,KAAK,EAAE;IAC9C,IAAIqG,sBAAsB,EAAEC,oBAAoB;IAEhD,OAAO,CAACD,sBAAsB,GAAG,CAACC,oBAAoB,GAAGvJ,OAAO,CAACyG,UAAU,KAAK,IAAI,GAAG,KAAK,CAAC,GAAG8C,oBAAoB,CAACjC,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,GAAGiC,oBAAoB,CAACjC,MAAM,CAACrE,KAAK,EAAE9E,QAAQ,CAAC,CAAC,CAAC,EAAEsI,UAAU,EAAE;MACzMa,MAAM,EAAExC;IACV,CAAC,CAAC,CAAC,KAAK,IAAI,GAAGwE,sBAAsB,GAAGvC,aAAa,CAAC9D,KAAK,CAAC;EAC9D,CAAC;EAEDuB,MAAM,CAAC+C,MAAM,CAACd,UAAU,EAAE;IACxB,SAAS,EAAEC,aAAa;IACxB5D,KAAK,EAAE8D,WAAW;IAClBM,OAAO,EAAEH,aAAa;IACtBO,MAAM,EAAEH;EACV,CAAC,CAAC;EACF,OAAOhJ,QAAQ,CAAC,CAAC,CAAC,EAAE6B,OAAO,EAAE;IAC3BwC,SAAS,EAAEA,SAAS;IACpBgF,UAAU,EAAE,MAAM;IAClBzF,UAAU,EAAEA,UAAU;IACtBe,KAAK,EAAEA,KAAK;IACZtE,KAAK,EAAEA,KAAK;IACZmH,UAAU,EAAEA,UAAU;IACtBc,UAAU,EAAEA,UAAU;IACtBZ,gBAAgB,EAAEA,gBAAgB;IAClCE,eAAe,EAAEA;EACnB,CAAC,CAAC;AACJ,CAAC,CAAC;;AAGF,SAAS0B,WAAWA,CAACjG,MAAM,EAAEgI,WAAW,EAAE;EACxC,IAAIC,qBAAqB;EAEzB,IAAIC,aAAa,GAAGlF,MAAM,CAACmF,IAAI,CAACnI,MAAM,CAAC;EACvC,IAAIoI,OAAO,GAAGlL,KAAK,CAAC,CAAC,CAACiL,IAAI,CAACD,aAAa,CAAC,CAACzG,KAAK,CAAC,UAAU4G,CAAC,EAAEC,WAAW,EAAEC,KAAK,EAAE;IAC/E,IAAIC,cAAc,EAAEC,qBAAqB;IAEzC,IAAI9G,aAAa,GAAG,CAAC6G,cAAc,GAAGxI,MAAM,CAAC0I,MAAM,CAACJ,WAAW,CAAC,CAAC,KAAK,IAAI,GAAG,KAAK,CAAC,GAAG,CAACG,qBAAqB,GAAGD,cAAc,CAACrC,MAAM,CAACoC,KAAK,CAAC,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGE,qBAAqB,CAAC9G,aAAa;IACnM,IAAIgH,GAAG,GAAG,OAAOhH,aAAa,KAAK,WAAW,GAAGqG,WAAW,CAACtG,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC;IAExF,IAAI,OAAOgH,GAAG,KAAK,WAAW,IAAIA,GAAG,KAAK,IAAI,EAAE;MAC9C,OAAO,CAAC;IACV;IAEA,OAAOA,GAAG;EACZ,CAAC,CAAC,CAACC,MAAM,CAAC,CAACX,qBAAqB,GAAGD,WAAW,CAACa,WAAW,KAAK,IAAI,GAAGZ,qBAAqB,GAAG9K,eAAe,CAAC;EAC9G,IAAIwC,OAAO,GAAGyI,OAAO,CAACrE,KAAK,CAACC,IAAI,CAAC;IAC/B8E,MAAM,EAAE9I,MAAM,CAAC+I,IAAI,CAAC,UAAUC,CAAC,EAAEC,CAAC,EAAE;MAClC,OAAOA,CAAC,CAAC9C,MAAM,CAAC2C,MAAM,GAAGE,CAAC,CAAC7C,MAAM,CAAC2C,MAAM;IAC1C,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC3C,MAAM,CAAC2C;EACf,CAAC,CAAC,CAAC;EAEH,KAAK,IAAII,MAAM,GAAG,CAAC,EAAEA,MAAM,GAAGvJ,OAAO,CAACmJ,MAAM,EAAEI,MAAM,EAAE,EAAE;IACtD,IAAIhI,CAAC,GAAGvB,OAAO,CAACuJ,MAAM,CAAC;IAEvB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGjI,CAAC,CAAC4H,MAAM,EAAEK,CAAC,EAAE,EAAE;MACjC,IAAI3H,KAAK,GAAGN,CAAC,CAACiI,CAAC,CAAC;MAEhB,IAAInJ,MAAM,CAACkJ,MAAM,CAAC,CAAC/C,MAAM,CAACgD,CAAC,CAAC,EAAE;QAC5B;QACA3H,KAAK,CAAC4H,IAAI,GAAGpJ,MAAM,CAACkJ,MAAM,CAAC,CAAC/C,MAAM,CAACgD,CAAC,CAAC;QACrCnJ,MAAM,CAACkJ,MAAM,CAAC,CAAC/C,MAAM,CAACgD,CAAC,CAAC,CAAC9C,SAAS,GAAG7E,KAAK;MAC5C;IACF;EACF;AACF;AAEA,SAAS8C,qBAAqBA,CAAC9F,OAAO,EAAE8C,KAAK,EAAEtB,MAAM,EAAEhD,KAAK,EAAE;EAC5D,IAAIqM,sBAAsB,EAAEC,sBAAsB;;EAElD;EACA;EACA,IAAIC,gBAAgB,GAAG5C,IAAI,CAAC9J,GAAG,CAAC2M,KAAK,CAAC7C,IAAI,EAAE3J,KAAK,CAAC;EAClD,IAAIyM,SAAS,GAAG9C,IAAI,CAAC9J,GAAG,CAAC2M,KAAK,CAAC7C,IAAI,EAAE3J,KAAK,CAAC;EAE3C,CAAC,YAAY;IACX,KAAK,IAAImM,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGnJ,MAAM,CAAC8I,MAAM,EAAEK,CAAC,EAAE,EAAE;MACtC,IAAIO,KAAK,GAAG1J,MAAM,CAACmJ,CAAC,CAAC;MAErB,KAAK,IAAIQ,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,KAAK,CAACvD,MAAM,CAAC2C,MAAM,EAAEa,CAAC,EAAE,EAAE;QAC5C,IAAIC,gBAAgB;QAEpB,IAAIC,EAAE,GAAGH,KAAK,CAACvD,MAAM,CAACwD,CAAC,CAAC;QACxB,IAAIG,GAAG,GAAGxI,KAAK,CAAC,CAACsI,gBAAgB,GAAGC,EAAE,CAAClG,YAAY,KAAK,IAAI,GAAGiG,gBAAgB,GAAGG,GAAG,CAAC;QAEtF,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGN,KAAK,CAACvD,MAAM,CAAC2C,MAAM,EAAEkB,CAAC,EAAE,EAAE;UAC5C,IAAIC,gBAAgB;UAEpB,IAAIC,EAAE,GAAGR,KAAK,CAACvD,MAAM,CAAC6D,CAAC,CAAC;UACxB,IAAIG,GAAG,GAAG7I,KAAK,CAAC,CAAC2I,gBAAgB,GAAGC,EAAE,CAACvG,YAAY,KAAK,IAAI,GAAGsG,gBAAgB,GAAGF,GAAG,CAAC;UAEtF,IAAID,GAAG,KAAKK,GAAG,EAAE;YACf;UACF;UAEA,IAAIrF,IAAI,GAAG6B,IAAI,CAACyD,GAAG,CAACzD,IAAI,CAAC9J,GAAG,CAACiN,GAAG,EAAEK,GAAG,CAAC,GAAGxD,IAAI,CAAC5J,GAAG,CAAC+M,GAAG,EAAEK,GAAG,CAAC,CAAC;UAE5D,IAAIrF,IAAI,GAAGyE,gBAAgB,EAAE;YAC3BA,gBAAgB,GAAG5C,IAAI,CAAC9J,GAAG,CAACiI,IAAI,EAAE2E,SAAS,CAAC;YAE5C,IAAIF,gBAAgB,KAAKE,SAAS,EAAE;cAClC;YACF;UACF;QACF;MACF;IACF;EACF,CAAC,EAAE,CAAC;EAEJ,IAAIY,UAAU,GAAGpN,OAAO,CAACwM,SAAS,GAAGF,gBAAgB,CAAC;EACtD,IAAIlF,gBAAgB,GAAG7G,SAAS,CAAC6M,UAAU,EAAErN,KAAK,CAAC,CAACuK,KAAK,CAAC,KAAK,CAAC,CAACC,YAAY,CAAC,CAAC6B,sBAAsB,GAAG7K,OAAO,CAACe,gBAAgB,KAAK,IAAI,GAAG8J,sBAAsB,GAAG,CAAC,CAAC,CAAC5B,YAAY,CAAC,CAAC6B,sBAAsB,GAAG9K,OAAO,CAACc,gBAAgB,KAAK,IAAI,GAAGgK,sBAAsB,GAAG,CAAC,CAAC;EAC9Q,OAAOjF,gBAAgB;AACzB;AAEA,SAASG,oBAAoBA,CAAChG,OAAO,EAAE6F,gBAAgB,EAAErE,MAAM,EAAE;EAC/D,IAAIsK,sBAAsB,EAAEC,sBAAsB;EAElD,IAAIF,UAAU,GAAGpN,OAAO,CAAC+C,MAAM,CAAC8I,MAAM,CAAC;EACvC,IAAIvE,eAAe,GAAG/G,SAAS,CAAC6M,UAAU,EAAE,CAAC,CAAC,EAAEhG,gBAAgB,CAACK,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC6C,KAAK,CAAC,KAAK,CAAC,CAACC,YAAY,CAAC,CAAC8C,sBAAsB,GAAG9L,OAAO,CAACiB,sBAAsB,KAAK,IAAI,GAAG6K,sBAAsB,GAAG9L,OAAO,CAACe,gBAAgB,GAAGf,OAAO,CAACe,gBAAgB,GAAG,CAAC,GAAG,CAAC,CAAC,CAACkI,YAAY,CAAC,CAAC8C,sBAAsB,GAAG/L,OAAO,CAACgB,sBAAsB,KAAK,IAAI,GAAG+K,sBAAsB,GAAG/L,OAAO,CAACc,gBAAgB,GAAGd,OAAO,CAACc,gBAAgB,GAAG,CAAC,GAAG,CAAC,CAAC;EAEza,IAAIgC,KAAK,GAAG,SAASA,KAAKA,CAACgH,WAAW,EAAE;IACtC,IAAIkC,YAAY;IAEhB,OAAOjG,eAAe,CAAC,CAACiG,YAAY,GAAGxK,MAAM,CAACyK,IAAI,CAAC,UAAUpJ,CAAC,EAAE;MAC9D,OAAOA,CAAC,CAACkH,KAAK,KAAKD,WAAW;IAChC,CAAC,CAAC,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGkC,YAAY,CAACE,YAAY,CAAC;EACnD,CAAC;EAED,OAAO1H,MAAM,CAAC+C,MAAM,CAACzE,KAAK,EAAEiD,eAAe,CAAC;AAC9C"},"metadata":{},"sourceType":"module","externalDependencies":[]}