{"ast":null,"code":"import React from 'react';\nimport { Delaunay } from 'd3-delaunay'; //\n\nimport { translate } from '../utils/Utils';\nimport useChartContext from '../utils/chartContext';\nimport { line } from 'd3-shape';\nimport { getPrimaryGroupLength, getPrimaryLength } from '../seriesTypes/Bar';\nexport default function Voronoi() {\n  var _useChartContext = useChartContext(),\n    getOptions = _useChartContext.getOptions,\n    focusedDatumState = _useChartContext.focusedDatumState,\n    isInteractingState = _useChartContext.isInteractingState;\n  var setFocusedDatum = focusedDatumState[1];\n  var isInteracting = isInteractingState[0];\n  var _getOptions = getOptions(),\n    onFocusDatum = _getOptions.onFocusDatum,\n    onClickDatum = _getOptions.onClickDatum,\n    tooltip = _getOptions.tooltip,\n    primaryCursor = _getOptions.primaryCursor,\n    secondaryCursor = _getOptions.secondaryCursor,\n    showVoronoi = _getOptions.showVoronoi,\n    interactionMode = _getOptions.interactionMode;\n  var handleFocus = React.useCallback(function (datum) {\n    var _getOptions$onFocusDa, _getOptions2;\n    (_getOptions$onFocusDa = (_getOptions2 = getOptions()).onFocusDatum) == null ? void 0 : _getOptions$onFocusDa.call(_getOptions2, datum);\n    setFocusedDatum(datum);\n  }, [getOptions, setFocusedDatum]);\n  var needsVoronoi = isInteracting && (showVoronoi || onFocusDatum || onClickDatum || tooltip || primaryCursor || secondaryCursor);\n  if (!needsVoronoi) {\n    return null;\n  }\n  var props = {\n    handleFocus: handleFocus\n  };\n  if (interactionMode === 'closest') {\n    return /*#__PURE__*/React.createElement(SingleVoronoi, props);\n  }\n  return /*#__PURE__*/React.createElement(PrimaryVoronoi, props);\n}\nfunction PrimaryVoronoi(_ref) {\n  var handleFocus = _ref.handleFocus;\n  var _useChartContext2 = useChartContext(),\n    primaryAxis = _useChartContext2.primaryAxis,\n    secondaryAxes = _useChartContext2.secondaryAxes,\n    getOptions = _useChartContext2.getOptions,\n    gridDimensions = _useChartContext2.gridDimensions,\n    datumsByInteractionGroup = _useChartContext2.datumsByInteractionGroup;\n  var stackedVoronoi = secondaryAxes.length === 1 && secondaryAxes[0].stacked;\n  var useBarPx = secondaryAxes.every(function (d) {\n    return d.elementType === 'bar' && !d.stacked;\n  });\n  return React.useMemo(function () {\n    var preColumns = Array.from(datumsByInteractionGroup.entries()).map(function (_ref2) {\n      var _ = _ref2[0],\n        datums = _ref2[1];\n      return datums;\n    }).filter(function (datums) {\n      var datum = datums[0];\n      if (!datum) {\n        return;\n      }\n      var primaryValue = datum.primaryValue;\n      return primaryValue !== 'undefined' && primaryValue !== null;\n    }).sort(function (a, b) {\n      var aAxis = secondaryAxes.find(function (d) {\n        return d.id === a[0].secondaryAxisId;\n      });\n      var bAxis = secondaryAxes.find(function (d) {\n        return d.id === b[0].secondaryAxisId;\n      });\n      var aPx = getPrimary(a[0], primaryAxis, aAxis, useBarPx);\n      var bPx = getPrimary(b[0], primaryAxis, bAxis, useBarPx);\n      return aPx - bPx;\n    });\n    if (primaryAxis.isVertical) {\n      preColumns.reverse();\n    }\n    var columns = preColumns.map(function (datums, i, all) {\n      var _primaryAxis$scale$ra;\n      var datum = datums[0];\n      var prev = all[i - 1];\n      var next = all[i + 1];\n      var secondaryAxis = secondaryAxes.find(function (d) {\n        return d.id === datum.secondaryAxisId;\n      });\n      var primaryPx = getPrimary(datum, primaryAxis, secondaryAxis, useBarPx);\n      var range = (_primaryAxis$scale$ra = primaryAxis == null ? void 0 : primaryAxis.scale.range()) != null ? _primaryAxis$scale$ra : [0, 0];\n      var primaryStart = range[0],\n        primaryEnd = range[1];\n      if (prev) {\n        var _secondaryAxis = secondaryAxes.find(function (d) {\n          return d.id === prev[0].secondaryAxisId;\n        });\n        var prevPx = getPrimary(prev[0], primaryAxis, _secondaryAxis, useBarPx);\n        primaryStart = primaryPx - (primaryPx - prevPx) / 2;\n      }\n      if (next) {\n        var _secondaryAxis2 = secondaryAxes.find(function (d) {\n          return d.id === next[0].secondaryAxisId;\n        });\n        var nextPx = getPrimary(next[0], primaryAxis, _secondaryAxis2, useBarPx);\n        primaryEnd = primaryPx + (nextPx - primaryPx) / 2;\n      }\n      return {\n        primaryStart: primaryStart,\n        primaryEnd: primaryEnd,\n        primaryPx: primaryPx,\n        datumBoundaries: datums.filter(function (datum) {\n          var secondaryValue = datum.secondaryValue;\n          return typeof secondaryValue !== 'undefined' && secondaryValue !== null;\n        }).map(function (datum, i, all) {\n          var _secondaryAxis$scale3, _datum$stackData3, _secondaryAxis$scale$2;\n          var prev = all[i - 1];\n          var next = all[i + 1];\n          var secondaryAxis = secondaryAxes.find(function (d) {\n            return d.id === datum.secondaryAxisId;\n          });\n          if (stackedVoronoi) {\n            var _secondaryAxis$scale$, _datum$stackData, _datum$stackData2;\n            var _range = (_secondaryAxis$scale$ = secondaryAxis == null ? void 0 : secondaryAxis.scale.range()) != null ? _secondaryAxis$scale$ : [0, 0];\n            var stackData = [(_datum$stackData = datum.stackData) == null ? void 0 : _datum$stackData[0], (_datum$stackData2 = datum.stackData) == null ? void 0 : _datum$stackData2[1]];\n            if (secondaryAxis != null && secondaryAxis.isVertical) {\n              _range.reverse();\n              stackData.reverse();\n            }\n            var _secondaryStart = _range[0],\n              _secondaryEnd = _range[1];\n            if (prev) {\n              var _secondaryAxis$scale, _stackData$;\n              _secondaryStart = (_secondaryAxis$scale = secondaryAxis == null ? void 0 : secondaryAxis.scale((_stackData$ = stackData[0]) != null ? _stackData$ : NaN)) != null ? _secondaryAxis$scale : NaN;\n            }\n            if (next) {\n              var _secondaryAxis$scale2, _stackData$2;\n              _secondaryEnd = (_secondaryAxis$scale2 = secondaryAxis == null ? void 0 : secondaryAxis.scale((_stackData$2 = stackData[1]) != null ? _stackData$2 : NaN)) != null ? _secondaryAxis$scale2 : NaN;\n            }\n            return {\n              secondaryStart: _secondaryStart,\n              secondaryEnd: _secondaryEnd,\n              datum: datum\n            };\n          }\n          var value = (_secondaryAxis$scale3 = secondaryAxis == null ? void 0 : secondaryAxis.scale(secondaryAxis.stacked ? (_datum$stackData3 = datum.stackData) == null ? void 0 : _datum$stackData3[1] : datum.secondaryValue)) != null ? _secondaryAxis$scale3 : NaN;\n          var range = (_secondaryAxis$scale$2 = secondaryAxis == null ? void 0 : secondaryAxis.scale.range()) != null ? _secondaryAxis$scale$2 : [0, 0];\n          if (secondaryAxis != null && secondaryAxis.isVertical) {\n            range.reverse();\n          }\n          var secondaryStart = range[0],\n            secondaryEnd = range[1];\n          if (prev) {\n            var _prevAxis$scale, _prev$stackData;\n            var prevAxis = secondaryAxes.find(function (d) {\n              return d.id === (prev == null ? void 0 : prev.secondaryAxisId);\n            });\n            var prevValue = (_prevAxis$scale = prevAxis == null ? void 0 : prevAxis.scale(prevAxis.stacked ? (_prev$stackData = prev.stackData) == null ? void 0 : _prev$stackData[1] : prev.secondaryValue)) != null ? _prevAxis$scale : NaN;\n            secondaryStart = value - (value - prevValue) / 2;\n          }\n          if (next) {\n            var _nextAxis$scale, _next$stackData;\n            var nextAxis = secondaryAxes.find(function (d) {\n              return d.id === (next == null ? void 0 : next.secondaryAxisId);\n            });\n            var nextValue = (_nextAxis$scale = nextAxis == null ? void 0 : nextAxis.scale(nextAxis.stacked ? (_next$stackData = next.stackData) == null ? void 0 : _next$stackData[1] : next.secondaryValue)) != null ? _nextAxis$scale : NaN;\n            secondaryEnd = value + (nextValue - value) / 2;\n          }\n          return {\n            secondaryStart: secondaryStart,\n            secondaryEnd: secondaryEnd,\n            datum: datum\n          };\n        })\n      };\n    });\n    return /*#__PURE__*/React.createElement(\"g\", {\n      onMouseLeave: function onMouseLeave() {\n        return handleFocus(null);\n      },\n      style: {\n        transform: translate(gridDimensions.left, gridDimensions.top)\n      }\n    }, columns.map(function (column, i) {\n      return /*#__PURE__*/React.createElement(\"g\", {\n        key: column.primaryPx + \"_\" + i\n      }, column.datumBoundaries.map(function (datumBoundary, i) {\n        var x1 = !primaryAxis.isVertical ? column.primaryStart : datumBoundary.secondaryStart;\n        var x2 = !primaryAxis.isVertical ? column.primaryEnd : datumBoundary.secondaryEnd;\n        var y1 = !primaryAxis.isVertical ? datumBoundary.secondaryStart : column.primaryStart;\n        var y2 = !primaryAxis.isVertical ? datumBoundary.secondaryEnd : column.primaryEnd;\n        var x = Math.min(x1, x2);\n        var y = Math.min(y1, y2);\n        var xEnd = Math.max(x1, x2);\n        var yEnd = Math.max(y1, y2);\n        var height = Math.max(yEnd - y, 0);\n        var width = Math.max(xEnd - x, 0);\n        return /*#__PURE__*/React.createElement(\"rect\", {\n          key: i,\n          x: x,\n          y: y,\n          width: width,\n          height: height,\n          className: 'action-voronoi',\n          onMouseEnter: function onMouseEnter() {\n            return handleFocus(datumBoundary.datum);\n          },\n          style: {\n            fill: getOptions().dark ? '#ffffff33' : 'rgba(0,0,0,0.2)',\n            strokeWidth: 1,\n            stroke: getOptions().dark ? 'white' : 'black',\n            opacity: getOptions().showVoronoi ? 1 : 0\n          }\n        });\n      }));\n    }));\n  }, [datumsByInteractionGroup, primaryAxis, gridDimensions.left, gridDimensions.top, secondaryAxes, useBarPx, stackedVoronoi, handleFocus, getOptions]);\n}\nvar delaunayLineFn = line();\nfunction SingleVoronoi(_ref3) {\n  var handleFocus = _ref3.handleFocus;\n  var _useChartContext3 = useChartContext(),\n    primaryAxis = _useChartContext3.primaryAxis,\n    series = _useChartContext3.series,\n    secondaryAxes = _useChartContext3.secondaryAxes,\n    getOptions = _useChartContext3.getOptions,\n    gridDimensions = _useChartContext3.gridDimensions;\n  var polygons = null;\n  var voronoiData = [];\n  var useBarPx = secondaryAxes.every(function (d) {\n    return d.elementType === 'bar' && !d.stacked;\n  });\n  series.forEach(function (serie) {\n    serie.datums.filter(function (datum) {\n      var primaryValue = datum.primaryValue;\n      var secondaryValue = datum.secondaryValue;\n      return primaryValue !== 'undefined' && primaryValue !== null && secondaryValue !== 'undefined' && secondaryValue !== null;\n    }).forEach(function (datum) {\n      var secondaryAxis = secondaryAxes.find(function (d) {\n        return d.id === datum.secondaryAxisId;\n      });\n      var x = getX(datum, primaryAxis, secondaryAxis, useBarPx);\n      var y = getY(datum, primaryAxis, secondaryAxis, useBarPx);\n      if (typeof x !== 'number' || typeof y !== 'number' || Number.isNaN(y) || Number.isNaN(x)) {\n        return;\n      }\n      voronoiData.push({\n        x: x,\n        y: y,\n        datum: datum\n      });\n    });\n  });\n  var delaunay = Delaunay.from(voronoiData, function (d) {\n    return Math.max(d.x, 0);\n  }, function (d) {\n    return Math.max(d.y, 0);\n  });\n  var voronoi = delaunay.voronoi([0, 0, gridDimensions.width, gridDimensions.height]);\n  polygons = voronoi.cellPolygons();\n  polygons = Array.from(polygons);\n  return /*#__PURE__*/React.createElement(\"g\", {\n    onMouseLeave: function onMouseLeave() {\n      return handleFocus(null);\n    },\n    style: {\n      transform: translate(gridDimensions.left, gridDimensions.top)\n    }\n  }, polygons.map(function (points, i) {\n    var index = points.index;\n    var datum = voronoiData[index].datum;\n    var path = delaunayLineFn(points) || undefined;\n    return /*#__PURE__*/React.createElement(\"path\", {\n      key: i,\n      d: path,\n      className: 'action-voronoi',\n      onMouseEnter: function onMouseEnter() {\n        return handleFocus(datum);\n      },\n      style: {\n        fill: getOptions().dark ? '#ffffff33' : 'rgba(0,0,0,0.2)',\n        strokeWidth: 1,\n        stroke: getOptions().dark ? 'white' : 'black',\n        opacity: getOptions().showVoronoi ? 1 : 0\n      }\n    });\n  }));\n}\nfunction getX(datum, primaryAxis, secondaryAxis, useBarPx) {\n  return primaryAxis.isVertical ? getSecondary(datum, secondaryAxis) : getPrimary(datum, primaryAxis, secondaryAxis, useBarPx);\n}\nfunction getY(datum, primaryAxis, secondaryAxis, useBarPx) {\n  return primaryAxis.isVertical ? getPrimary(datum, primaryAxis, secondaryAxis, useBarPx) : getSecondary(datum, secondaryAxis);\n}\nfunction getPrimary(datum, primaryAxis, secondaryAxis, useBarPx) {\n  var _primaryAxis$scale;\n  var primary = (_primaryAxis$scale = primaryAxis.scale(datum.primaryValue)) != null ? _primaryAxis$scale : NaN;\n  if (useBarPx && secondaryAxis.elementType === 'bar') {\n    if (!secondaryAxis.stacked) {\n      var _ref4;\n      primary += (_ref4 = primaryAxis.seriesBandScale(datum.seriesIndex)) != null ? _ref4 : NaN;\n      primary += getPrimaryLength(datum, primaryAxis, secondaryAxis) / 2;\n    } else {\n      primary += getPrimaryGroupLength(datum, primaryAxis) / 2;\n    }\n  }\n  return primary;\n}\nfunction getSecondary(datum, secondaryAxis) {\n  var _secondaryAxis$scale5;\n  if (secondaryAxis.stacked) {\n    var _secondaryAxis$scale4, _datum$stackData$, _datum$stackData4;\n    return (_secondaryAxis$scale4 = secondaryAxis.scale((_datum$stackData$ = (_datum$stackData4 = datum.stackData) == null ? void 0 : _datum$stackData4[1]) != null ? _datum$stackData$ : NaN)) != null ? _secondaryAxis$scale4 : NaN;\n  }\n  return (_secondaryAxis$scale5 = secondaryAxis.scale(datum.secondaryValue)) != null ? _secondaryAxis$scale5 : NaN;\n}","map":{"version":3,"names":["React","Delaunay","translate","useChartContext","line","getPrimaryGroupLength","getPrimaryLength","Voronoi","_useChartContext","getOptions","focusedDatumState","isInteractingState","setFocusedDatum","isInteracting","_getOptions","onFocusDatum","onClickDatum","tooltip","primaryCursor","secondaryCursor","showVoronoi","interactionMode","handleFocus","useCallback","datum","_getOptions$onFocusDa","_getOptions2","call","needsVoronoi","props","createElement","SingleVoronoi","PrimaryVoronoi","_ref","_useChartContext2","primaryAxis","secondaryAxes","gridDimensions","datumsByInteractionGroup","stackedVoronoi","length","stacked","useBarPx","every","d","elementType","useMemo","preColumns","Array","from","entries","map","_ref2","_","datums","filter","primaryValue","sort","a","b","aAxis","find","id","secondaryAxisId","bAxis","aPx","getPrimary","bPx","isVertical","reverse","columns","i","all","_primaryAxis$scale$ra","prev","next","secondaryAxis","primaryPx","range","scale","primaryStart","primaryEnd","_secondaryAxis","prevPx","_secondaryAxis2","nextPx","datumBoundaries","secondaryValue","_secondaryAxis$scale3","_datum$stackData3","_secondaryAxis$scale$2","_secondaryAxis$scale$","_datum$stackData","_datum$stackData2","_range","stackData","_secondaryStart","_secondaryEnd","_secondaryAxis$scale","_stackData$","NaN","_secondaryAxis$scale2","_stackData$2","secondaryStart","secondaryEnd","value","_prevAxis$scale","_prev$stackData","prevAxis","prevValue","_nextAxis$scale","_next$stackData","nextAxis","nextValue","onMouseLeave","style","transform","left","top","column","key","datumBoundary","x1","x2","y1","y2","x","Math","min","y","xEnd","max","yEnd","height","width","className","onMouseEnter","fill","dark","strokeWidth","stroke","opacity","delaunayLineFn","_ref3","_useChartContext3","series","polygons","voronoiData","forEach","serie","getX","getY","Number","isNaN","push","delaunay","voronoi","cellPolygons","points","index","path","undefined","getSecondary","_primaryAxis$scale","primary","_ref4","seriesBandScale","seriesIndex","_secondaryAxis$scale5","_secondaryAxis$scale4","_datum$stackData$","_datum$stackData4"],"sources":["/Users/lebon/Desktop/el_balon/node_modules/react-charts/es/components/Voronoi.js"],"sourcesContent":["import React from 'react';\nimport { Delaunay } from 'd3-delaunay'; //\n\nimport { translate } from '../utils/Utils';\nimport useChartContext from '../utils/chartContext';\nimport { line } from 'd3-shape';\nimport { getPrimaryGroupLength, getPrimaryLength } from '../seriesTypes/Bar';\nexport default function Voronoi() {\n  var _useChartContext = useChartContext(),\n      getOptions = _useChartContext.getOptions,\n      focusedDatumState = _useChartContext.focusedDatumState,\n      isInteractingState = _useChartContext.isInteractingState;\n\n  var setFocusedDatum = focusedDatumState[1];\n  var isInteracting = isInteractingState[0];\n\n  var _getOptions = getOptions(),\n      onFocusDatum = _getOptions.onFocusDatum,\n      onClickDatum = _getOptions.onClickDatum,\n      tooltip = _getOptions.tooltip,\n      primaryCursor = _getOptions.primaryCursor,\n      secondaryCursor = _getOptions.secondaryCursor,\n      showVoronoi = _getOptions.showVoronoi,\n      interactionMode = _getOptions.interactionMode;\n\n  var handleFocus = React.useCallback(function (datum) {\n    var _getOptions$onFocusDa, _getOptions2;\n\n    (_getOptions$onFocusDa = (_getOptions2 = getOptions()).onFocusDatum) == null ? void 0 : _getOptions$onFocusDa.call(_getOptions2, datum);\n    setFocusedDatum(datum);\n  }, [getOptions, setFocusedDatum]);\n  var needsVoronoi = isInteracting && (showVoronoi || onFocusDatum || onClickDatum || tooltip || primaryCursor || secondaryCursor);\n\n  if (!needsVoronoi) {\n    return null;\n  }\n\n  var props = {\n    handleFocus: handleFocus\n  };\n\n  if (interactionMode === 'closest') {\n    return /*#__PURE__*/React.createElement(SingleVoronoi, props);\n  }\n\n  return /*#__PURE__*/React.createElement(PrimaryVoronoi, props);\n}\n\nfunction PrimaryVoronoi(_ref) {\n  var handleFocus = _ref.handleFocus;\n\n  var _useChartContext2 = useChartContext(),\n      primaryAxis = _useChartContext2.primaryAxis,\n      secondaryAxes = _useChartContext2.secondaryAxes,\n      getOptions = _useChartContext2.getOptions,\n      gridDimensions = _useChartContext2.gridDimensions,\n      datumsByInteractionGroup = _useChartContext2.datumsByInteractionGroup;\n\n  var stackedVoronoi = secondaryAxes.length === 1 && secondaryAxes[0].stacked;\n  var useBarPx = secondaryAxes.every(function (d) {\n    return d.elementType === 'bar' && !d.stacked;\n  });\n  return React.useMemo(function () {\n    var preColumns = Array.from(datumsByInteractionGroup.entries()).map(function (_ref2) {\n      var _ = _ref2[0],\n          datums = _ref2[1];\n      return datums;\n    }).filter(function (datums) {\n      var datum = datums[0];\n\n      if (!datum) {\n        return;\n      }\n\n      var primaryValue = datum.primaryValue;\n      return primaryValue !== 'undefined' && primaryValue !== null;\n    }).sort(function (a, b) {\n      var aAxis = secondaryAxes.find(function (d) {\n        return d.id === a[0].secondaryAxisId;\n      });\n      var bAxis = secondaryAxes.find(function (d) {\n        return d.id === b[0].secondaryAxisId;\n      });\n      var aPx = getPrimary(a[0], primaryAxis, aAxis, useBarPx);\n      var bPx = getPrimary(b[0], primaryAxis, bAxis, useBarPx);\n      return aPx - bPx;\n    });\n\n    if (primaryAxis.isVertical) {\n      preColumns.reverse();\n    }\n\n    var columns = preColumns.map(function (datums, i, all) {\n      var _primaryAxis$scale$ra;\n\n      var datum = datums[0];\n      var prev = all[i - 1];\n      var next = all[i + 1];\n      var secondaryAxis = secondaryAxes.find(function (d) {\n        return d.id === datum.secondaryAxisId;\n      });\n      var primaryPx = getPrimary(datum, primaryAxis, secondaryAxis, useBarPx);\n      var range = (_primaryAxis$scale$ra = primaryAxis == null ? void 0 : primaryAxis.scale.range()) != null ? _primaryAxis$scale$ra : [0, 0];\n      var primaryStart = range[0],\n          primaryEnd = range[1];\n\n      if (prev) {\n        var _secondaryAxis = secondaryAxes.find(function (d) {\n          return d.id === prev[0].secondaryAxisId;\n        });\n\n        var prevPx = getPrimary(prev[0], primaryAxis, _secondaryAxis, useBarPx);\n        primaryStart = primaryPx - (primaryPx - prevPx) / 2;\n      }\n\n      if (next) {\n        var _secondaryAxis2 = secondaryAxes.find(function (d) {\n          return d.id === next[0].secondaryAxisId;\n        });\n\n        var nextPx = getPrimary(next[0], primaryAxis, _secondaryAxis2, useBarPx);\n        primaryEnd = primaryPx + (nextPx - primaryPx) / 2;\n      }\n\n      return {\n        primaryStart: primaryStart,\n        primaryEnd: primaryEnd,\n        primaryPx: primaryPx,\n        datumBoundaries: datums.filter(function (datum) {\n          var secondaryValue = datum.secondaryValue;\n          return typeof secondaryValue !== 'undefined' && secondaryValue !== null;\n        }).map(function (datum, i, all) {\n          var _secondaryAxis$scale3, _datum$stackData3, _secondaryAxis$scale$2;\n\n          var prev = all[i - 1];\n          var next = all[i + 1];\n          var secondaryAxis = secondaryAxes.find(function (d) {\n            return d.id === datum.secondaryAxisId;\n          });\n\n          if (stackedVoronoi) {\n            var _secondaryAxis$scale$, _datum$stackData, _datum$stackData2;\n\n            var _range = (_secondaryAxis$scale$ = secondaryAxis == null ? void 0 : secondaryAxis.scale.range()) != null ? _secondaryAxis$scale$ : [0, 0];\n\n            var stackData = [(_datum$stackData = datum.stackData) == null ? void 0 : _datum$stackData[0], (_datum$stackData2 = datum.stackData) == null ? void 0 : _datum$stackData2[1]];\n\n            if (secondaryAxis != null && secondaryAxis.isVertical) {\n              _range.reverse();\n\n              stackData.reverse();\n            }\n\n            var _secondaryStart = _range[0],\n                _secondaryEnd = _range[1];\n\n            if (prev) {\n              var _secondaryAxis$scale, _stackData$;\n\n              _secondaryStart = (_secondaryAxis$scale = secondaryAxis == null ? void 0 : secondaryAxis.scale((_stackData$ = stackData[0]) != null ? _stackData$ : NaN)) != null ? _secondaryAxis$scale : NaN;\n            }\n\n            if (next) {\n              var _secondaryAxis$scale2, _stackData$2;\n\n              _secondaryEnd = (_secondaryAxis$scale2 = secondaryAxis == null ? void 0 : secondaryAxis.scale((_stackData$2 = stackData[1]) != null ? _stackData$2 : NaN)) != null ? _secondaryAxis$scale2 : NaN;\n            }\n\n            return {\n              secondaryStart: _secondaryStart,\n              secondaryEnd: _secondaryEnd,\n              datum: datum\n            };\n          }\n\n          var value = (_secondaryAxis$scale3 = secondaryAxis == null ? void 0 : secondaryAxis.scale(secondaryAxis.stacked ? (_datum$stackData3 = datum.stackData) == null ? void 0 : _datum$stackData3[1] : datum.secondaryValue)) != null ? _secondaryAxis$scale3 : NaN;\n          var range = (_secondaryAxis$scale$2 = secondaryAxis == null ? void 0 : secondaryAxis.scale.range()) != null ? _secondaryAxis$scale$2 : [0, 0];\n\n          if (secondaryAxis != null && secondaryAxis.isVertical) {\n            range.reverse();\n          }\n\n          var secondaryStart = range[0],\n              secondaryEnd = range[1];\n\n          if (prev) {\n            var _prevAxis$scale, _prev$stackData;\n\n            var prevAxis = secondaryAxes.find(function (d) {\n              return d.id === (prev == null ? void 0 : prev.secondaryAxisId);\n            });\n            var prevValue = (_prevAxis$scale = prevAxis == null ? void 0 : prevAxis.scale(prevAxis.stacked ? (_prev$stackData = prev.stackData) == null ? void 0 : _prev$stackData[1] : prev.secondaryValue)) != null ? _prevAxis$scale : NaN;\n            secondaryStart = value - (value - prevValue) / 2;\n          }\n\n          if (next) {\n            var _nextAxis$scale, _next$stackData;\n\n            var nextAxis = secondaryAxes.find(function (d) {\n              return d.id === (next == null ? void 0 : next.secondaryAxisId);\n            });\n            var nextValue = (_nextAxis$scale = nextAxis == null ? void 0 : nextAxis.scale(nextAxis.stacked ? (_next$stackData = next.stackData) == null ? void 0 : _next$stackData[1] : next.secondaryValue)) != null ? _nextAxis$scale : NaN;\n            secondaryEnd = value + (nextValue - value) / 2;\n          }\n\n          return {\n            secondaryStart: secondaryStart,\n            secondaryEnd: secondaryEnd,\n            datum: datum\n          };\n        })\n      };\n    });\n    return /*#__PURE__*/React.createElement(\"g\", {\n      onMouseLeave: function onMouseLeave() {\n        return handleFocus(null);\n      },\n      style: {\n        transform: translate(gridDimensions.left, gridDimensions.top)\n      }\n    }, columns.map(function (column, i) {\n      return /*#__PURE__*/React.createElement(\"g\", {\n        key: column.primaryPx + \"_\" + i\n      }, column.datumBoundaries.map(function (datumBoundary, i) {\n        var x1 = !primaryAxis.isVertical ? column.primaryStart : datumBoundary.secondaryStart;\n        var x2 = !primaryAxis.isVertical ? column.primaryEnd : datumBoundary.secondaryEnd;\n        var y1 = !primaryAxis.isVertical ? datumBoundary.secondaryStart : column.primaryStart;\n        var y2 = !primaryAxis.isVertical ? datumBoundary.secondaryEnd : column.primaryEnd;\n        var x = Math.min(x1, x2);\n        var y = Math.min(y1, y2);\n        var xEnd = Math.max(x1, x2);\n        var yEnd = Math.max(y1, y2);\n        var height = Math.max(yEnd - y, 0);\n        var width = Math.max(xEnd - x, 0);\n        return /*#__PURE__*/React.createElement(\"rect\", {\n          key: i,\n          x: x,\n          y: y,\n          width: width,\n          height: height,\n          className: 'action-voronoi',\n          onMouseEnter: function onMouseEnter() {\n            return handleFocus(datumBoundary.datum);\n          },\n          style: {\n            fill: getOptions().dark ? '#ffffff33' : 'rgba(0,0,0,0.2)',\n            strokeWidth: 1,\n            stroke: getOptions().dark ? 'white' : 'black',\n            opacity: getOptions().showVoronoi ? 1 : 0\n          }\n        });\n      }));\n    }));\n  }, [datumsByInteractionGroup, primaryAxis, gridDimensions.left, gridDimensions.top, secondaryAxes, useBarPx, stackedVoronoi, handleFocus, getOptions]);\n}\n\nvar delaunayLineFn = line();\n\nfunction SingleVoronoi(_ref3) {\n  var handleFocus = _ref3.handleFocus;\n\n  var _useChartContext3 = useChartContext(),\n      primaryAxis = _useChartContext3.primaryAxis,\n      series = _useChartContext3.series,\n      secondaryAxes = _useChartContext3.secondaryAxes,\n      getOptions = _useChartContext3.getOptions,\n      gridDimensions = _useChartContext3.gridDimensions;\n\n  var polygons = null;\n  var voronoiData = [];\n  var useBarPx = secondaryAxes.every(function (d) {\n    return d.elementType === 'bar' && !d.stacked;\n  });\n  series.forEach(function (serie) {\n    serie.datums.filter(function (datum) {\n      var primaryValue = datum.primaryValue;\n      var secondaryValue = datum.secondaryValue;\n      return primaryValue !== 'undefined' && primaryValue !== null && secondaryValue !== 'undefined' && secondaryValue !== null;\n    }).forEach(function (datum) {\n      var secondaryAxis = secondaryAxes.find(function (d) {\n        return d.id === datum.secondaryAxisId;\n      });\n      var x = getX(datum, primaryAxis, secondaryAxis, useBarPx);\n      var y = getY(datum, primaryAxis, secondaryAxis, useBarPx);\n\n      if (typeof x !== 'number' || typeof y !== 'number' || Number.isNaN(y) || Number.isNaN(x)) {\n        return;\n      }\n\n      voronoiData.push({\n        x: x,\n        y: y,\n        datum: datum\n      });\n    });\n  });\n  var delaunay = Delaunay.from(voronoiData, function (d) {\n    return Math.max(d.x, 0);\n  }, function (d) {\n    return Math.max(d.y, 0);\n  });\n  var voronoi = delaunay.voronoi([0, 0, gridDimensions.width, gridDimensions.height]);\n  polygons = voronoi.cellPolygons();\n  polygons = Array.from(polygons);\n  return /*#__PURE__*/React.createElement(\"g\", {\n    onMouseLeave: function onMouseLeave() {\n      return handleFocus(null);\n    },\n    style: {\n      transform: translate(gridDimensions.left, gridDimensions.top)\n    }\n  }, polygons.map(function (points, i) {\n    var index = points.index;\n    var datum = voronoiData[index].datum;\n    var path = delaunayLineFn(points) || undefined;\n    return /*#__PURE__*/React.createElement(\"path\", {\n      key: i,\n      d: path,\n      className: 'action-voronoi',\n      onMouseEnter: function onMouseEnter() {\n        return handleFocus(datum);\n      },\n      style: {\n        fill: getOptions().dark ? '#ffffff33' : 'rgba(0,0,0,0.2)',\n        strokeWidth: 1,\n        stroke: getOptions().dark ? 'white' : 'black',\n        opacity: getOptions().showVoronoi ? 1 : 0\n      }\n    });\n  }));\n}\n\nfunction getX(datum, primaryAxis, secondaryAxis, useBarPx) {\n  return primaryAxis.isVertical ? getSecondary(datum, secondaryAxis) : getPrimary(datum, primaryAxis, secondaryAxis, useBarPx);\n}\n\nfunction getY(datum, primaryAxis, secondaryAxis, useBarPx) {\n  return primaryAxis.isVertical ? getPrimary(datum, primaryAxis, secondaryAxis, useBarPx) : getSecondary(datum, secondaryAxis);\n}\n\nfunction getPrimary(datum, primaryAxis, secondaryAxis, useBarPx) {\n  var _primaryAxis$scale;\n\n  var primary = (_primaryAxis$scale = primaryAxis.scale(datum.primaryValue)) != null ? _primaryAxis$scale : NaN;\n\n  if (useBarPx && secondaryAxis.elementType === 'bar') {\n    if (!secondaryAxis.stacked) {\n      var _ref4;\n\n      primary += (_ref4 = primaryAxis.seriesBandScale(datum.seriesIndex)) != null ? _ref4 : NaN;\n      primary += getPrimaryLength(datum, primaryAxis, secondaryAxis) / 2;\n    } else {\n      primary += getPrimaryGroupLength(datum, primaryAxis) / 2;\n    }\n  }\n\n  return primary;\n}\n\nfunction getSecondary(datum, secondaryAxis) {\n  var _secondaryAxis$scale5;\n\n  if (secondaryAxis.stacked) {\n    var _secondaryAxis$scale4, _datum$stackData$, _datum$stackData4;\n\n    return (_secondaryAxis$scale4 = secondaryAxis.scale((_datum$stackData$ = (_datum$stackData4 = datum.stackData) == null ? void 0 : _datum$stackData4[1]) != null ? _datum$stackData$ : NaN)) != null ? _secondaryAxis$scale4 : NaN;\n  }\n\n  return (_secondaryAxis$scale5 = secondaryAxis.scale(datum.secondaryValue)) != null ? _secondaryAxis$scale5 : NaN;\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}