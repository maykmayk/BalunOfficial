{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { stack as d3Stack } from 'd3-shape';\nimport { getStackingGroups } from '../internals/stackSeries';\nimport defaultizeValueFormatter from '../internals/defaultizeValueFormatter';\nlet warnOnce = false;\nconst formatter = (params, dataset) => {\n  var _ref;\n  const {\n    seriesOrder,\n    series\n  } = params;\n  const stackingGroups = getStackingGroups(params);\n\n  // Create a data set with format adapted to d3\n  const d3Dataset = (_ref = dataset) != null ? _ref : [];\n  seriesOrder.forEach(id => {\n    const data = series[id].data;\n    if (data !== undefined) {\n      data.forEach((value, index) => {\n        if (d3Dataset.length <= index) {\n          d3Dataset.push({\n            [id]: value\n          });\n        } else {\n          d3Dataset[index][id] = value;\n        }\n      });\n    } else if (dataset === undefined) {\n      throw new Error([\"MUI-X-Charts: bar series with id='\".concat(id, \"' has no data.\"), 'Either provide a data property to the series or use the dataset prop.'].join('\\n'));\n    }\n  });\n  const completedSeries = {};\n  stackingGroups.forEach(stackingGroup => {\n    const {\n      ids,\n      stackingOffset,\n      stackingOrder\n    } = stackingGroup;\n    // Get stacked values, and derive the domain\n    const stackedSeries = d3Stack().keys(ids.map(id => {\n      // Use dataKey if needed and available\n      const dataKey = series[id].dataKey;\n      return series[id].data === undefined && dataKey !== undefined ? dataKey : id;\n    })).value((d, key) => {\n      var _d$key;\n      return (_d$key = d[key]) != null ? _d$key : 0;\n    }) // defaultize null value to 0\n    .order(stackingOrder).offset(stackingOffset)(d3Dataset);\n    ids.forEach((id, index) => {\n      const dataKey = series[id].dataKey;\n      completedSeries[id] = _extends({\n        layout: 'vertical'\n      }, series[id], {\n        data: dataKey ? dataset.map(data => {\n          const value = data[dataKey];\n          if (typeof value !== 'number') {\n            if (process.env.NODE_ENV !== 'production' && !warnOnce && value !== null) {\n              warnOnce = true;\n              console.error([\"MUI-X charts: your dataset key \\\"\".concat(dataKey, \"\\\" is used for plotting bars, but contains nonnumerical elements.\"), 'Bar plots only support numbers and null values.']);\n            }\n            return 0;\n          }\n          return value;\n        }) : series[id].data,\n        stackedData: stackedSeries[index].map(_ref2 => {\n          let [a, b] = _ref2;\n          return [a, b];\n        })\n      });\n    });\n  });\n  return {\n    seriesOrder,\n    stackingGroups,\n    series: defaultizeValueFormatter(completedSeries, v => v == null ? void 0 : v.toLocaleString())\n  };\n};\nexport default formatter;","map":{"version":3,"names":["_extends","stack","d3Stack","getStackingGroups","defaultizeValueFormatter","warnOnce","formatter","params","dataset","_ref","seriesOrder","series","stackingGroups","d3Dataset","forEach","id","data","undefined","value","index","length","push","Error","concat","join","completedSeries","stackingGroup","ids","stackingOffset","stackingOrder","stackedSeries","keys","map","dataKey","d","key","_d$key","order","offset","layout","process","env","NODE_ENV","console","error","stackedData","_ref2","a","b","v","toLocaleString"],"sources":["/Users/lebon/Desktop/el_balon/node_modules/@mui/x-charts/esm/BarChart/formatter.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { stack as d3Stack } from 'd3-shape';\nimport { getStackingGroups } from '../internals/stackSeries';\nimport defaultizeValueFormatter from '../internals/defaultizeValueFormatter';\nlet warnOnce = false;\nconst formatter = (params, dataset) => {\n  var _ref;\n  const {\n    seriesOrder,\n    series\n  } = params;\n  const stackingGroups = getStackingGroups(params);\n\n  // Create a data set with format adapted to d3\n  const d3Dataset = (_ref = dataset) != null ? _ref : [];\n  seriesOrder.forEach(id => {\n    const data = series[id].data;\n    if (data !== undefined) {\n      data.forEach((value, index) => {\n        if (d3Dataset.length <= index) {\n          d3Dataset.push({\n            [id]: value\n          });\n        } else {\n          d3Dataset[index][id] = value;\n        }\n      });\n    } else if (dataset === undefined) {\n      throw new Error([`MUI-X-Charts: bar series with id='${id}' has no data.`, 'Either provide a data property to the series or use the dataset prop.'].join('\\n'));\n    }\n  });\n  const completedSeries = {};\n  stackingGroups.forEach(stackingGroup => {\n    const {\n      ids,\n      stackingOffset,\n      stackingOrder\n    } = stackingGroup;\n    // Get stacked values, and derive the domain\n    const stackedSeries = d3Stack().keys(ids.map(id => {\n      // Use dataKey if needed and available\n      const dataKey = series[id].dataKey;\n      return series[id].data === undefined && dataKey !== undefined ? dataKey : id;\n    })).value((d, key) => {\n      var _d$key;\n      return (_d$key = d[key]) != null ? _d$key : 0;\n    }) // defaultize null value to 0\n    .order(stackingOrder).offset(stackingOffset)(d3Dataset);\n    ids.forEach((id, index) => {\n      const dataKey = series[id].dataKey;\n      completedSeries[id] = _extends({\n        layout: 'vertical'\n      }, series[id], {\n        data: dataKey ? dataset.map(data => {\n          const value = data[dataKey];\n          if (typeof value !== 'number') {\n            if (process.env.NODE_ENV !== 'production' && !warnOnce && value !== null) {\n              warnOnce = true;\n              console.error([`MUI-X charts: your dataset key \"${dataKey}\" is used for plotting bars, but contains nonnumerical elements.`, 'Bar plots only support numbers and null values.']);\n            }\n            return 0;\n          }\n          return value;\n        }) : series[id].data,\n        stackedData: stackedSeries[index].map(([a, b]) => [a, b])\n      });\n    });\n  });\n  return {\n    seriesOrder,\n    stackingGroups,\n    series: defaultizeValueFormatter(completedSeries, v => v == null ? void 0 : v.toLocaleString())\n  };\n};\nexport default formatter;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}