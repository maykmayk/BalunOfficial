{"ast":null,"code":"import _createForOfIteratorHelperLoose from \"@babel/runtime/helpers/esm/createForOfIteratorHelperLoose\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nvar _excluded = [\"options\", \"className\", \"style\"];\nimport { groups, sort, sum } from 'd3-array';\nimport React from 'react';\nimport useGetLatest from '../hooks/useGetLatest';\nimport useIsomorphicLayoutEffect from '../hooks/useIsomorphicLayoutEffect';\nimport Bar, { getPrimary } from '../seriesTypes/Bar';\nimport Line from '../seriesTypes/Line'; //\n\nimport { materializeStyles, getSeriesStatus, getDatumStatus } from '../utils/Utils';\nimport buildAxisLinear from '../utils/buildAxis.linear';\nimport { ChartContextProvider } from '../utils/chartContext';\nimport AxisLinear from './AxisLinear'; // import Brush from './Brush'\n\nimport Cursors from './Cursors';\nimport Tooltip, { defaultTooltip } from './Tooltip';\nimport Voronoi from './Voronoi'; //\n//\n\nvar defaultColorScheme = ['#0f83ab', '#faa43a', '#fd6868', '#53cfc9', '#a2d925', '#decf3f', '#734fe9', '#cd82ad', '#006d92', '#de7c00', '#f33232', '#3f9a80', '#53c200', '#d7af00', '#4c26c9', '#d44d99'];\nvar defaultPadding = 5;\nfunction defaultChartOptions(options) {\n  var _options$initialWidth, _options$initialHeigh, _options$getSeriesOrd, _options$interactionM, _options$showVoronoi, _options$defaultColor, _options$useIntersect, _options$intersection, _options$primaryCurso, _options$secondaryCur, _options$padding;\n  return _extends({}, options, {\n    initialWidth: (_options$initialWidth = options.initialWidth) != null ? _options$initialWidth : 300,\n    initialHeight: (_options$initialHeigh = options.initialHeight) != null ? _options$initialHeigh : 200,\n    getSeriesOrder: (_options$getSeriesOrd = options.getSeriesOrder) != null ? _options$getSeriesOrd : function (series) {\n      return series;\n    },\n    interactionMode: (_options$interactionM = options.interactionMode) != null ? _options$interactionM : 'primary',\n    showVoronoi: (_options$showVoronoi = options.showVoronoi) != null ? _options$showVoronoi : false,\n    defaultColors: (_options$defaultColor = options.defaultColors) != null ? _options$defaultColor : defaultColorScheme,\n    useIntersectionObserver: (_options$useIntersect = options.useIntersectionObserver) != null ? _options$useIntersect : false,\n    intersectionObserverRootMargin: (_options$intersection = options.intersectionObserverRootMargin) != null ? _options$intersection : '1000px',\n    primaryCursor: (_options$primaryCurso = options.primaryCursor) != null ? _options$primaryCurso : true,\n    secondaryCursor: (_options$secondaryCur = options.secondaryCursor) != null ? _options$secondaryCur : true,\n    padding: (_options$padding = options.padding) != null ? _options$padding : defaultPadding\n  });\n}\nexport function Chart(_ref) {\n  var userOptions = _ref.options,\n    className = _ref.className,\n    _ref$style = _ref.style,\n    style = _ref$style === void 0 ? {} : _ref$style,\n    rest = _objectWithoutPropertiesLoose(_ref, _excluded);\n  var options = defaultChartOptions(userOptions);\n  var _React$useState = React.useState(null),\n    chartElement = _React$useState[0],\n    setContainerElement = _React$useState[1];\n  var containerEl = chartElement == null ? void 0 : chartElement.parentElement;\n  var nearestScrollableParent = React.useMemo(function () {\n    var run = function run(el) {\n      if (!el) {\n        return null;\n      }\n      var grandParent = el.parentElement;\n      if (!grandParent) {\n        return null;\n      }\n      if (grandParent.scrollHeight > grandParent.clientHeight) {\n        var _window$getComputedSt = window.getComputedStyle(grandParent),\n          overflow = _window$getComputedSt.overflow;\n        if (overflow.includes('scroll') || overflow.includes('auto')) {\n          return grandParent;\n        }\n      }\n      return run(grandParent);\n    };\n    return run(containerEl);\n  }, [containerEl]);\n  var _React$useState2 = React.useState({\n      width: options.initialWidth,\n      height: options.initialHeight\n    }),\n    _React$useState2$ = _React$useState2[0],\n    width = _React$useState2$.width,\n    height = _React$useState2$.height,\n    setDims = _React$useState2[1];\n  useIsomorphicLayoutEffect(function () {\n    if (containerEl) {\n      var computed = window.getComputedStyle(containerEl);\n      if (!['relative', 'absolute', 'fixed'].includes(computed.position)) {\n        containerEl.style.position = 'relative';\n      }\n    }\n  }, [containerEl]);\n  React.useEffect(function () {\n    if (!containerEl) {\n      return;\n    }\n    var observer = new ResizeObserver(function () {\n      var rect = containerEl == null ? void 0 : containerEl.getBoundingClientRect();\n      var styles = window.getComputedStyle(containerEl);\n      if (rect) {\n        setDims({\n          width: rect.width - parseInt(styles.borderLeftWidth) - parseInt(styles.borderRightWidth),\n          height: rect.height - parseInt(styles.borderTopWidth) - parseInt(styles.borderBottomWidth)\n        });\n      }\n    });\n    observer.observe(containerEl);\n    return function () {\n      observer.unobserve(containerEl);\n    };\n  }, [containerEl]);\n  var _React$useState3 = React.useState(true),\n    isIntersecting = _React$useState3[0],\n    setIsIntersecting = _React$useState3[1];\n  React.useEffect(function () {\n    if (!containerEl || !options.useIntersectionObserver) return;\n    var observer = new IntersectionObserver(function (entries) {\n      for (var _iterator = _createForOfIteratorHelperLoose(entries), _step; !(_step = _iterator()).done;) {\n        var entry = _step.value;\n        if (entry.isIntersecting) {\n          setIsIntersecting(true);\n        } else {\n          setIsIntersecting(false);\n        }\n      }\n    }, {\n      root: nearestScrollableParent,\n      rootMargin: options.intersectionObserverRootMargin\n    });\n    observer.observe(containerEl);\n    return function () {\n      observer.unobserve(containerEl);\n    };\n  }, [containerEl, nearestScrollableParent, options.intersectionObserverRootMargin, options.useIntersectionObserver]);\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    ref: setContainerElement\n  }, rest, {\n    className: \"ReactChart \" + (className || ''),\n    style: _extends({\n      fontFamily: 'sans-serif'\n    }, style, {\n      position: 'absolute',\n      width: width,\n      height: height\n    })\n  }), options.useIntersectionObserver && !isIntersecting ? null : /*#__PURE__*/React.createElement(ChartInner, {\n    options: options,\n    width: width,\n    height: height\n  }));\n}\nfunction ChartInner(_ref2) {\n  var _options2, _options$renderSVG;\n  var options = _ref2.options,\n    width = _ref2.width,\n    height = _ref2.height;\n  if (!options.primaryAxis) {\n    throw new Error('A primaryAxis is required');\n  }\n  if (!options.secondaryAxes.length) {\n    throw new Error('At least one secondaryAxis is required');\n  }\n  var primaryAxisOptions = React.useMemo(function () {\n    var firstValue = getFirstDefinedValue(options.primaryAxis, options.data);\n    var axisOptions = axisOptionsWithScaleType(options.primaryAxis, firstValue);\n    return _extends({\n      position: 'bottom'\n    }, axisOptions);\n  }, [options.data, options.primaryAxis]);\n  var secondaryAxesOptions = React.useMemo(function () {\n    return options.secondaryAxes.map(function (secondaryAxis, i) {\n      var firstValue = getFirstDefinedValue(secondaryAxis, options.data);\n      var axisOptions = axisOptionsWithScaleType(secondaryAxis, firstValue);\n      if (!axisOptions.elementType) {\n        if (primaryAxisOptions.scaleType === 'band') {\n          axisOptions.elementType = 'bar';\n        } else if (axisOptions.stacked) {\n          axisOptions.elementType = 'area';\n        }\n      }\n      if (typeof axisOptions.stacked === 'undefined' && axisOptions.elementType && ['area'].includes(axisOptions.elementType)) {\n        axisOptions.stacked = true;\n      }\n      return _extends({\n        position: !i ? 'left' : 'right'\n      }, axisOptions);\n    });\n  }, [options.data, options.secondaryAxes, primaryAxisOptions]); // Resolve Tooltip Option\n\n  var tooltipOptions = React.useMemo(function () {\n    var _options, _tooltipOptions$group;\n    var tooltipOptions = defaultTooltip((_options = options) == null ? void 0 : _options.tooltip);\n    tooltipOptions.groupingMode = (_tooltipOptions$group = tooltipOptions.groupingMode) != null ? _tooltipOptions$group : function () {\n      if (options.interactionMode === 'closest') {\n        return 'single';\n      }\n      return 'primary';\n    }();\n    return tooltipOptions;\n  }, [options.interactionMode, (_options2 = options) == null ? void 0 : _options2.tooltip]);\n  options = _extends({}, options, {\n    tooltip: tooltipOptions\n  }); //\n\n  var svgRef = React.useRef(null);\n  var getOptions = useGetLatest(_extends({}, options, {\n    tooltip: tooltipOptions\n  }));\n  var axisDimensionsState = React.useState({\n    left: {},\n    right: {},\n    top: {},\n    bottom: {}\n  });\n  var axisDimensions = axisDimensionsState[0];\n  var isInteractingState = React.useState(false);\n  var isInteracting = isInteractingState[0];\n  var focusedDatumState = React.useState(null);\n  var focusedDatum = focusedDatumState[0]; // useAtom<Datum<TDatum> | null>(focusedDatumAtom)\n\n  var gridDimensions = React.useMemo(function () {\n    var _options$padding$left, _options$padding$righ, _options$padding$bott, _options$padding$top;\n    var padding = {\n      left: typeof options.padding === 'object' ? (_options$padding$left = options.padding.left) != null ? _options$padding$left : defaultPadding : options.padding,\n      right: typeof options.padding === 'object' ? (_options$padding$righ = options.padding.right) != null ? _options$padding$righ : defaultPadding : options.padding,\n      bottom: typeof options.padding === 'object' ? (_options$padding$bott = options.padding.bottom) != null ? _options$padding$bott : defaultPadding : options.padding,\n      top: typeof options.padding === 'object' ? (_options$padding$top = options.padding.top) != null ? _options$padding$top : defaultPadding : options.padding\n    };\n    var left = padding.left + Math.max(sum(Object.values(axisDimensions.left), function (d) {\n      return d.width;\n    }), sum(Object.values(axisDimensions.top), function (d) {\n      return d.paddingLeft;\n    }), sum(Object.values(axisDimensions.bottom), function (d) {\n      return d.paddingLeft;\n    }));\n    var top = padding.top + Math.max(sum(Object.values(axisDimensions.top), function (d) {\n      return d.height;\n    }), sum(Object.values(axisDimensions.left), function (d) {\n      return d.paddingTop;\n    }), sum(Object.values(axisDimensions.right), function (d) {\n      return d.paddingTop;\n    }));\n    var right = padding.right + Math.max(sum(Object.values(axisDimensions.right), function (d) {\n      return d.width;\n    }), sum(Object.values(axisDimensions.top), function (d) {\n      return d.paddingRight;\n    }), sum(Object.values(axisDimensions.bottom), function (d) {\n      return d.paddingRight;\n    }));\n    var bottom = padding.bottom + Math.max(sum(Object.values(axisDimensions.bottom), function (d) {\n      return d.height;\n    }), sum(Object.values(axisDimensions.left), function (d) {\n      return d.paddingBottom;\n    }), sum(Object.values(axisDimensions.right), function (d) {\n      return d.paddingBottom;\n    }));\n    var gridWidth = Math.max(0, width - left - right);\n    var gridHeight = Math.max(0, height - top - bottom);\n    return {\n      left: left,\n      top: top,\n      right: right,\n      bottom: bottom,\n      width: gridWidth,\n      height: gridHeight\n    };\n  }, [options.padding, axisDimensions.left, axisDimensions.top, axisDimensions.bottom, axisDimensions.right, width, height]);\n  var series = React.useMemo(function () {\n    var series = [];\n    var indicesByAxisId = {};\n    for (var seriesIndex = 0; seriesIndex < options.data.length; seriesIndex++) {\n      var _originalSeries$id, _originalSeries$label, _indicesByAxisId$;\n      var originalSeries = options.data[seriesIndex];\n      var seriesId = (_originalSeries$id = originalSeries.id) != null ? _originalSeries$id : seriesIndex + '';\n      var seriesLabel = (_originalSeries$label = originalSeries.label) != null ? _originalSeries$label : \"Series \" + (seriesIndex + 1);\n      var secondaryAxisId = originalSeries.secondaryAxisId;\n      var originalDatums = originalSeries.data;\n      var datums = [];\n      indicesByAxisId[\"\" + secondaryAxisId] = (_indicesByAxisId$ = indicesByAxisId[\"\" + secondaryAxisId]) != null ? _indicesByAxisId$ : 0;\n      var seriesIndexPerAxis = indicesByAxisId[\"\" + secondaryAxisId];\n      indicesByAxisId[\"\" + secondaryAxisId]++;\n      for (var datumIndex = 0; datumIndex < originalDatums.length; datumIndex++) {\n        var originalDatum = originalDatums[datumIndex];\n        datums[datumIndex] = {\n          originalSeries: originalSeries,\n          seriesIndex: seriesIndex,\n          seriesIndexPerAxis: seriesIndexPerAxis,\n          seriesId: seriesId,\n          seriesLabel: seriesLabel,\n          secondaryAxisId: secondaryAxisId,\n          index: datumIndex,\n          originalDatum: originalDatum\n        };\n      }\n      series[seriesIndex] = {\n        originalSeries: originalSeries,\n        index: seriesIndex,\n        id: seriesId,\n        label: seriesLabel,\n        indexPerAxis: seriesIndexPerAxis,\n        secondaryAxisId: secondaryAxisId,\n        datums: datums\n      };\n    }\n    return series;\n  }, [options.data]);\n  var allDatums = React.useMemo(function () {\n    return series.map(function (s) {\n      return s.datums;\n    }).flat(2);\n  }, [series]);\n  var primaryAxis = React.useMemo(function () {\n    return buildAxisLinear(true, primaryAxisOptions, series, allDatums, gridDimensions, width, height);\n  }, [allDatums, gridDimensions, height, primaryAxisOptions, series, width]);\n  var secondaryAxes = React.useMemo(function () {\n    return secondaryAxesOptions.map(function (secondaryAxis) {\n      return buildAxisLinear(false, secondaryAxis, series, allDatums, gridDimensions, width, height);\n    });\n  }, [allDatums, gridDimensions, height, secondaryAxesOptions, series, width]);\n  var _React$useMemo = React.useMemo(function () {\n      if (!isInteracting) {\n        return [new Map(), new Map()];\n      }\n      var datumsByInteractionGroup = new Map();\n      var datumsByTooltipGroup = new Map();\n      var allBarAndNotStacked = secondaryAxes.every(function (d) {\n        return d.elementType === 'bar' && !d.stacked;\n      });\n      var getInteractionPrimary = function getInteractionPrimary(datum) {\n        if (allBarAndNotStacked) {\n          var secondaryAxis = secondaryAxes.find(function (d) {\n            return d.id === datum.secondaryAxisId;\n          });\n          if (secondaryAxis.elementType === 'bar' && !secondaryAxis.stacked) {\n            return getPrimary(datum, primaryAxis, secondaryAxis);\n          }\n        }\n        return datum.primaryValue;\n      };\n      var getInteractionKey = function getInteractionKey(datum) {\n        return \"\" + getInteractionPrimary(datum);\n      };\n      var getTooltipKey = function getTooltipKey(datum) {\n        return \"\" + datum.primaryValue;\n      };\n      if (options.interactionMode === 'closest') {\n        getInteractionKey = function getInteractionKey(datum) {\n          return getInteractionPrimary(datum) + \"_\" + datum.secondaryValue;\n        };\n      }\n      if (tooltipOptions.groupingMode === 'single') {\n        getTooltipKey = function getTooltipKey(datum) {\n          return datum.primaryValue + \"_\" + datum.secondaryValue;\n        };\n      } else if (tooltipOptions.groupingMode === 'secondary') {\n        getTooltipKey = function getTooltipKey(datum) {\n          return \"\" + datum.secondaryValue;\n        };\n      } else if (tooltipOptions.groupingMode === 'series') {\n        getTooltipKey = function getTooltipKey(datum) {\n          return \"\" + datum.seriesIndex;\n        };\n      }\n      allDatums.forEach(function (datum) {\n        var interactionKey = getInteractionKey(datum);\n        var tooltipKey = getTooltipKey(datum);\n        if (!datumsByInteractionGroup.has(interactionKey)) {\n          datumsByInteractionGroup.set(interactionKey, []);\n        }\n        if (!datumsByTooltipGroup.has(tooltipKey)) {\n          datumsByTooltipGroup.set(tooltipKey, []);\n        }\n        datumsByInteractionGroup.get(interactionKey).push(datum);\n        datumsByTooltipGroup.get(tooltipKey).push(datum);\n      });\n      datumsByInteractionGroup.forEach(function (value, key) {\n        datumsByInteractionGroup.set(key, sortDatumsBySecondaryPx(value, secondaryAxes));\n      });\n      datumsByTooltipGroup.forEach(function (value, key) {\n        datumsByTooltipGroup.set(key, sortDatumsBySecondaryPx(value, secondaryAxes));\n      });\n      allDatums.forEach(function (datum) {\n        var interactionKey = getInteractionKey(datum);\n        var tooltipKey = getTooltipKey(datum);\n        datum.interactiveGroup = datumsByInteractionGroup.get(interactionKey);\n        datum.tooltipGroup = datumsByTooltipGroup.get(tooltipKey);\n      });\n      return [datumsByInteractionGroup, datumsByTooltipGroup];\n    }, [isInteracting, allDatums, options.interactionMode, primaryAxis, secondaryAxes, tooltipOptions.groupingMode]),\n    datumsByInteractionGroup = _React$useMemo[0],\n    datumsByTooltipGroup = _React$useMemo[1];\n  var getSeriesStatusStyle = React.useCallback(function (series, focusedDatum) {\n    var _getOptions$getSeries, _getOptions$getSeries2, _getOptions;\n    var base = {\n      color: getOptions().defaultColors[series.index % getOptions().defaultColors.length]\n    };\n    var status = getSeriesStatus(series, focusedDatum);\n    var statusStyles = (_getOptions$getSeries = (_getOptions$getSeries2 = (_getOptions = getOptions()).getSeriesStyle) == null ? void 0 : _getOptions$getSeries2.call(_getOptions, series, status)) != null ? _getOptions$getSeries : {};\n    series.style = materializeStyles(statusStyles, base);\n    return series.style;\n  }, [getOptions]);\n  var getDatumStatusStyle = React.useCallback(function (datum, focusedDatum) {\n    var _series$datum$seriesI, _getOptions$getDatumS, _getOptions$getDatumS2, _getOptions2;\n    var base = _extends({}, (_series$datum$seriesI = series[datum.seriesIndex]) == null ? void 0 : _series$datum$seriesI.style, {\n      color: getOptions().defaultColors[datum.seriesIndex % getOptions().defaultColors.length]\n    });\n    var status = getDatumStatus(datum, focusedDatum);\n    var statusStyles = (_getOptions$getDatumS = (_getOptions$getDatumS2 = (_getOptions2 = getOptions()).getDatumStyle) == null ? void 0 : _getOptions$getDatumS2.call(_getOptions2, datum, status)) != null ? _getOptions$getDatumS : {};\n    datum.style = materializeStyles(statusStyles, base);\n    return datum.style;\n  }, [getOptions, series]); // Reverse the stack order for proper z-indexing\n\n  var orderedSeries = React.useMemo(function () {\n    var reversedSeries = [].concat(series).reverse();\n    return getOptions().getSeriesOrder(reversedSeries);\n  }, [getOptions, series]);\n  useIsomorphicLayoutEffect(function () {\n    if (svgRef.current && svgRef.current.parentElement && !svgRef.current.parentElement.style.position) {\n      svgRef.current.parentElement.style.position = 'relative';\n    }\n  });\n  var contextValue = {\n    getOptions: getOptions,\n    gridDimensions: gridDimensions,\n    primaryAxis: primaryAxis,\n    secondaryAxes: secondaryAxes,\n    series: series,\n    orderedSeries: orderedSeries,\n    datumsByInteractionGroup: datumsByInteractionGroup,\n    datumsByTooltipGroup: datumsByTooltipGroup,\n    width: width,\n    height: height,\n    getSeriesStatusStyle: getSeriesStatusStyle,\n    getDatumStatusStyle: getDatumStatusStyle,\n    axisDimensionsState: axisDimensionsState,\n    focusedDatumState: focusedDatumState,\n    svgRef: svgRef,\n    isInteractingState: isInteractingState\n  };\n  var seriesByAxisId = React.useMemo(function () {\n    return sort(groups(orderedSeries, function (d) {\n      return d.secondaryAxisId;\n    }), function (_ref3) {\n      var key = _ref3[0];\n      return secondaryAxes.findIndex(function (axis) {\n        return axis.id === key;\n      });\n    });\n  }, [orderedSeries, secondaryAxes]); // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  var getSeriesInfo = function getSeriesInfo() {\n    return {\n      primaryAxis: primaryAxis,\n      secondaryAxes: secondaryAxes,\n      seriesByAxisId: seriesByAxisId\n    };\n  };\n  var getMemoizedSeriesInfo = React.useCallback(function () {\n    return {\n      primaryAxis: primaryAxis,\n      secondaryAxes: secondaryAxes,\n      seriesByAxisId: seriesByAxisId\n    };\n  }, [primaryAxis, secondaryAxes, seriesByAxisId]);\n  if (options.memoizeSeries) {\n    getSeriesInfo = getMemoizedSeriesInfo;\n  }\n  var seriesEl = React.useMemo(function () {\n    var _getSeriesInfo = getSeriesInfo(),\n      primaryAxis = _getSeriesInfo.primaryAxis,\n      secondaryAxes = _getSeriesInfo.secondaryAxes,\n      seriesByAxisId = _getSeriesInfo.seriesByAxisId;\n    return seriesByAxisId.map(function (_ref4) {\n      var axisId = _ref4[0],\n        series = _ref4[1];\n      var secondaryAxis = secondaryAxes.find(function (d) {\n        return d.id === axisId;\n      });\n      if (!secondaryAxis) {\n        return null;\n      }\n      var elementType = secondaryAxis.elementType;\n      var Component = function () {\n        if (elementType === 'line' || elementType === 'bubble' || elementType === 'area') {\n          return Line;\n        }\n        if (elementType === 'bar') {\n          return Bar;\n        }\n        throw new Error('Invalid elementType');\n      }();\n      if (primaryAxis.isInvalid || secondaryAxis.isInvalid) {\n        return null;\n      }\n      return /*#__PURE__*/React.createElement(Component, {\n        key: axisId != null ? axisId : '__default__',\n        primaryAxis: primaryAxis,\n        secondaryAxis: secondaryAxis,\n        series: series\n      });\n    });\n  }, [getSeriesInfo]);\n  return /*#__PURE__*/React.createElement(ChartContextProvider, {\n    value: useGetLatest(contextValue)\n  }, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"svg\", {\n    ref: svgRef,\n    style: {\n      width: width,\n      height: height,\n      overflow: options.brush ? 'hidden' : 'visible'\n    },\n    onClick: function onClick(e) {\n      return options.onClickDatum == null ? void 0 : options.onClickDatum(focusedDatum, e);\n    },\n    onMouseEnter: function onMouseEnter() {\n      isInteractingState[1](true);\n    },\n    onMouseLeave: function onMouseLeave() {\n      isInteractingState[1](false);\n    }\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    className: \"axes\"\n  }, [primaryAxis].concat(secondaryAxes).map(function (axis) {\n    return /*#__PURE__*/React.createElement(AxisLinear, _extends({\n      key: [axis.position, axis.id].join('')\n    }, axis));\n  })), /*#__PURE__*/React.createElement(\"g\", {\n    className: \"Series\",\n    style: {\n      pointerEvents: 'none'\n    }\n  }, seriesEl), /*#__PURE__*/React.createElement(Voronoi, null), (_options$renderSVG = options.renderSVG == null ? void 0 : options.renderSVG()) != null ? _options$renderSVG : null), /*#__PURE__*/React.createElement(Cursors, null), /*#__PURE__*/React.createElement(Tooltip, null)));\n}\nfunction getFirstDefinedValue(options, data) {\n  var firstDefinedValue;\n  data.some(function (serie) {\n    return serie.data.some(function (originalDatum) {\n      var value = options.getValue(originalDatum);\n      if (value !== null && typeof value !== 'undefined') {\n        firstDefinedValue = value;\n        return true;\n      }\n    });\n  });\n  return firstDefinedValue;\n}\nfunction axisOptionsWithScaleType(options, firstValue) {\n  var scaleType = options.scaleType;\n  if (!options.scaleType) {\n    if (typeof firstValue === 'number') {\n      scaleType = 'linear';\n    } else if (typeof (firstValue == null ? void 0 : firstValue.getMonth) === 'function') {\n      scaleType = 'time';\n    } else if (typeof firstValue === 'string' || typeof firstValue === 'boolean') {\n      scaleType = 'band';\n    } else {\n      throw new Error('Invalid scale type: Unable to infer type from data');\n    }\n  }\n  return _extends({}, options, {\n    scaleType: scaleType\n  });\n}\nfunction sortDatumsBySecondaryPx(datums, secondaryAxes) {\n  if (secondaryAxes.every(function (d) {\n    return d.stacked;\n  })) {\n    var differingInverts = secondaryAxes.some(function (d) {\n      return d.invert;\n    }) && secondaryAxes.some(function (d) {\n      return !d.invert;\n    });\n    if (!differingInverts) {\n      return datums;\n    }\n  }\n  return [].concat(datums).sort(function (a, b) {\n    var _aAxis$scale, _a$stackData, _bAxis$scale, _b$stackData;\n    var aAxis = secondaryAxes.find(function (d) {\n      return d.id === a.secondaryAxisId;\n    });\n    var bAxis = secondaryAxes.find(function (d) {\n      return d.id === b.secondaryAxisId;\n    });\n    var aPx = (_aAxis$scale = aAxis == null ? void 0 : aAxis.scale(aAxis.stacked ? (_a$stackData = a.stackData) == null ? void 0 : _a$stackData[1] : a.secondaryValue)) != null ? _aAxis$scale : NaN;\n    var bPx = (_bAxis$scale = bAxis == null ? void 0 : bAxis.scale(bAxis.stacked ? (_b$stackData = b.stackData) == null ? void 0 : _b$stackData[1] : b.secondaryValue)) != null ? _bAxis$scale : NaN;\n    return aPx > bPx ? 1 : aPx < bPx ? -1 : 0;\n  });\n}","map":{"version":3,"names":["_createForOfIteratorHelperLoose","_objectWithoutPropertiesLoose","_extends","_excluded","groups","sort","sum","React","useGetLatest","useIsomorphicLayoutEffect","Bar","getPrimary","Line","materializeStyles","getSeriesStatus","getDatumStatus","buildAxisLinear","ChartContextProvider","AxisLinear","Cursors","Tooltip","defaultTooltip","Voronoi","defaultColorScheme","defaultPadding","defaultChartOptions","options","_options$initialWidth","_options$initialHeigh","_options$getSeriesOrd","_options$interactionM","_options$showVoronoi","_options$defaultColor","_options$useIntersect","_options$intersection","_options$primaryCurso","_options$secondaryCur","_options$padding","initialWidth","initialHeight","getSeriesOrder","series","interactionMode","showVoronoi","defaultColors","useIntersectionObserver","intersectionObserverRootMargin","primaryCursor","secondaryCursor","padding","Chart","_ref","userOptions","className","_ref$style","style","rest","_React$useState","useState","chartElement","setContainerElement","containerEl","parentElement","nearestScrollableParent","useMemo","run","el","grandParent","scrollHeight","clientHeight","_window$getComputedSt","window","getComputedStyle","overflow","includes","_React$useState2","width","height","_React$useState2$","setDims","computed","position","useEffect","observer","ResizeObserver","rect","getBoundingClientRect","styles","parseInt","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth","observe","unobserve","_React$useState3","isIntersecting","setIsIntersecting","IntersectionObserver","entries","_iterator","_step","done","entry","value","root","rootMargin","createElement","ref","fontFamily","ChartInner","_ref2","_options2","_options$renderSVG","primaryAxis","Error","secondaryAxes","length","primaryAxisOptions","firstValue","getFirstDefinedValue","data","axisOptions","axisOptionsWithScaleType","secondaryAxesOptions","map","secondaryAxis","i","elementType","scaleType","stacked","tooltipOptions","_options","_tooltipOptions$group","tooltip","groupingMode","svgRef","useRef","getOptions","axisDimensionsState","left","right","top","bottom","axisDimensions","isInteractingState","isInteracting","focusedDatumState","focusedDatum","gridDimensions","_options$padding$left","_options$padding$righ","_options$padding$bott","_options$padding$top","Math","max","Object","values","d","paddingLeft","paddingTop","paddingRight","paddingBottom","gridWidth","gridHeight","indicesByAxisId","seriesIndex","_originalSeries$id","_originalSeries$label","_indicesByAxisId$","originalSeries","seriesId","id","seriesLabel","label","secondaryAxisId","originalDatums","datums","seriesIndexPerAxis","datumIndex","originalDatum","index","indexPerAxis","allDatums","s","flat","_React$useMemo","Map","datumsByInteractionGroup","datumsByTooltipGroup","allBarAndNotStacked","every","getInteractionPrimary","datum","find","primaryValue","getInteractionKey","getTooltipKey","secondaryValue","forEach","interactionKey","tooltipKey","has","set","get","push","key","sortDatumsBySecondaryPx","interactiveGroup","tooltipGroup","getSeriesStatusStyle","useCallback","_getOptions$getSeries","_getOptions$getSeries2","_getOptions","base","color","status","statusStyles","getSeriesStyle","call","getDatumStatusStyle","_series$datum$seriesI","_getOptions$getDatumS","_getOptions$getDatumS2","_getOptions2","getDatumStyle","orderedSeries","reversedSeries","concat","reverse","current","contextValue","seriesByAxisId","_ref3","findIndex","axis","getSeriesInfo","getMemoizedSeriesInfo","memoizeSeries","seriesEl","_getSeriesInfo","_ref4","axisId","Component","isInvalid","brush","onClick","e","onClickDatum","onMouseEnter","onMouseLeave","join","pointerEvents","renderSVG","firstDefinedValue","some","serie","getValue","getMonth","differingInverts","invert","a","b","_aAxis$scale","_a$stackData","_bAxis$scale","_b$stackData","aAxis","bAxis","aPx","scale","stackData","NaN","bPx"],"sources":["/Users/lebon/Desktop/el_balon/node_modules/react-charts/es/components/Chart.js"],"sourcesContent":["import _createForOfIteratorHelperLoose from \"@babel/runtime/helpers/esm/createForOfIteratorHelperLoose\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nvar _excluded = [\"options\", \"className\", \"style\"];\nimport { groups, sort, sum } from 'd3-array';\nimport React from 'react';\nimport useGetLatest from '../hooks/useGetLatest';\nimport useIsomorphicLayoutEffect from '../hooks/useIsomorphicLayoutEffect';\nimport Bar, { getPrimary } from '../seriesTypes/Bar';\nimport Line from '../seriesTypes/Line'; //\n\nimport { materializeStyles, getSeriesStatus, getDatumStatus } from '../utils/Utils';\nimport buildAxisLinear from '../utils/buildAxis.linear';\nimport { ChartContextProvider } from '../utils/chartContext';\nimport AxisLinear from './AxisLinear'; // import Brush from './Brush'\n\nimport Cursors from './Cursors';\nimport Tooltip, { defaultTooltip } from './Tooltip';\nimport Voronoi from './Voronoi'; //\n//\n\nvar defaultColorScheme = ['#0f83ab', '#faa43a', '#fd6868', '#53cfc9', '#a2d925', '#decf3f', '#734fe9', '#cd82ad', '#006d92', '#de7c00', '#f33232', '#3f9a80', '#53c200', '#d7af00', '#4c26c9', '#d44d99'];\nvar defaultPadding = 5;\n\nfunction defaultChartOptions(options) {\n  var _options$initialWidth, _options$initialHeigh, _options$getSeriesOrd, _options$interactionM, _options$showVoronoi, _options$defaultColor, _options$useIntersect, _options$intersection, _options$primaryCurso, _options$secondaryCur, _options$padding;\n\n  return _extends({}, options, {\n    initialWidth: (_options$initialWidth = options.initialWidth) != null ? _options$initialWidth : 300,\n    initialHeight: (_options$initialHeigh = options.initialHeight) != null ? _options$initialHeigh : 200,\n    getSeriesOrder: (_options$getSeriesOrd = options.getSeriesOrder) != null ? _options$getSeriesOrd : function (series) {\n      return series;\n    },\n    interactionMode: (_options$interactionM = options.interactionMode) != null ? _options$interactionM : 'primary',\n    showVoronoi: (_options$showVoronoi = options.showVoronoi) != null ? _options$showVoronoi : false,\n    defaultColors: (_options$defaultColor = options.defaultColors) != null ? _options$defaultColor : defaultColorScheme,\n    useIntersectionObserver: (_options$useIntersect = options.useIntersectionObserver) != null ? _options$useIntersect : false,\n    intersectionObserverRootMargin: (_options$intersection = options.intersectionObserverRootMargin) != null ? _options$intersection : '1000px',\n    primaryCursor: (_options$primaryCurso = options.primaryCursor) != null ? _options$primaryCurso : true,\n    secondaryCursor: (_options$secondaryCur = options.secondaryCursor) != null ? _options$secondaryCur : true,\n    padding: (_options$padding = options.padding) != null ? _options$padding : defaultPadding\n  });\n}\n\nexport function Chart(_ref) {\n  var userOptions = _ref.options,\n      className = _ref.className,\n      _ref$style = _ref.style,\n      style = _ref$style === void 0 ? {} : _ref$style,\n      rest = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  var options = defaultChartOptions(userOptions);\n\n  var _React$useState = React.useState(null),\n      chartElement = _React$useState[0],\n      setContainerElement = _React$useState[1];\n\n  var containerEl = chartElement == null ? void 0 : chartElement.parentElement;\n  var nearestScrollableParent = React.useMemo(function () {\n    var run = function run(el) {\n      if (!el) {\n        return null;\n      }\n\n      var grandParent = el.parentElement;\n\n      if (!grandParent) {\n        return null;\n      }\n\n      if (grandParent.scrollHeight > grandParent.clientHeight) {\n        var _window$getComputedSt = window.getComputedStyle(grandParent),\n            overflow = _window$getComputedSt.overflow;\n\n        if (overflow.includes('scroll') || overflow.includes('auto')) {\n          return grandParent;\n        }\n      }\n\n      return run(grandParent);\n    };\n\n    return run(containerEl);\n  }, [containerEl]);\n\n  var _React$useState2 = React.useState({\n    width: options.initialWidth,\n    height: options.initialHeight\n  }),\n      _React$useState2$ = _React$useState2[0],\n      width = _React$useState2$.width,\n      height = _React$useState2$.height,\n      setDims = _React$useState2[1];\n\n  useIsomorphicLayoutEffect(function () {\n    if (containerEl) {\n      var computed = window.getComputedStyle(containerEl);\n\n      if (!['relative', 'absolute', 'fixed'].includes(computed.position)) {\n        containerEl.style.position = 'relative';\n      }\n    }\n  }, [containerEl]);\n  React.useEffect(function () {\n    if (!containerEl) {\n      return;\n    }\n\n    var observer = new ResizeObserver(function () {\n      var rect = containerEl == null ? void 0 : containerEl.getBoundingClientRect();\n      var styles = window.getComputedStyle(containerEl);\n\n      if (rect) {\n        setDims({\n          width: rect.width - parseInt(styles.borderLeftWidth) - parseInt(styles.borderRightWidth),\n          height: rect.height - parseInt(styles.borderTopWidth) - parseInt(styles.borderBottomWidth)\n        });\n      }\n    });\n    observer.observe(containerEl);\n    return function () {\n      observer.unobserve(containerEl);\n    };\n  }, [containerEl]);\n\n  var _React$useState3 = React.useState(true),\n      isIntersecting = _React$useState3[0],\n      setIsIntersecting = _React$useState3[1];\n\n  React.useEffect(function () {\n    if (!containerEl || !options.useIntersectionObserver) return;\n    var observer = new IntersectionObserver(function (entries) {\n      for (var _iterator = _createForOfIteratorHelperLoose(entries), _step; !(_step = _iterator()).done;) {\n        var entry = _step.value;\n\n        if (entry.isIntersecting) {\n          setIsIntersecting(true);\n        } else {\n          setIsIntersecting(false);\n        }\n      }\n    }, {\n      root: nearestScrollableParent,\n      rootMargin: options.intersectionObserverRootMargin\n    });\n    observer.observe(containerEl);\n    return function () {\n      observer.unobserve(containerEl);\n    };\n  }, [containerEl, nearestScrollableParent, options.intersectionObserverRootMargin, options.useIntersectionObserver]);\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    ref: setContainerElement\n  }, rest, {\n    className: \"ReactChart \" + (className || ''),\n    style: _extends({\n      fontFamily: 'sans-serif'\n    }, style, {\n      position: 'absolute',\n      width: width,\n      height: height\n    })\n  }), options.useIntersectionObserver && !isIntersecting ? null : /*#__PURE__*/React.createElement(ChartInner, {\n    options: options,\n    width: width,\n    height: height\n  }));\n}\n\nfunction ChartInner(_ref2) {\n  var _options2, _options$renderSVG;\n\n  var options = _ref2.options,\n      width = _ref2.width,\n      height = _ref2.height;\n\n  if (!options.primaryAxis) {\n    throw new Error('A primaryAxis is required');\n  }\n\n  if (!options.secondaryAxes.length) {\n    throw new Error('At least one secondaryAxis is required');\n  }\n\n  var primaryAxisOptions = React.useMemo(function () {\n    var firstValue = getFirstDefinedValue(options.primaryAxis, options.data);\n    var axisOptions = axisOptionsWithScaleType(options.primaryAxis, firstValue);\n    return _extends({\n      position: 'bottom'\n    }, axisOptions);\n  }, [options.data, options.primaryAxis]);\n  var secondaryAxesOptions = React.useMemo(function () {\n    return options.secondaryAxes.map(function (secondaryAxis, i) {\n      var firstValue = getFirstDefinedValue(secondaryAxis, options.data);\n      var axisOptions = axisOptionsWithScaleType(secondaryAxis, firstValue);\n\n      if (!axisOptions.elementType) {\n        if (primaryAxisOptions.scaleType === 'band') {\n          axisOptions.elementType = 'bar';\n        } else if (axisOptions.stacked) {\n          axisOptions.elementType = 'area';\n        }\n      }\n\n      if (typeof axisOptions.stacked === 'undefined' && axisOptions.elementType && ['area'].includes(axisOptions.elementType)) {\n        axisOptions.stacked = true;\n      }\n\n      return _extends({\n        position: !i ? 'left' : 'right'\n      }, axisOptions);\n    });\n  }, [options.data, options.secondaryAxes, primaryAxisOptions]); // Resolve Tooltip Option\n\n  var tooltipOptions = React.useMemo(function () {\n    var _options, _tooltipOptions$group;\n\n    var tooltipOptions = defaultTooltip((_options = options) == null ? void 0 : _options.tooltip);\n    tooltipOptions.groupingMode = (_tooltipOptions$group = tooltipOptions.groupingMode) != null ? _tooltipOptions$group : function () {\n      if (options.interactionMode === 'closest') {\n        return 'single';\n      }\n\n      return 'primary';\n    }();\n    return tooltipOptions;\n  }, [options.interactionMode, (_options2 = options) == null ? void 0 : _options2.tooltip]);\n  options = _extends({}, options, {\n    tooltip: tooltipOptions\n  }); //\n\n  var svgRef = React.useRef(null);\n  var getOptions = useGetLatest(_extends({}, options, {\n    tooltip: tooltipOptions\n  }));\n  var axisDimensionsState = React.useState({\n    left: {},\n    right: {},\n    top: {},\n    bottom: {}\n  });\n  var axisDimensions = axisDimensionsState[0];\n  var isInteractingState = React.useState(false);\n  var isInteracting = isInteractingState[0];\n  var focusedDatumState = React.useState(null);\n  var focusedDatum = focusedDatumState[0]; // useAtom<Datum<TDatum> | null>(focusedDatumAtom)\n\n  var gridDimensions = React.useMemo(function () {\n    var _options$padding$left, _options$padding$righ, _options$padding$bott, _options$padding$top;\n\n    var padding = {\n      left: typeof options.padding === 'object' ? (_options$padding$left = options.padding.left) != null ? _options$padding$left : defaultPadding : options.padding,\n      right: typeof options.padding === 'object' ? (_options$padding$righ = options.padding.right) != null ? _options$padding$righ : defaultPadding : options.padding,\n      bottom: typeof options.padding === 'object' ? (_options$padding$bott = options.padding.bottom) != null ? _options$padding$bott : defaultPadding : options.padding,\n      top: typeof options.padding === 'object' ? (_options$padding$top = options.padding.top) != null ? _options$padding$top : defaultPadding : options.padding\n    };\n    var left = padding.left + Math.max(sum(Object.values(axisDimensions.left), function (d) {\n      return d.width;\n    }), sum(Object.values(axisDimensions.top), function (d) {\n      return d.paddingLeft;\n    }), sum(Object.values(axisDimensions.bottom), function (d) {\n      return d.paddingLeft;\n    }));\n    var top = padding.top + Math.max(sum(Object.values(axisDimensions.top), function (d) {\n      return d.height;\n    }), sum(Object.values(axisDimensions.left), function (d) {\n      return d.paddingTop;\n    }), sum(Object.values(axisDimensions.right), function (d) {\n      return d.paddingTop;\n    }));\n    var right = padding.right + Math.max(sum(Object.values(axisDimensions.right), function (d) {\n      return d.width;\n    }), sum(Object.values(axisDimensions.top), function (d) {\n      return d.paddingRight;\n    }), sum(Object.values(axisDimensions.bottom), function (d) {\n      return d.paddingRight;\n    }));\n    var bottom = padding.bottom + Math.max(sum(Object.values(axisDimensions.bottom), function (d) {\n      return d.height;\n    }), sum(Object.values(axisDimensions.left), function (d) {\n      return d.paddingBottom;\n    }), sum(Object.values(axisDimensions.right), function (d) {\n      return d.paddingBottom;\n    }));\n    var gridWidth = Math.max(0, width - left - right);\n    var gridHeight = Math.max(0, height - top - bottom);\n    return {\n      left: left,\n      top: top,\n      right: right,\n      bottom: bottom,\n      width: gridWidth,\n      height: gridHeight\n    };\n  }, [options.padding, axisDimensions.left, axisDimensions.top, axisDimensions.bottom, axisDimensions.right, width, height]);\n  var series = React.useMemo(function () {\n    var series = [];\n    var indicesByAxisId = {};\n\n    for (var seriesIndex = 0; seriesIndex < options.data.length; seriesIndex++) {\n      var _originalSeries$id, _originalSeries$label, _indicesByAxisId$;\n\n      var originalSeries = options.data[seriesIndex];\n      var seriesId = (_originalSeries$id = originalSeries.id) != null ? _originalSeries$id : seriesIndex + '';\n      var seriesLabel = (_originalSeries$label = originalSeries.label) != null ? _originalSeries$label : \"Series \" + (seriesIndex + 1);\n      var secondaryAxisId = originalSeries.secondaryAxisId;\n      var originalDatums = originalSeries.data;\n      var datums = [];\n      indicesByAxisId[\"\" + secondaryAxisId] = (_indicesByAxisId$ = indicesByAxisId[\"\" + secondaryAxisId]) != null ? _indicesByAxisId$ : 0;\n      var seriesIndexPerAxis = indicesByAxisId[\"\" + secondaryAxisId];\n      indicesByAxisId[\"\" + secondaryAxisId]++;\n\n      for (var datumIndex = 0; datumIndex < originalDatums.length; datumIndex++) {\n        var originalDatum = originalDatums[datumIndex];\n        datums[datumIndex] = {\n          originalSeries: originalSeries,\n          seriesIndex: seriesIndex,\n          seriesIndexPerAxis: seriesIndexPerAxis,\n          seriesId: seriesId,\n          seriesLabel: seriesLabel,\n          secondaryAxisId: secondaryAxisId,\n          index: datumIndex,\n          originalDatum: originalDatum\n        };\n      }\n\n      series[seriesIndex] = {\n        originalSeries: originalSeries,\n        index: seriesIndex,\n        id: seriesId,\n        label: seriesLabel,\n        indexPerAxis: seriesIndexPerAxis,\n        secondaryAxisId: secondaryAxisId,\n        datums: datums\n      };\n    }\n\n    return series;\n  }, [options.data]);\n  var allDatums = React.useMemo(function () {\n    return series.map(function (s) {\n      return s.datums;\n    }).flat(2);\n  }, [series]);\n  var primaryAxis = React.useMemo(function () {\n    return buildAxisLinear(true, primaryAxisOptions, series, allDatums, gridDimensions, width, height);\n  }, [allDatums, gridDimensions, height, primaryAxisOptions, series, width]);\n  var secondaryAxes = React.useMemo(function () {\n    return secondaryAxesOptions.map(function (secondaryAxis) {\n      return buildAxisLinear(false, secondaryAxis, series, allDatums, gridDimensions, width, height);\n    });\n  }, [allDatums, gridDimensions, height, secondaryAxesOptions, series, width]);\n\n  var _React$useMemo = React.useMemo(function () {\n    if (!isInteracting) {\n      return [new Map(), new Map()];\n    }\n\n    var datumsByInteractionGroup = new Map();\n    var datumsByTooltipGroup = new Map();\n    var allBarAndNotStacked = secondaryAxes.every(function (d) {\n      return d.elementType === 'bar' && !d.stacked;\n    });\n\n    var getInteractionPrimary = function getInteractionPrimary(datum) {\n      if (allBarAndNotStacked) {\n        var secondaryAxis = secondaryAxes.find(function (d) {\n          return d.id === datum.secondaryAxisId;\n        });\n\n        if (secondaryAxis.elementType === 'bar' && !secondaryAxis.stacked) {\n          return getPrimary(datum, primaryAxis, secondaryAxis);\n        }\n      }\n\n      return datum.primaryValue;\n    };\n\n    var getInteractionKey = function getInteractionKey(datum) {\n      return \"\" + getInteractionPrimary(datum);\n    };\n\n    var getTooltipKey = function getTooltipKey(datum) {\n      return \"\" + datum.primaryValue;\n    };\n\n    if (options.interactionMode === 'closest') {\n      getInteractionKey = function getInteractionKey(datum) {\n        return getInteractionPrimary(datum) + \"_\" + datum.secondaryValue;\n      };\n    }\n\n    if (tooltipOptions.groupingMode === 'single') {\n      getTooltipKey = function getTooltipKey(datum) {\n        return datum.primaryValue + \"_\" + datum.secondaryValue;\n      };\n    } else if (tooltipOptions.groupingMode === 'secondary') {\n      getTooltipKey = function getTooltipKey(datum) {\n        return \"\" + datum.secondaryValue;\n      };\n    } else if (tooltipOptions.groupingMode === 'series') {\n      getTooltipKey = function getTooltipKey(datum) {\n        return \"\" + datum.seriesIndex;\n      };\n    }\n\n    allDatums.forEach(function (datum) {\n      var interactionKey = getInteractionKey(datum);\n      var tooltipKey = getTooltipKey(datum);\n\n      if (!datumsByInteractionGroup.has(interactionKey)) {\n        datumsByInteractionGroup.set(interactionKey, []);\n      }\n\n      if (!datumsByTooltipGroup.has(tooltipKey)) {\n        datumsByTooltipGroup.set(tooltipKey, []);\n      }\n\n      datumsByInteractionGroup.get(interactionKey).push(datum);\n      datumsByTooltipGroup.get(tooltipKey).push(datum);\n    });\n    datumsByInteractionGroup.forEach(function (value, key) {\n      datumsByInteractionGroup.set(key, sortDatumsBySecondaryPx(value, secondaryAxes));\n    });\n    datumsByTooltipGroup.forEach(function (value, key) {\n      datumsByTooltipGroup.set(key, sortDatumsBySecondaryPx(value, secondaryAxes));\n    });\n    allDatums.forEach(function (datum) {\n      var interactionKey = getInteractionKey(datum);\n      var tooltipKey = getTooltipKey(datum);\n      datum.interactiveGroup = datumsByInteractionGroup.get(interactionKey);\n      datum.tooltipGroup = datumsByTooltipGroup.get(tooltipKey);\n    });\n    return [datumsByInteractionGroup, datumsByTooltipGroup];\n  }, [isInteracting, allDatums, options.interactionMode, primaryAxis, secondaryAxes, tooltipOptions.groupingMode]),\n      datumsByInteractionGroup = _React$useMemo[0],\n      datumsByTooltipGroup = _React$useMemo[1];\n\n  var getSeriesStatusStyle = React.useCallback(function (series, focusedDatum) {\n    var _getOptions$getSeries, _getOptions$getSeries2, _getOptions;\n\n    var base = {\n      color: getOptions().defaultColors[series.index % getOptions().defaultColors.length]\n    };\n    var status = getSeriesStatus(series, focusedDatum);\n    var statusStyles = (_getOptions$getSeries = (_getOptions$getSeries2 = (_getOptions = getOptions()).getSeriesStyle) == null ? void 0 : _getOptions$getSeries2.call(_getOptions, series, status)) != null ? _getOptions$getSeries : {};\n    series.style = materializeStyles(statusStyles, base);\n    return series.style;\n  }, [getOptions]);\n  var getDatumStatusStyle = React.useCallback(function (datum, focusedDatum) {\n    var _series$datum$seriesI, _getOptions$getDatumS, _getOptions$getDatumS2, _getOptions2;\n\n    var base = _extends({}, (_series$datum$seriesI = series[datum.seriesIndex]) == null ? void 0 : _series$datum$seriesI.style, {\n      color: getOptions().defaultColors[datum.seriesIndex % getOptions().defaultColors.length]\n    });\n\n    var status = getDatumStatus(datum, focusedDatum);\n    var statusStyles = (_getOptions$getDatumS = (_getOptions$getDatumS2 = (_getOptions2 = getOptions()).getDatumStyle) == null ? void 0 : _getOptions$getDatumS2.call(_getOptions2, datum, status)) != null ? _getOptions$getDatumS : {};\n    datum.style = materializeStyles(statusStyles, base);\n    return datum.style;\n  }, [getOptions, series]); // Reverse the stack order for proper z-indexing\n\n  var orderedSeries = React.useMemo(function () {\n    var reversedSeries = [].concat(series).reverse();\n    return getOptions().getSeriesOrder(reversedSeries);\n  }, [getOptions, series]);\n  useIsomorphicLayoutEffect(function () {\n    if (svgRef.current && svgRef.current.parentElement && !svgRef.current.parentElement.style.position) {\n      svgRef.current.parentElement.style.position = 'relative';\n    }\n  });\n  var contextValue = {\n    getOptions: getOptions,\n    gridDimensions: gridDimensions,\n    primaryAxis: primaryAxis,\n    secondaryAxes: secondaryAxes,\n    series: series,\n    orderedSeries: orderedSeries,\n    datumsByInteractionGroup: datumsByInteractionGroup,\n    datumsByTooltipGroup: datumsByTooltipGroup,\n    width: width,\n    height: height,\n    getSeriesStatusStyle: getSeriesStatusStyle,\n    getDatumStatusStyle: getDatumStatusStyle,\n    axisDimensionsState: axisDimensionsState,\n    focusedDatumState: focusedDatumState,\n    svgRef: svgRef,\n    isInteractingState: isInteractingState\n  };\n  var seriesByAxisId = React.useMemo(function () {\n    return sort(groups(orderedSeries, function (d) {\n      return d.secondaryAxisId;\n    }), function (_ref3) {\n      var key = _ref3[0];\n      return secondaryAxes.findIndex(function (axis) {\n        return axis.id === key;\n      });\n    });\n  }, [orderedSeries, secondaryAxes]); // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  var getSeriesInfo = function getSeriesInfo() {\n    return {\n      primaryAxis: primaryAxis,\n      secondaryAxes: secondaryAxes,\n      seriesByAxisId: seriesByAxisId\n    };\n  };\n\n  var getMemoizedSeriesInfo = React.useCallback(function () {\n    return {\n      primaryAxis: primaryAxis,\n      secondaryAxes: secondaryAxes,\n      seriesByAxisId: seriesByAxisId\n    };\n  }, [primaryAxis, secondaryAxes, seriesByAxisId]);\n\n  if (options.memoizeSeries) {\n    getSeriesInfo = getMemoizedSeriesInfo;\n  }\n\n  var seriesEl = React.useMemo(function () {\n    var _getSeriesInfo = getSeriesInfo(),\n        primaryAxis = _getSeriesInfo.primaryAxis,\n        secondaryAxes = _getSeriesInfo.secondaryAxes,\n        seriesByAxisId = _getSeriesInfo.seriesByAxisId;\n\n    return seriesByAxisId.map(function (_ref4) {\n      var axisId = _ref4[0],\n          series = _ref4[1];\n      var secondaryAxis = secondaryAxes.find(function (d) {\n        return d.id === axisId;\n      });\n\n      if (!secondaryAxis) {\n        return null;\n      }\n\n      var elementType = secondaryAxis.elementType;\n\n      var Component = function () {\n        if (elementType === 'line' || elementType === 'bubble' || elementType === 'area') {\n          return Line;\n        }\n\n        if (elementType === 'bar') {\n          return Bar;\n        }\n\n        throw new Error('Invalid elementType');\n      }();\n\n      if (primaryAxis.isInvalid || secondaryAxis.isInvalid) {\n        return null;\n      }\n\n      return /*#__PURE__*/React.createElement(Component, {\n        key: axisId != null ? axisId : '__default__',\n        primaryAxis: primaryAxis,\n        secondaryAxis: secondaryAxis,\n        series: series\n      });\n    });\n  }, [getSeriesInfo]);\n  return /*#__PURE__*/React.createElement(ChartContextProvider, {\n    value: useGetLatest(contextValue)\n  }, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"svg\", {\n    ref: svgRef,\n    style: {\n      width: width,\n      height: height,\n      overflow: options.brush ? 'hidden' : 'visible'\n    },\n    onClick: function onClick(e) {\n      return options.onClickDatum == null ? void 0 : options.onClickDatum(focusedDatum, e);\n    },\n    onMouseEnter: function onMouseEnter() {\n      isInteractingState[1](true);\n    },\n    onMouseLeave: function onMouseLeave() {\n      isInteractingState[1](false);\n    }\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    className: \"axes\"\n  }, [primaryAxis].concat(secondaryAxes).map(function (axis) {\n    return /*#__PURE__*/React.createElement(AxisLinear, _extends({\n      key: [axis.position, axis.id].join('')\n    }, axis));\n  })), /*#__PURE__*/React.createElement(\"g\", {\n    className: \"Series\",\n    style: {\n      pointerEvents: 'none'\n    }\n  }, seriesEl), /*#__PURE__*/React.createElement(Voronoi, null), (_options$renderSVG = options.renderSVG == null ? void 0 : options.renderSVG()) != null ? _options$renderSVG : null), /*#__PURE__*/React.createElement(Cursors, null), /*#__PURE__*/React.createElement(Tooltip, null)));\n}\n\nfunction getFirstDefinedValue(options, data) {\n  var firstDefinedValue;\n  data.some(function (serie) {\n    return serie.data.some(function (originalDatum) {\n      var value = options.getValue(originalDatum);\n\n      if (value !== null && typeof value !== 'undefined') {\n        firstDefinedValue = value;\n        return true;\n      }\n    });\n  });\n  return firstDefinedValue;\n}\n\nfunction axisOptionsWithScaleType(options, firstValue) {\n  var scaleType = options.scaleType;\n\n  if (!options.scaleType) {\n    if (typeof firstValue === 'number') {\n      scaleType = 'linear';\n    } else if (typeof (firstValue == null ? void 0 : firstValue.getMonth) === 'function') {\n      scaleType = 'time';\n    } else if (typeof firstValue === 'string' || typeof firstValue === 'boolean') {\n      scaleType = 'band';\n    } else {\n      throw new Error('Invalid scale type: Unable to infer type from data');\n    }\n  }\n\n  return _extends({}, options, {\n    scaleType: scaleType\n  });\n}\n\nfunction sortDatumsBySecondaryPx(datums, secondaryAxes) {\n  if (secondaryAxes.every(function (d) {\n    return d.stacked;\n  })) {\n    var differingInverts = secondaryAxes.some(function (d) {\n      return d.invert;\n    }) && secondaryAxes.some(function (d) {\n      return !d.invert;\n    });\n\n    if (!differingInverts) {\n      return datums;\n    }\n  }\n\n  return [].concat(datums).sort(function (a, b) {\n    var _aAxis$scale, _a$stackData, _bAxis$scale, _b$stackData;\n\n    var aAxis = secondaryAxes.find(function (d) {\n      return d.id === a.secondaryAxisId;\n    });\n    var bAxis = secondaryAxes.find(function (d) {\n      return d.id === b.secondaryAxisId;\n    });\n    var aPx = (_aAxis$scale = aAxis == null ? void 0 : aAxis.scale(aAxis.stacked ? (_a$stackData = a.stackData) == null ? void 0 : _a$stackData[1] : a.secondaryValue)) != null ? _aAxis$scale : NaN;\n    var bPx = (_bAxis$scale = bAxis == null ? void 0 : bAxis.scale(bAxis.stacked ? (_b$stackData = b.stackData) == null ? void 0 : _b$stackData[1] : b.secondaryValue)) != null ? _bAxis$scale : NaN;\n    return aPx > bPx ? 1 : aPx < bPx ? -1 : 0;\n  });\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}