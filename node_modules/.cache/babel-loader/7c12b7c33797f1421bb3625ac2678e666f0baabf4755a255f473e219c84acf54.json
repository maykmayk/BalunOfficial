{"ast":null,"code":"import axios from 'axios';\nclass ApiManager {\n  constructor() {\n    this.BASE_URL = 'http://api.football-data.org/v1';\n    this.API_KEY = process.env.REACT_APP_API_KEY;\n    this.http = axios;\n  }\n  sendRequest(method, url, data, headers) {\n    const cloneHeaders = {\n      ...headers,\n      'X-Auth-Token': this.API_KEY\n    };\n    return axios({\n      method,\n      url: `${this.BASE_URL}/${url}`,\n      data,\n      headers: cloneHeaders\n    });\n  }\n  getTeamIDFromURL(url) {\n    return parseInt(url.substring(url.lastIndexOf('/') + 1, url.length));\n  }\n  async getCompeitions() {\n    const request = await this.sendRequest('GET', 'competitions');\n    if (request.status === 200) {\n      return request.data;\n    }\n    return null;\n  }\n  async getCompetitionTable(id) {\n    const request = await this.sendRequest('GET', `competitions/${id}/leagueTable`);\n    if (request.status === 200) {\n      return request.data;\n    }\n    return null;\n  }\n  async getTeam(id) {\n    return Promise.all([this.sendRequest('GET', `teams/${id}`), this.sendRequest('GET', `teams/${id}/fixtures`), this.sendRequest('GET', `teams/${id}/players`)]).then(responses => this.processTeamResponse(responses), error => error);\n  }\n  processTeamResponse(team) {\n    const data = team.map(team => team.data);\n    return {\n      ...data[0],\n      fixtures: data[1],\n      players: data[2]\n    };\n  }\n}\nexport default new ApiManager();","map":{"version":3,"names":["axios","ApiManager","constructor","BASE_URL","API_KEY","process","env","REACT_APP_API_KEY","http","sendRequest","method","url","data","headers","cloneHeaders","getTeamIDFromURL","parseInt","substring","lastIndexOf","length","getCompeitions","request","status","getCompetitionTable","id","getTeam","Promise","all","then","responses","processTeamResponse","error","team","map","fixtures","players"],"sources":["/Users/lebon/Desktop/el_balon/src/api/ApiManager.js"],"sourcesContent":["import axios from 'axios';\n\nclass ApiManager {\n\tconstructor() {\n\t\tthis.BASE_URL = 'http://api.football-data.org/v1';\n\t\tthis.API_KEY = process.env.REACT_APP_API_KEY;\n\t\tthis.http = axios;\n\t}\n\n\tsendRequest(method, url, data, headers) {\n\t\tconst cloneHeaders = {\n\t\t\t...headers,\n\t\t\t'X-Auth-Token': this.API_KEY,\n\t\t}\n\t\t\n\t\treturn axios({\n\t\t\tmethod,\n\t\t\turl: `${this.BASE_URL}/${url}`,\n\t\t\tdata,\n\t\t\theaders: cloneHeaders,\n\t\t});\n\t}\n\n\tgetTeamIDFromURL(url) {\n\t\treturn parseInt(url.substring(url.lastIndexOf('/') + 1, url.length));\n\t}\n\n\tasync getCompeitions() {\n\t\tconst request = await this.sendRequest('GET', 'competitions');\n\n\t\tif (request.status === 200) {\n\t\t\treturn request.data;\n\t\t} \n\n\t\treturn null;\n\t}\n\n\tasync getCompetitionTable(id) {\n\t\tconst request = await this.sendRequest('GET', `competitions/${id}/leagueTable`);\n\n\t\tif (request.status === 200) {\n\t\t\treturn request.data;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tasync getTeam(id) {\n\t\treturn Promise.all([\n\t\t\tthis.sendRequest('GET', `teams/${id}`),\n\t\t\tthis.sendRequest('GET', `teams/${id}/fixtures`),\n\t\t\tthis.sendRequest('GET', `teams/${id}/players`)\n\t\t]).then(\n\t\t\tresponses => this.processTeamResponse(responses), \n\t\t\terror => error\n\t\t);\n\t}\n\n\tprocessTeamResponse(team) {\n\t\tconst data = team.map(team => team.data);\n\t\treturn {\n\t\t\t...data[0],\n\t\t\tfixtures: data[1],\n\t\t\tplayers: data[2],\n\t\t}\n\t}\n}\n\nexport default new ApiManager();"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,UAAU,CAAC;EAChBC,WAAWA,CAAA,EAAG;IACb,IAAI,CAACC,QAAQ,GAAG,iCAAiC;IACjD,IAAI,CAACC,OAAO,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB;IAC5C,IAAI,CAACC,IAAI,GAAGR,KAAK;EAClB;EAEAS,WAAWA,CAACC,MAAM,EAAEC,GAAG,EAAEC,IAAI,EAAEC,OAAO,EAAE;IACvC,MAAMC,YAAY,GAAG;MACpB,GAAGD,OAAO;MACV,cAAc,EAAE,IAAI,CAACT;IACtB,CAAC;IAED,OAAOJ,KAAK,CAAC;MACZU,MAAM;MACNC,GAAG,EAAG,GAAE,IAAI,CAACR,QAAS,IAAGQ,GAAI,EAAC;MAC9BC,IAAI;MACJC,OAAO,EAAEC;IACV,CAAC,CAAC;EACH;EAEAC,gBAAgBA,CAACJ,GAAG,EAAE;IACrB,OAAOK,QAAQ,CAACL,GAAG,CAACM,SAAS,CAACN,GAAG,CAACO,WAAW,CAAC,GAAG,CAAC,GAAG,CAAC,EAAEP,GAAG,CAACQ,MAAM,CAAC,CAAC;EACrE;EAEA,MAAMC,cAAcA,CAAA,EAAG;IACtB,MAAMC,OAAO,GAAG,MAAM,IAAI,CAACZ,WAAW,CAAC,KAAK,EAAE,cAAc,CAAC;IAE7D,IAAIY,OAAO,CAACC,MAAM,KAAK,GAAG,EAAE;MAC3B,OAAOD,OAAO,CAACT,IAAI;IACpB;IAEA,OAAO,IAAI;EACZ;EAEA,MAAMW,mBAAmBA,CAACC,EAAE,EAAE;IAC7B,MAAMH,OAAO,GAAG,MAAM,IAAI,CAACZ,WAAW,CAAC,KAAK,EAAG,gBAAee,EAAG,cAAa,CAAC;IAE/E,IAAIH,OAAO,CAACC,MAAM,KAAK,GAAG,EAAE;MAC3B,OAAOD,OAAO,CAACT,IAAI;IACpB;IAEA,OAAO,IAAI;EACZ;EAEA,MAAMa,OAAOA,CAACD,EAAE,EAAE;IACjB,OAAOE,OAAO,CAACC,GAAG,CAAC,CAClB,IAAI,CAAClB,WAAW,CAAC,KAAK,EAAG,SAAQe,EAAG,EAAC,CAAC,EACtC,IAAI,CAACf,WAAW,CAAC,KAAK,EAAG,SAAQe,EAAG,WAAU,CAAC,EAC/C,IAAI,CAACf,WAAW,CAAC,KAAK,EAAG,SAAQe,EAAG,UAAS,CAAC,CAC9C,CAAC,CAACI,IAAI,CACNC,SAAS,IAAI,IAAI,CAACC,mBAAmB,CAACD,SAAS,CAAC,EAChDE,KAAK,IAAIA,KACV,CAAC;EACF;EAEAD,mBAAmBA,CAACE,IAAI,EAAE;IACzB,MAAMpB,IAAI,GAAGoB,IAAI,CAACC,GAAG,CAACD,IAAI,IAAIA,IAAI,CAACpB,IAAI,CAAC;IACxC,OAAO;MACN,GAAGA,IAAI,CAAC,CAAC,CAAC;MACVsB,QAAQ,EAAEtB,IAAI,CAAC,CAAC,CAAC;MACjBuB,OAAO,EAAEvB,IAAI,CAAC,CAAC;IAChB,CAAC;EACF;AACD;AAEA,eAAe,IAAIX,UAAU,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}